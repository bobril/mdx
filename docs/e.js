(function(e){"use strict";var r=__bbb.Za;var t=__bbb.lb;var n=__bbb.mb;var a=__bbb.nb;var o=__bbb.ob;var s=__bbb.pb;var i=__bbb.qb;var d=__bbb.rb;var l=__bbb.sb;var g=__bbb.tb;var h=__bbb.ub;var u=__bbb.vb;var c=__bbb.wb;var v=__bbb.xb;__bbb.yb;var _=__bbb.zb;var p=__bbb.Ab;var f=__bbb.$;var b=__bbb.Bb;var m=__bbb.Cb;var y=__bbb.Db;var w=__bbb.Eb;var x=__bbb.Fb;var E=__bbb.Gb;var k=__bbb.Hb;var L=__bbb.Ib;var N=__bbb.Jb;var I=__bbb.jb;var R=__bbb.Kb;var S=__bbb.Lb;class List{constructor(){var e={};e._next=e._prev=e;this._sentinel=e}dequeue(){var e=this._sentinel;var r=e._prev;if(r!==e){G(r);return r}}enqueue(e){var r=this._sentinel;e._prev&&e._next&&G(e);e._next=r._next;r._next._prev=e;r._next=e;e._prev=r}toString(){var e=[];var r=this._sentinel;var t=r._prev;while(t!==r){e.push(JSON.stringify(t,O));t=t._prev}return"["+e.join(", ")+"]"}}function G(e){e._prev._next=e._next;e._next._prev=e._prev;delete e._next;delete e._prev}function O(e,r){if(e!=="_next"&&e!=="_prev"){return r}}var P=r(1);function C(e,r){if(e.nodeCount()<=1){return[]}var a=B(e,r||P);var o=V(a.graph,a.buckets,a.zeroIdx);return t(n(o,function(r){return e.outEdges(r.v,r.w)}))}function V(e,r,t){var n=[];var a=r[r.length-1];var o=r[0];var s;while(e.nodeCount()){while(s=o.dequeue()){T(e,r,t,s)}while(s=a.dequeue()){T(e,r,t,s)}if(e.nodeCount()){for(var i=r.length-2;i>0;--i){s=r[i].dequeue();if(s){n=n.concat(T(e,r,t,s,!0));break}}}}return n}function T(r,t,n,o,s){var i=s?[]:e;a(r.inEdges(o.v),function(e){var a=r.edge(e);var o=r.node(e.v);s&&i.push({v:e.v,w:e.w});o.out-=a;z(t,n,o)});a(r.outEdges(o.v),function(e){var a=r.edge(e);var o=e.w;var s=r.node(o);s["in"]-=a;z(t,n,s)});r.removeNode(o.v);return i}function B(e,r){var t=new o;var n=0;var i=0;a(e.nodes(),function(e){t.setNode(e,{v:e,in:0,out:0})});a(e.edges(),function(e){var a=t.edge(e.v,e.w)||0;var o=r(e);var s=a+o;t.setEdge(e.v,e.w,s);i=Math.max(i,t.node(e.v).out+=o);n=Math.max(n,t.node(e.w)["in"]+=o)});var d=s(i+n+3).map(function(){return new List});var l=n+1;a(t.nodes(),function(e){z(d,l,t.node(e))});return{graph:t,buckets:d,zeroIdx:l}}function z(e,r,t){if(!t.out){e[0].enqueue(t)}else if(!t["in"]){e[e.length-1].enqueue(t)}else{e[t.out-t["in"]+r].enqueue(t)}}function j(e){var r=e.graph().acyclicer==="greedy"?C(e,t(e)):F(e);a(r,function(r){var t=e.edge(r);e.removeEdge(r);t.forwardName=r.name;t.reversed=!0;e.setEdge(r.w,r.v,t,i("rev"))});function t(e){return function(r){return e.edge(r).weight}}}function F(e){var r=[];var t={};var n={};function o(s){if(Object.prototype.hasOwnProperty.call(n,s)){return}n[s]=!0;t[s]=!0;a(e.outEdges(s),function(e){if(Object.prototype.hasOwnProperty.call(t,e.w)){r.push(e)}else{o(e.w)}});delete t[s]}a(e.nodes(),o);return r}function M(e){a(e.edges(),function(r){var t=e.edge(r);if(t.reversed){e.removeEdge(r);var n=t.forwardName;delete t.reversed;delete t.forwardName;e.setEdge(r.w,r.v,t,n)}})}function D(e,r,t,n){var a;do{a=i(n)}while(e.hasNode(a));t.dummy=r;e.setNode(a,t);return a}function Y(e){var r=(new o).setGraph(e.graph());a(e.nodes(),function(t){r.setNode(t,e.node(t))});a(e.edges(),function(t){var n=r.edge(t.v,t.w)||{weight:0,minlen:1};var a=e.edge(t);r.setEdge(t.v,t.w,{weight:n.weight+a.weight,minlen:Math.max(n.minlen,a.minlen)})});return r}function W(e){var r=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());a(e.nodes(),function(t){e.children(t).length||r.setNode(t,e.node(t))});a(e.edges(),function(t){r.setEdge(t,e.edge(t))});return r}function A(e,r){var t=e.x;var n=e.y;var a=r.x-t;var o=r.y-n;var s=e.width/2;var i=e.height/2;if(!a&&!o){throw new Error("Not possible to find intersection inside of the rectangle")}var d,l;if(Math.abs(o)*s>Math.abs(a)*i){o<0&&(i=-i);d=i*a/o;l=i}else{a<0&&(s=-s);d=s;l=s*o/a}return{x:t+d,y:n+l}}function X(e){var r=n(s(J(e)+1),function(){return[]});a(e.nodes(),function(t){var n=e.node(t);var a=n.rank;l(a)||(r[a][n.order]=t)});return r}function U(e){var r=g(n(e.nodes(),function(r){return e.node(r).rank}));a(e.nodes(),function(t){var n=e.node(t);h(n,"rank")&&(n.rank-=r)})}function H(e){var r=g(n(e.nodes(),function(r){return e.node(r).rank}));var t=[];a(e.nodes(),function(n){var a=e.node(n).rank-r;t[a]||(t[a]=[]);t[a].push(n)});var o=0;var s=e.graph().nodeRankFactor;a(t,function(r,t){if(l(r)&&t%s!==0){--o}else o&&a(r,function(r){e.node(r).rank+=o})})}function q(e,r,t,n){var a={width:0,height:0};if(arguments.length>=4){a.rank=t;a.order=n}return D(e,"border",a,r)}function J(e){return u(n(e.nodes(),function(r){var t=e.node(r).rank;if(!l(t)){return t}}))}function $(e,r){var t={lhs:[],rhs:[]};a(e,function(e){if(r(e)){t.lhs.push(e)}else{t.rhs.push(e)}});return t}function Z(e,r){var t=c();try{return r()}finally{console.log(e+" time: "+(c()-t)+"ms")}}function K(e,r){return r()}function Q(e){function r(t){var n=e.children(t);var o=e.node(t);n.length&&a(n,r);if(Object.prototype.hasOwnProperty.call(o,"minRank")){o.borderLeft=[];o.borderRight=[];for(var s=o.minRank,i=o.maxRank+1;s<i;++s){ee(e,"borderLeft","_bl",t,o,s);ee(e,"borderRight","_br",t,o,s)}}}a(e.children(),r)}function ee(e,r,t,n,a,o){var s={width:0,height:0,rank:o,borderType:r};var i=a[r][o-1];var d=D(e,"border",s,t);a[r][o]=d;e.setParent(d,n);i&&e.setEdge(i,d,{weight:1})}function re(e){var r=e.graph().rankdir.toLowerCase();(r==="lr"||r==="rl")&&ne(e)}function te(e){var r=e.graph().rankdir.toLowerCase();(r==="bt"||r==="rl")&&oe(e);if(r==="lr"||r==="rl"){ie(e);ne(e)}}function ne(e){a(e.nodes(),function(r){ae(e.node(r))});a(e.edges(),function(r){ae(e.edge(r))})}function ae(e){var r=e.width;e.width=e.height;e.height=r}function oe(e){a(e.nodes(),function(r){se(e.node(r))});a(e.edges(),function(r){var t=e.edge(r);a(t.points,se);Object.prototype.hasOwnProperty.call(t,"y")&&se(t)})}function se(e){e.y=-e.y}function ie(e){a(e.nodes(),function(r){de(e.node(r))});a(e.edges(),function(r){var t=e.edge(r);a(t.points,de);Object.prototype.hasOwnProperty.call(t,"x")&&de(t)})}function de(e){var r=e.x;e.x=e.y;e.y=r}function le(e){e.graph().dummyChains=[];a(e.edges(),function(r){ge(e,r)})}function ge(r,t){var n=t.v;var a=r.node(n).rank;var o=t.w;var s=r.node(o).rank;var i=t.name;var d=r.edge(t);var l=d.labelRank;if(s===a+1)return;r.removeEdge(t);var g=e;var h,u;for(u=0,++a;a<s;++u,++a){d.points=[];g={width:0,height:0,edgeLabel:d,edgeObj:t,rank:a};h=D(r,"edge",g,"_d");if(a===l){g.width=d.width;g.height=d.height;g.dummy="edge-label";g.labelpos=d.labelpos}r.setEdge(n,h,{weight:d.weight},i);u===0&&r.graph().dummyChains.push(h);n=h}r.setEdge(n,o,{weight:d.weight},i)}function he(e){a(e.graph().dummyChains,function(r){var t=e.node(r);var n=t.edgeLabel;var a;e.setEdge(t.edgeObj,n);while(t.dummy){a=e.successors(r)[0];e.removeNode(r);n.points.push({x:t.x,y:t.y});if(t.dummy==="edge-label"){n.x=t.x;n.y=t.y;n.width=t.width;n.height=t.height}r=a;t=e.node(r)}})}function ue(r){var t={};function o(a){var s=r.node(a);if(Object.prototype.hasOwnProperty.call(t,a)){return s.rank}t[a]=!0;var i=g(n(r.outEdges(a),function(e){return o(e.w)-r.edge(e).minlen}));(i===Number.POSITIVE_INFINITY||i===e||i===null)&&(i=0);return s.rank=i}a(r.sources(),o)}function ce(e,r){return e.node(r.w).rank-e.node(r.v).rank-e.edge(r).minlen}function ve(e){var r=new o({directed:!1});var t=e.nodes()[0];var n=e.nodeCount();r.setNode(t,{});var a,s;while(_e(r,e)<n){a=pe(r,e);s=r.hasNode(a.v)?ce(e,a):-ce(e,a);fe(r,e,s)}return r}function _e(e,r){function t(n){a(r.nodeEdges(n),function(a){var o=a.v,s=n===o?a.w:o;if(!e.hasNode(s)&&!ce(r,a)){e.setNode(s,{});e.setEdge(n,s,{});t(s)}})}a(e.nodes(),t);return e.nodeCount()}function pe(e,r){return v(r.edges(),function(t){if(e.hasNode(t.v)!==e.hasNode(t.w)){return ce(r,t)}})}function fe(e,r,t){a(e.nodes(),function(e){r.node(e).rank+=t})}r(1);r(1);be.CycleException=me;function be(e){var r={};var t={};var n=[];function o(s){if(Object.prototype.hasOwnProperty.call(t,s)){throw new me}if(!Object.prototype.hasOwnProperty.call(r,s)){t[s]=!0;r[s]=!0;a(e.predecessors(s),o);delete t[s];n.push(s)}}a(e.sinks(),o);if(p(r)!==e.nodeCount()){throw new me}return n}function me(){}me.prototype=new Error;function ye(e,r,t){f(r)||(r=[r]);var n=(e.isDirected()?e.successors:e.neighbors).bind(e);var o=[];var s={};a(r,function(r){if(!e.hasNode(r)){throw new Error("Graph does not have node: "+r)}we(e,r,t==="post",s,n,o)});return o}function we(e,r,t,n,o,s){if(!Object.prototype.hasOwnProperty.call(n,r)){n[r]=!0;t||s.push(r);a(o(r),function(r){we(e,r,t,n,o,s)});t&&s.push(r)}}function xe(e,r){return ye(e,r,"post")}function Ee(e,r){return ye(e,r,"pre")}ke.initLowLimValues=Re;ke.initCutValues=Le;ke.calcCutValue=Ie;ke.leaveEdge=Ge;ke.enterEdge=Oe;ke.exchangeEdges=Pe;function ke(e){e=Y(e);ue(e);var r=ve(e);Re(r);Le(r,e);var t,n;while(t=Ge(r)){n=Oe(r,e,t);Pe(r,e,t,n)}}function Le(e,r){var t=xe(e,e.nodes());t=t.slice(0,t.length-1);a(t,function(t){Ne(e,r,t)})}function Ne(e,r,t){var n=e.node(t);var a=n.parent;e.edge(t,a).cutvalue=Ie(e,r,t)}function Ie(e,r,t){var n=e.node(t);var o=n.parent;var s=!0;var i=r.edge(t,o);var d=0;if(!i){s=!1;i=r.edge(o,t)}d=i.weight;a(r.nodeEdges(t),function(n){var a=n.v===t,i=a?n.w:n.v;if(i!==o){var l=a===s,g=r.edge(n).weight;d+=l?g:-g;if(Ve(e,t,i)){var h=e.edge(t,i).cutvalue;d+=l?-h:h}}});return d}function Re(e,r){arguments.length<2&&(r=e.nodes()[0]);Se(e,{},1,r)}function Se(e,r,t,n,o){var s=t;var i=e.node(n);r[n]=!0;a(e.neighbors(n),function(a){Object.prototype.hasOwnProperty.call(r,a)||(t=Se(e,r,t,a,n))});i.low=s;i.lim=t++;if(o){i.parent=o}else{delete i.parent}return t}function Ge(e){return b(e.edges(),function(r){return e.edge(r).cutvalue<0})}function Oe(e,r,t){var n=t.v;var a=t.w;if(!r.hasEdge(n,a)){n=t.w;a=t.v}var o=e.node(n);var s=e.node(a);var i=o;var d=!1;if(o.lim>s.lim){i=s;d=!0}var l=_(r.edges(),function(r){return d===Te(e,e.node(r.v),i)&&d!==Te(e,e.node(r.w),i)});return v(l,function(e){return ce(r,e)})}function Pe(e,r,t,n){var a=t.v;var o=t.w;e.removeEdge(a,o);e.setEdge(n.v,n.w,{});Re(e);Le(e,r);Ce(e,r)}function Ce(e,r){var t=b(e.nodes(),function(e){return!r.node(e).parent});var n=Ee(e,t);n=n.slice(1);a(n,function(t){var n=e.node(t).parent,a=r.edge(t,n),o=!1;if(!a){a=r.edge(n,t);o=!0}r.node(t).rank=r.node(n).rank+(o?a.minlen:-a.minlen)})}function Ve(e,r,t){return e.hasEdge(r,t)}function Te(e,r,t){return t.low<=r.lim&&r.lim<=t.lim}function Be(e){switch(e.graph().ranker){case"network-simplex":Fe(e);break;case"tight-tree":je(e);break;case"longest-path":ze(e);break;default:Fe(e)}}var ze=ue;function je(e){ue(e);ve(e)}function Fe(e){ke(e)}function Me(e){var r=D(e,"root",{},"_root");var t=Ye(e);var n=u(m(t))-1;var o=2*n+1;e.graph().nestingRoot=r;a(e.edges(),function(r){e.edge(r).minlen*=o});var s=We(e)+1;a(e.children(),function(a){De(e,r,o,s,n,t,a)});e.graph().nodeRankFactor=o}function De(e,r,t,n,o,s,i){var d=e.children(i);if(!d.length){i!==r&&e.setEdge(r,i,{weight:0,minlen:t});return}var l=q(e,"_bt");var g=q(e,"_bb");var h=e.node(i);e.setParent(l,i);h.borderTop=l;e.setParent(g,i);h.borderBottom=g;a(d,function(a){De(e,r,t,n,o,s,a);var d=e.node(a);var h=d.borderTop?d.borderTop:a;var u=d.borderBottom?d.borderBottom:a;var c=d.borderTop?n:2*n;var v=h!==u?1:o-s[i]+1;e.setEdge(l,h,{weight:c,minlen:v,nestingEdge:!0});e.setEdge(u,g,{weight:c,minlen:v,nestingEdge:!0})});e.parent(i)||e.setEdge(r,l,{weight:0,minlen:o+s[i]})}function Ye(e){var r={};function t(n,o){var s=e.children(n);s&&s.length&&a(s,function(e){t(e,o+1)});r[n]=o}a(e.children(),function(e){t(e,1)});return r}function We(e){return y(e.edges(),function(r,t){return r+e.edge(t).weight},0)}function Ae(e){var r=e.graph();e.removeNode(r.nestingRoot);delete r.nestingRoot;a(e.edges(),function(r){var t=e.edge(r);t.nestingEdge&&e.removeEdge(r)})}function Xe(e,r,t){var n={},o;a(t,function(t){var a=e.parent(t),s,i;while(a){s=e.parent(a);if(s){i=n[s];n[s]=a}else{i=o;o=a}if(i&&i!==a){r.setEdge(i,a);return}a=s}})}function Ue(e,r,t){var n=He(e),s=new o({compound:!0}).setGraph({root:n}).setDefaultNodeLabel(function(r){return e.node(r)});a(e.nodes(),function(o){var i=e.node(o),d=e.parent(o);if(i.rank===r||i.minRank<=r&&r<=i.maxRank){s.setNode(o);s.setParent(o,d||n);a(e[t](o),function(r){var t=r.v===o?r.w:r.v,n=s.edge(t,o),a=!l(n)?n.weight:0;s.setEdge(t,o,{weight:e.edge(r).weight+a})});Object.prototype.hasOwnProperty.call(i,"minRank")&&s.setNode(o,{borderLeft:i.borderLeft[r],borderRight:i.borderRight[r]})}});return s}function He(e){var r;while(e.hasNode(r=i("_root")));return r}function qe(e,r){var t=0;for(var n=1;n<r.length;++n){t+=Je(e,r[n-1],r[n])}return t}function Je(e,r,o){var s=d(o,n(o,function(e,r){return r}));var i=t(n(r,function(r){return w(n(e.outEdges(r),function(r){return{pos:s[r.w],weight:e.edge(r).weight}}),"pos")}));var l=1;while(l<o.length)l<<=1;var g=2*l-1;l-=1;var h=n(new Array(g),function(){return 0});var u=0;a(i.forEach(function(e){var r=e.pos+l;h[r]+=e.weight;var t=0;while(r>0){r%2&&(t+=h[r+1]);r=r-1>>1;h[r]+=e.weight}u+=e.weight*t}));return u}function $e(e){var r={};var t=_(e.nodes(),function(r){return!e.children(r).length});var o=u(n(t,function(r){return e.node(r).rank}));var i=n(s(o+1),function(){return[]});function d(t){if(h(r,t))return;r[t]=!0;var n=e.node(t);i[n.rank].push(t);a(e.successors(t),d)}var l=w(t,function(r){return e.node(r).rank});a(l,d);return i}function Ze(e,r){return n(r,function(r){var t=e.inEdges(r);if(!t.length){return{v:r}}else{var n=y(t,function(r,t){var n=e.edge(t),a=e.node(t.v);return{sum:r.sum+n.weight*a.order,weight:r.weight+n.weight}},{sum:0,weight:0});return{v:r,barycenter:n.sum/n.weight,weight:n.weight}}})}function Ke(e,r){var t={};a(e,function(e,r){var n=t[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:r};if(!l(e.barycenter)){n.barycenter=e.barycenter;n.weight=e.weight}});a(r.edges(),function(e){var r=t[e.v];var n=t[e.w];if(!l(r)&&!l(n)){n.indegree++;r.out.push(t[e.w])}});var n=_(t,function(e){return!e.indegree});return Qe(n)}function Qe(e){var r=[];function t(e){return function(r){if(r.merged){return}(l(r.barycenter)||l(e.barycenter)||r.barycenter>=e.barycenter)&&er(e,r)}}function o(r){return function(t){t["in"].push(r);--t.indegree===0&&e.push(t)}}while(e.length){var s=e.pop();r.push(s);a(s["in"].reverse(),t(s));a(s.out,o(s))}return n(_(r,function(e){return!e.merged}),function(e){return x(e,["vs","i","barycenter","weight"])})}function er(e,r){var t=0;var n=0;if(e.weight){t+=e.barycenter*e.weight;n+=e.weight}if(r.weight){t+=r.barycenter*r.weight;n+=r.weight}e.vs=r.vs.concat(e.vs);e.barycenter=t/n;e.weight=n;e.i=Math.min(r.i,e.i);r.merged=!0}function rr(e,r){var n=$(e,function(e){return Object.prototype.hasOwnProperty.call(e,"barycenter")});var o=n.lhs,s=w(n.rhs,function(e){return-e.i}),i=[],d=0,l=0,g=0;o.sort(nr(!!r));g=tr(i,s,g);a(o,function(e){g+=e.vs.length;i.push(e.vs);d+=e.barycenter*e.weight;l+=e.weight;g=tr(i,s,g)});var h={vs:t(i)};if(l){h.barycenter=d/l;h.weight=l}return h}function tr(e,r,t){var n;while(r.length&&(n=E(r)).i<=t){r.pop();e.push(n.vs);t++}return t}function nr(e){return function(r,t){if(r.barycenter<t.barycenter){return-1}else if(r.barycenter>t.barycenter){return 1}return!e?r.i-t.i:t.i-r.i}}function ar(r,n,o,s){var i=r.children(n);var d=r.node(n);var l=d?d.borderLeft:e;var g=d?d.borderRight:e;var h={};l&&(i=_(i,function(e){return e!==l&&e!==g}));var u=Ze(r,i);a(u,function(e){if(r.children(e.v).length){var t=ar(r,e.v,o,s);h[e.v]=t;Object.prototype.hasOwnProperty.call(t,"barycenter")&&sr(e,t)}});var c=Ke(u,o);or(c,h);var v=rr(c,s);if(l){v.vs=t([l,v.vs,g]);if(r.predecessors(l).length){var p=r.node(r.predecessors(l)[0]),f=r.node(r.predecessors(g)[0]);if(!Object.prototype.hasOwnProperty.call(v,"barycenter")){v.barycenter=0;v.weight=0}v.barycenter=(v.barycenter*v.weight+p.order+f.order)/(v.weight+2);v.weight+=2}}return v}function or(e,r){a(e,function(e){e.vs=t(e.vs.map(function(e){if(r[e]){return r[e].vs}return e}))})}function sr(e,r){if(!l(e.barycenter)){e.barycenter=(e.barycenter*e.weight+r.barycenter*r.weight)/(e.weight+r.weight);e.weight+=r.weight}else{e.barycenter=r.barycenter;e.weight=r.weight}}function ir(e){var r=J(e),t=dr(e,s(1,r+1),"inEdges"),n=dr(e,s(r-1,-1,-1),"outEdges");var a=$e(e);gr(e,a);var o=Number.POSITIVE_INFINITY,i;for(var d=0,l=0;l<4;++d,++l){lr(d%2?t:n,d%4>=2);a=X(e);var g=qe(e,a);if(g<o){l=0;i=k(a);o=g}}gr(e,i)}function dr(e,r,t){return n(r,function(r){return Ue(e,r,t)})}function lr(e,r){var t=new o;a(e,function(e){var n=e.graph().root;var o=ar(e,n,t,r);a(o.vs,function(r,t){e.node(r).order=t});Xe(e,t,o.vs)})}function gr(e,r){a(r,function(r){a(r,function(r,t){e.node(r).order=t})})}function hr(e){var r=cr(e);a(e.graph().dummyChains,function(t){var n=e.node(t);var a=n.edgeObj;var o=ur(e,r,a.v,a.w);var s=o.path;var i=o.lca;var d=0;var l=s[d];var g=!0;while(t!==a.w){n=e.node(t);if(g){while((l=s[d])!==i&&e.node(l).maxRank<n.rank){d++}l===i&&(g=!1)}if(!g){while(d<s.length-1&&e.node(l=s[d+1]).minRank<=n.rank){d++}l=s[d]}e.setParent(t,l);t=e.successors(t)[0]}})}function ur(e,r,t,n){var a=[];var o=[];var s=Math.min(r[t].low,r[n].low);var i=Math.max(r[t].lim,r[n].lim);var d;var l;d=t;do{d=e.parent(d);a.push(d)}while(d&&(r[d].low>s||i>r[d].lim));l=d;d=n;while((d=e.parent(d))!==l){o.push(d)}return{path:a.concat(o.reverse()),lca:l}}function cr(e){var r={};var t=0;function n(o){var s=t;a(e.children(o),n);r[o]={low:s,lim:t++}}a(e.children(),n);return r}function vr(e,r){var t={};function n(r,n){var o=0,s=0,i=r.length,d=E(n);a(n,function(r,l){var g=pr(e,r),h=g?e.node(g).order:i;if(g||r===d){a(n.slice(s,l+1),function(r){a(e.predecessors(r),function(n){var a=e.node(n),s=a.order;(s<o||h<s)&&!(a.dummy&&e.node(r).dummy)&&fr(t,n,r)})});s=l+1;o=h}});return n}y(r,n);return t}function _r(e,r){var t={};function n(r,n,o,i,d){var l;a(s(n,o),function(n){l=r[n];e.node(l).dummy&&a(e.predecessors(l),function(r){var n=e.node(r);n.dummy&&(n.order<i||n.order>d)&&fr(t,r,l)})})}function o(r,t){var o=-1,s,i=0;a(t,function(a,d){if(e.node(a).dummy==="border"){var l=e.predecessors(a);if(l.length){s=e.node(l[0]).order;n(t,i,d,o,s);i=d;o=s}}n(t,i,t.length,s,r.length)});return t}y(r,o);return t}function pr(e,r){if(e.node(r).dummy){return b(e.predecessors(r),function(r){return e.node(r).dummy})}}function fr(e,r,t){if(r>t){var n=r;r=t;t=n}var a=e[r];a||(e[r]=a={});a[t]=!0}function br(e,r,t){if(r>t){var n=r;r=t;t=n}return!!e[r]&&Object.prototype.hasOwnProperty.call(e[r],t)}function mr(e,r,t,n){var o={},s={},i={};a(r,function(e){a(e,function(e,r){o[e]=e;s[e]=e;i[e]=r})});a(r,function(e){var r=-1;a(e,function(e){var a=n(e);if(a.length){a=w(a,function(e){return i[e]});var d=(a.length-1)/2;for(var l=Math.floor(d),g=Math.ceil(d);l<=g;++l){var h=a[l];if(s[e]===e&&r<i[h]&&!br(t,e,h)){s[h]=e;s[e]=o[e]=o[h];r=i[h]}}}})});return{root:o,align:s}}function yr(e,r,t,n,o){var s={},i=wr(e,r,t,o),d=o?"borderLeft":"borderRight";function l(e,r){var t=i.nodes();var n=t.pop();var a={};while(n){if(a[n]){e(n)}else{a[n]=!0;t.push(n);t=t.concat(r(n))}n=t.pop()}}function g(e){s[e]=i.inEdges(e).reduce(function(e,r){return Math.max(e,s[r.v]+i.edge(r))},0)}function h(r){var t=i.outEdges(r).reduce(function(e,r){return Math.min(e,s[r.w]-i.edge(r))},Number.POSITIVE_INFINITY);var n=e.node(r);t!==Number.POSITIVE_INFINITY&&n.borderType!==d&&(s[r]=Math.max(s[r],t))}l(g,i.predecessors.bind(i));l(h,i.successors.bind(i));a(n,function(e){s[e]=s[t[e]]});return s}function wr(e,r,t,n){var s=new o,i=e.graph(),d=Nr(i.nodesep,i.edgesep,n);a(r,function(r){var n;a(r,function(r){var a=t[r];s.setNode(a);if(n){var o=t[n],i=s.edge(o,a);s.setEdge(o,a,Math.max(d(e,r,n),i||0))}n=r})});return s}function xr(e,r){return v(m(r),function(r){var t=Number.NEGATIVE_INFINITY;var n=Number.POSITIVE_INFINITY;L(r,function(r,a){var o=Ir(e,a)/2;t=Math.max(r+o,t);n=Math.min(r-o,n)});return t-n})}function Er(e,r){var t=m(r),n=g(t),o=u(t);a(["u","d"],function(t){a(["l","r"],function(a){var s=t+a,i=e[s],d;if(i===r)return;var l=m(i);d=a==="l"?n-g(l):o-u(l);d&&(e[s]=N(i,function(e){return e+d}))})})}function kr(e,r){return N(e.ul,function(t,a){if(r){return e[r.toLowerCase()][a]}else{var o=w(n(e,a));return(o[1]+o[2])/2}})}function Lr(e){var r=X(e);var t=I(vr(e,r),_r(e,r));var o={};var s;a(["u","d"],function(i){s=i==="u"?r:m(r).reverse();a(["l","r"],function(r){r==="r"&&(s=n(s,function(e){return m(e).reverse()}));var a=(i==="u"?e.predecessors:e.successors).bind(e);var d=mr(e,s,t,a);var l=yr(e,s,d.root,d.align,r==="r");r==="r"&&(l=N(l,function(e){return-e}));o[i+r]=l})});var i=xr(e,o);Er(o,i);return kr(o,e.graph().align)}function Nr(e,r,t){return function(n,a,o){var s=n.node(a);var i=n.node(o);var d=0;var l;d+=s.width/2;if(Object.prototype.hasOwnProperty.call(s,"labelpos")){switch(s.labelpos.toLowerCase()){case"l":l=-s.width/2;break;case"r":l=s.width/2;break}}l&&(d+=t?l:-l);l=0;d+=(s.dummy?r:e)/2;d+=(i.dummy?r:e)/2;d+=i.width/2;if(Object.prototype.hasOwnProperty.call(i,"labelpos")){switch(i.labelpos.toLowerCase()){case"l":l=i.width/2;break;case"r":l=-i.width/2;break}}l&&(d+=t?l:-l);l=0;return d}}function Ir(e,r){return e.node(r).width}function Rr(e){e=W(e);Sr(e);R(Lr(e),function(r,t){e.node(t).x=r})}function Sr(e){var r=X(e);var t=e.graph().ranksep;var o=0;a(r,function(r){var s=u(n(r,function(r){return e.node(r).height}));a(r,function(r){e.node(r).y=o+s/2});o+=s+t})}function Gr(e,r){var t=r&&r.debugTiming?Z:K;t("layout",()=>{var r=t("  buildLayoutGraph",()=>Dr(e));t("  runLayout",()=>Or(r,t));t("  updateInputGraph",()=>Pr(e,r))})}function Or(e,r){r("    makeSpaceForEdgeLabels",()=>Yr(e));r("    removeSelfEdges",()=>Zr(e));r("    acyclic",()=>j(e));r("    nestingGraph.run",()=>Me(e));r("    rank",()=>Be(W(e)));r("    injectEdgeLabelProxies",()=>Wr(e));r("    removeEmptyRanks",()=>H(e));r("    nestingGraph.cleanup",()=>Ae(e));r("    normalizeRanks",()=>U(e));r("    assignRankMinMax",()=>Ar(e));r("    removeEdgeLabelProxies",()=>Xr(e));r("    normalize.run",()=>le(e));r("    parentDummyChains",()=>hr(e));r("    addBorderSegments",()=>Q(e));r("    order",()=>ir(e));r("    insertSelfEdges",()=>Kr(e));r("    adjustCoordinateSystem",()=>re(e));r("    position",()=>Rr(e));r("    positionSelfEdges",()=>Qr(e));r("    removeBorderNodes",()=>$r(e));r("    normalize.undo",()=>he(e));r("    fixupEdgeLabelCoords",()=>qr(e));r("    undoCoordinateSystem",()=>te(e));r("    translateGraph",()=>Ur(e));r("    assignNodeIntersects",()=>Hr(e));r("    reversePoints",()=>Jr(e));r("    acyclic.undo",()=>M(e))}function Pr(e,r){a(e.nodes(),function(t){var n=e.node(t);var a=r.node(t);if(n){n.x=a.x;n.y=a.y;if(r.children(t).length){n.width=a.width;n.height=a.height}}});a(e.edges(),function(t){var n=e.edge(t);var a=r.edge(t);n.points=a.points;if(Object.prototype.hasOwnProperty.call(a,"x")){n.x=a.x;n.y=a.y}});e.graph().width=r.graph().width;e.graph().height=r.graph().height}var Cr=["nodesep","edgesep","ranksep","marginx","marginy"];var Vr={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"};var Tr=["acyclicer","ranker","rankdir","align"];var Br=["width","height"];var zr={width:0,height:0};var jr=["minlen","weight","width","height","labeloffset"];var Fr={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"};var Mr=["labelpos"];function Dr(e){var r=new o({multigraph:!0,compound:!0});var t=rt(e.graph());r.setGraph(I({},Vr,et(t,Cr),x(t,Tr)));a(e.nodes(),function(t){var n=rt(e.node(t));r.setNode(t,S(et(n,Br),zr));r.setParent(t,e.parent(t))});a(e.edges(),function(t){var n=rt(e.edge(t));r.setEdge(t,I({},Fr,et(n,jr),x(n,Mr)))});return r}function Yr(e){var r=e.graph();r.ranksep/=2;a(e.edges(),function(t){var n=e.edge(t);n.minlen*=2;if(n.labelpos.toLowerCase()!=="c"){if(r.rankdir==="TB"||r.rankdir==="BT"){n.width+=n.labeloffset}else{n.height+=n.labeloffset}}})}function Wr(e){a(e.edges(),function(r){var t=e.edge(r);if(t.width&&t.height){var n=e.node(r.v),a=e.node(r.w),o={rank:(a.rank-n.rank)/2+n.rank,e:r};D(e,"edge-proxy",o,"_ep")}})}function Ar(e){var r=0;a(e.nodes(),function(t){var n=e.node(t);if(n.borderTop){n.minRank=e.node(n.borderTop).rank;n.maxRank=e.node(n.borderBottom).rank;r=u(r,n.maxRank)}});e.graph().maxRank=r}function Xr(e){a(e.nodes(),function(r){var t=e.node(r);if(t.dummy==="edge-proxy"){e.edge(t.e).labelRank=t.rank;e.removeNode(r)}})}function Ur(e){var r=Number.POSITIVE_INFINITY;var t=0;var n=Number.POSITIVE_INFINITY;var o=0;var s=e.graph();var i=s.marginx||0;var d=s.marginy||0;function l(e){var a=e.x;var s=e.y;var i=e.width;var d=e.height;r=Math.min(r,a-i/2);t=Math.max(t,a+i/2);n=Math.min(n,s-d/2);o=Math.max(o,s+d/2)}a(e.nodes(),function(r){l(e.node(r))});a(e.edges(),function(r){var t=e.edge(r);Object.prototype.hasOwnProperty.call(t,"x")&&l(t)});r-=i;n-=d;a(e.nodes(),function(t){var a=e.node(t);a.x-=r;a.y-=n});a(e.edges(),function(t){var o=e.edge(t);a(o.points,function(e){e.x-=r;e.y-=n});Object.prototype.hasOwnProperty.call(o,"x")&&(o.x-=r);Object.prototype.hasOwnProperty.call(o,"y")&&(o.y-=n)});s.width=t-r+i;s.height=o-n+d}function Hr(e){a(e.edges(),function(r){var t=e.edge(r);var n=e.node(r.v);var a=e.node(r.w);var o,s;if(!t.points){t.points=[];o=a;s=n}else{o=t.points[0];s=t.points[t.points.length-1]}t.points.unshift(A(n,o));t.points.push(A(a,s))})}function qr(e){a(e.edges(),function(r){var t=e.edge(r);if(Object.prototype.hasOwnProperty.call(t,"x")){(t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset);switch(t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}}})}function Jr(e){a(e.edges(),function(r){var t=e.edge(r);t.reversed&&t.points.reverse()})}function $r(e){a(e.nodes(),function(r){if(e.children(r).length){var t=e.node(r),n=e.node(t.borderTop),a=e.node(t.borderBottom),o=e.node(E(t.borderLeft)),s=e.node(E(t.borderRight));t.width=Math.abs(s.x-o.x);t.height=Math.abs(a.y-n.y);t.x=o.x+t.width/2;t.y=n.y+t.height/2}});a(e.nodes(),function(r){e.node(r).dummy==="border"&&e.removeNode(r)})}function Zr(e){a(e.edges(),function(r){if(r.v===r.w){var t=e.node(r.v);t.selfEdges||(t.selfEdges=[]);t.selfEdges.push({e:r,label:e.edge(r)});e.removeEdge(r)}})}function Kr(e){var r=X(e);a(r,function(r){var t=0;a(r,function(r,n){var o=e.node(r);o.order=n+t;a(o.selfEdges,function(r){D(e,"selfedge",{width:r.label.width,height:r.label.height,rank:o.rank,order:n+ ++t,e:r.e,label:r.label},"_se")});delete o.selfEdges})})}function Qr(e){a(e.nodes(),function(r){var t=e.node(r);if(t.dummy==="selfedge"){var n=e.node(t.e.v),a=n.x+n.width/2,o=n.y,s=t.x-a,i=n.height/2;e.setEdge(t.e,t.label);e.removeNode(r);t.label.points=[{x:a+2*s/3,y:o-i},{x:a+5*s/6,y:o-i},{x:a+s,y:o},{x:a+5*s/6,y:o+i},{x:a+2*s/3,y:o+i}];t.label.x=t.x;t.label.y=t.y}})}function et(e,r){return N(x(e,r),Number)}function rt(e){var r={};a(e,function(e,t){r[t.toLowerCase()]=e});return r}__bbb.Sb=Gr;__bbb.d=undefined}).call(this)