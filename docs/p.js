(function(e){"use strict";var t=function(e,t,s){typeof t==="symbol"&&(t=t.description?"[".concat(t.description,"]"):"");return Object.defineProperty(e,"name",{configurable:!0,value:s?"".concat(s," ",t):t})};var s=__bbb.Mb;var n=__bbb.hc;var i=__bbb.ic;var a=__bbb.kc;var r=__bbb.jc;var c=__bbb.tc;var o=__bbb.uc;var l=__bbb.ac;var _=__bbb.Nb;var $=__bbb.Ac;var h=__bbb.yc;var y=__bbb.Kc;var u=__bbb.Cc;var d=__bbb.Dc;var k=__bbb.Ec;var b=__bbb.dc;var p=__bbb.zc;var m=__bbb.Fc;var g=__bbb.Gc;var V=__bbb.Hc;var f;var E=function(){var e=s(function(e,t,s,n){for(s=s||{},n=e.length;n--;s[e[n]]=t);return s},"o"),t=[6,8,10,22,24,26,28,33,34,35,36,37,40,43,44,50],n=[1,10],i=[1,11],a=[1,12],r=[1,13],c=[1,20],o=[1,21],l=[1,22],_=[1,23],$=[1,24],h=[1,19],y=[1,25],u=[1,26],d=[1,18],k=[1,33],b=[1,34],p=[1,35],m=[1,36],g=[1,37],V=[6,8,10,13,15,17,20,21,22,24,26,28,33,34,35,36,37,40,43,44,50,63,64,65,66,67],f=[1,42],E=[1,43],A=[1,52],v=[40,50,68,69],S=[1,63],R=[1,61],x=[1,58],B=[1,62],N=[1,64],O=[6,8,10,13,17,22,24,26,28,33,34,35,36,37,40,41,42,43,44,48,49,50,63,64,65,66,67],T=[63,64,65,66,67],D=[1,81],C=[1,80],F=[1,78],I=[1,79],J=[6,10,42,47],L=[6,10,13,41,42,47,48,49],G=[1,89],w=[1,88],Y=[1,87],H=[19,56],M=[1,98],P=[1,97],K=[19,56,58,60];var Z={trace:s(function e(){},"trace"),yy:{},symbols_:{error:2,start:3,ER_DIAGRAM:4,document:5,EOF:6,line:7,SPACE:8,statement:9,NEWLINE:10,entityName:11,relSpec:12,COLON:13,role:14,STYLE_SEPARATOR:15,idList:16,BLOCK_START:17,attributes:18,BLOCK_STOP:19,SQS:20,SQE:21,title:22,title_value:23,acc_title:24,acc_title_value:25,acc_descr:26,acc_descr_value:27,acc_descr_multiline_value:28,direction:29,classDefStatement:30,classStatement:31,styleStatement:32,direction_tb:33,direction_bt:34,direction_rl:35,direction_lr:36,CLASSDEF:37,stylesOpt:38,separator:39,UNICODE_TEXT:40,STYLE_TEXT:41,COMMA:42,CLASS:43,STYLE:44,style:45,styleComponent:46,SEMI:47,NUM:48,BRKT:49,ENTITY_NAME:50,attribute:51,attributeType:52,attributeName:53,attributeKeyTypeList:54,attributeComment:55,ATTRIBUTE_WORD:56,attributeKeyType:57,",":58,ATTRIBUTE_KEY:59,COMMENT:60,cardinality:61,relType:62,ZERO_OR_ONE:63,ZERO_OR_MORE:64,ONE_OR_MORE:65,ONLY_ONE:66,MD_PARENT:67,NON_IDENTIFYING:68,IDENTIFYING:69,WORD:70,$accept:0,$end:1},terminals_:{2:"error",4:"ER_DIAGRAM",6:"EOF",8:"SPACE",10:"NEWLINE",13:"COLON",15:"STYLE_SEPARATOR",17:"BLOCK_START",19:"BLOCK_STOP",20:"SQS",21:"SQE",22:"title",23:"title_value",24:"acc_title",25:"acc_title_value",26:"acc_descr",27:"acc_descr_value",28:"acc_descr_multiline_value",33:"direction_tb",34:"direction_bt",35:"direction_rl",36:"direction_lr",37:"CLASSDEF",40:"UNICODE_TEXT",41:"STYLE_TEXT",42:"COMMA",43:"CLASS",44:"STYLE",47:"SEMI",48:"NUM",49:"BRKT",50:"ENTITY_NAME",56:"ATTRIBUTE_WORD",58:",",59:"ATTRIBUTE_KEY",60:"COMMENT",63:"ZERO_OR_ONE",64:"ZERO_OR_MORE",65:"ONE_OR_MORE",66:"ONLY_ONE",67:"MD_PARENT",68:"NON_IDENTIFYING",69:"IDENTIFYING",70:"WORD"},productions_:[0,[3,3],[5,0],[5,2],[7,2],[7,1],[7,1],[7,1],[9,5],[9,9],[9,7],[9,7],[9,4],[9,6],[9,3],[9,5],[9,1],[9,3],[9,7],[9,9],[9,6],[9,8],[9,4],[9,6],[9,2],[9,2],[9,2],[9,1],[9,1],[9,1],[9,1],[9,1],[29,1],[29,1],[29,1],[29,1],[30,4],[16,1],[16,1],[16,3],[16,3],[31,3],[32,4],[38,1],[38,3],[45,1],[45,2],[39,1],[39,1],[39,1],[46,1],[46,1],[46,1],[46,1],[11,1],[11,1],[18,1],[18,2],[51,2],[51,3],[51,3],[51,4],[52,1],[53,1],[54,1],[54,3],[57,1],[55,1],[12,3],[61,1],[61,1],[61,1],[61,1],[61,1],[62,1],[62,1],[14,1],[14,1],[14,1]],performAction:s(function e(t,s,n,i,a,r,c){var o=r.length-1;switch(a){case 1:break;case 2:this.$=[];break;case 3:r[o-1].push(r[o]);this.$=r[o-1];break;case 4:case 5:this.$=r[o];break;case 6:case 7:this.$=[];break;case 8:i.addEntity(r[o-4]);i.addEntity(r[o-2]);i.addRelationship(r[o-4],r[o],r[o-2],r[o-3]);break;case 9:i.addEntity(r[o-8]);i.addEntity(r[o-4]);i.addRelationship(r[o-8],r[o],r[o-4],r[o-5]);i.setClass([r[o-8]],r[o-6]);i.setClass([r[o-4]],r[o-2]);break;case 10:i.addEntity(r[o-6]);i.addEntity(r[o-2]);i.addRelationship(r[o-6],r[o],r[o-2],r[o-3]);i.setClass([r[o-6]],r[o-4]);break;case 11:i.addEntity(r[o-6]);i.addEntity(r[o-4]);i.addRelationship(r[o-6],r[o],r[o-4],r[o-5]);i.setClass([r[o-4]],r[o-2]);break;case 12:i.addEntity(r[o-3]);i.addAttributes(r[o-3],r[o-1]);break;case 13:i.addEntity(r[o-5]);i.addAttributes(r[o-5],r[o-1]);i.setClass([r[o-5]],r[o-3]);break;case 14:i.addEntity(r[o-2]);break;case 15:i.addEntity(r[o-4]);i.setClass([r[o-4]],r[o-2]);break;case 16:i.addEntity(r[o]);break;case 17:i.addEntity(r[o-2]);i.setClass([r[o-2]],r[o]);break;case 18:i.addEntity(r[o-6],r[o-4]);i.addAttributes(r[o-6],r[o-1]);break;case 19:i.addEntity(r[o-8],r[o-6]);i.addAttributes(r[o-8],r[o-1]);i.setClass([r[o-8]],r[o-3]);break;case 20:i.addEntity(r[o-5],r[o-3]);break;case 21:i.addEntity(r[o-7],r[o-5]);i.setClass([r[o-7]],r[o-2]);break;case 22:i.addEntity(r[o-3],r[o-1]);break;case 23:i.addEntity(r[o-5],r[o-3]);i.setClass([r[o-5]],r[o]);break;case 24:case 25:this.$=r[o].trim();i.setAccTitle(this.$);break;case 26:case 27:this.$=r[o].trim();i.setAccDescription(this.$);break;case 32:i.setDirection("TB");break;case 33:i.setDirection("BT");break;case 34:i.setDirection("RL");break;case 35:i.setDirection("LR");break;case 36:this.$=r[o-3];i.addClass(r[o-2],r[o-1]);break;case 37:case 38:case 56:case 64:this.$=[r[o]];break;case 39:case 40:this.$=r[o-2].concat([r[o]]);break;case 41:this.$=r[o-2];i.setClass(r[o-1],r[o]);break;case 42:this.$=r[o-3];i.addCssStyles(r[o-2],r[o-1]);break;case 43:this.$=[r[o]];break;case 44:r[o-2].push(r[o]);this.$=r[o-2];break;case 46:this.$=r[o-1]+r[o];break;case 54:case 76:case 77:this.$=r[o].replace(/"/g,"");break;case 55:case 78:this.$=r[o];break;case 57:r[o].push(r[o-1]);this.$=r[o];break;case 58:this.$={type:r[o-1],name:r[o]};break;case 59:this.$={type:r[o-2],name:r[o-1],keys:r[o]};break;case 60:this.$={type:r[o-2],name:r[o-1],comment:r[o]};break;case 61:this.$={type:r[o-3],name:r[o-2],keys:r[o-1],comment:r[o]};break;case 62:case 63:case 66:this.$=r[o];break;case 65:r[o-2].push(r[o]);this.$=r[o-2];break;case 67:this.$=r[o].replace(/"/g,"");break;case 68:this.$={cardA:r[o],relType:r[o-1],cardB:r[o-2]};break;case 69:this.$=i.Cardinality.ZERO_OR_ONE;break;case 70:this.$=i.Cardinality.ZERO_OR_MORE;break;case 71:this.$=i.Cardinality.ONE_OR_MORE;break;case 72:this.$=i.Cardinality.ONLY_ONE;break;case 73:this.$=i.Cardinality.MD_PARENT;break;case 74:this.$=i.Identification.NON_IDENTIFYING;break;case 75:this.$=i.Identification.IDENTIFYING;break}},"anonymous"),table:[{3:1,4:[1,2]},{1:[3]},e(t,[2,2],{5:3}),{6:[1,4],7:5,8:[1,6],9:7,10:[1,8],11:9,22:n,24:i,26:a,28:r,29:14,30:15,31:16,32:17,33:c,34:o,35:l,36:_,37:$,40:h,43:y,44:u,50:d},e(t,[2,7],{1:[2,1]}),e(t,[2,3]),{9:27,11:9,22:n,24:i,26:a,28:r,29:14,30:15,31:16,32:17,33:c,34:o,35:l,36:_,37:$,40:h,43:y,44:u,50:d},e(t,[2,5]),e(t,[2,6]),e(t,[2,16],{12:28,61:32,15:[1,29],17:[1,30],20:[1,31],63:k,64:b,65:p,66:m,67:g}),{23:[1,38]},{25:[1,39]},{27:[1,40]},e(t,[2,27]),e(t,[2,28]),e(t,[2,29]),e(t,[2,30]),e(t,[2,31]),e(V,[2,54]),e(V,[2,55]),e(t,[2,32]),e(t,[2,33]),e(t,[2,34]),e(t,[2,35]),{16:41,40:f,41:E},{16:44,40:f,41:E},{16:45,40:f,41:E},e(t,[2,4]),{11:46,40:h,50:d},{16:47,40:f,41:E},{18:48,19:[1,49],51:50,52:51,56:A},{11:53,40:h,50:d},{62:54,68:[1,55],69:[1,56]},e(v,[2,69]),e(v,[2,70]),e(v,[2,71]),e(v,[2,72]),e(v,[2,73]),e(t,[2,24]),e(t,[2,25]),e(t,[2,26]),{13:S,38:57,41:R,42:x,45:59,46:60,48:B,49:N},e(O,[2,37]),e(O,[2,38]),{16:65,40:f,41:E,42:x},{13:S,38:66,41:R,42:x,45:59,46:60,48:B,49:N},{13:[1,67],15:[1,68]},e(t,[2,17],{61:32,12:69,17:[1,70],42:x,63:k,64:b,65:p,66:m,67:g}),{19:[1,71]},e(t,[2,14]),{18:72,19:[2,56],51:50,52:51,56:A},{53:73,56:[1,74]},{56:[2,62]},{21:[1,75]},{61:76,63:k,64:b,65:p,66:m,67:g},e(T,[2,74]),e(T,[2,75]),{6:D,10:C,39:77,42:F,47:I},{40:[1,82],41:[1,83]},e(J,[2,43],{46:84,13:S,41:R,48:B,49:N}),e(L,[2,45]),e(L,[2,50]),e(L,[2,51]),e(L,[2,52]),e(L,[2,53]),e(t,[2,41],{42:x}),{6:D,10:C,39:85,42:F,47:I},{14:86,40:G,50:w,70:Y},{16:90,40:f,41:E},{11:91,40:h,50:d},{18:92,19:[1,93],51:50,52:51,56:A},e(t,[2,12]),{19:[2,57]},e(H,[2,58],{54:94,55:95,57:96,59:M,60:P}),e([19,56,59,60],[2,63]),e(t,[2,22],{15:[1,100],17:[1,99]}),e([40,50],[2,68]),e(t,[2,36]),{13:S,41:R,45:101,46:60,48:B,49:N},e(t,[2,47]),e(t,[2,48]),e(t,[2,49]),e(O,[2,39]),e(O,[2,40]),e(L,[2,46]),e(t,[2,42]),e(t,[2,8]),e(t,[2,76]),e(t,[2,77]),e(t,[2,78]),{13:[1,102],42:x},{13:[1,104],15:[1,103]},{19:[1,105]},e(t,[2,15]),e(H,[2,59],{55:106,58:[1,107],60:P}),e(H,[2,60]),e(K,[2,64]),e(H,[2,67]),e(K,[2,66]),{18:108,19:[1,109],51:50,52:51,56:A},{16:110,40:f,41:E},e(J,[2,44],{46:84,13:S,41:R,48:B,49:N}),{14:111,40:G,50:w,70:Y},{16:112,40:f,41:E},{14:113,40:G,50:w,70:Y},e(t,[2,13]),e(H,[2,61]),{57:114,59:M},{19:[1,115]},e(t,[2,20]),e(t,[2,23],{17:[1,116],42:x}),e(t,[2,11]),{13:[1,117],42:x},e(t,[2,10]),e(K,[2,65]),e(t,[2,18]),{18:118,19:[1,119],51:50,52:51,56:A},{14:120,40:G,50:w,70:Y},{19:[1,121]},e(t,[2,21]),e(t,[2,9]),e(t,[2,19])],defaultActions:{52:[2,62],72:[2,57]},parseError:s(function e(t,s){if(s.recoverable){this.trace(t)}else{var n=new Error(t);n.hash=s;throw n}},"parseError"),parse:s(function e(t){var n=this,i=[0],a=[],r=[null],c=[],o=this.table,l="",_=0,$=0,h=0,y=2,u=1;var d=c.slice.call(arguments,1);var k=Object.create(this.lexer);var b={yy:{}};for(var p in this.yy){Object.prototype.hasOwnProperty.call(this.yy,p)&&(b.yy[p]=this.yy[p])}k.setInput(t,b.yy);b.yy.lexer=k;b.yy.parser=this;typeof k.yylloc=="undefined"&&(k.yylloc={});var m=k.yylloc;c.push(m);var g=k.options&&k.options.ranges;if(typeof b.yy.parseError==="function"){this.parseError=b.yy.parseError}else{this.parseError=Object.getPrototypeOf(this).parseError}function V(e){i.length=i.length-2*e;r.length=r.length-e;c.length=c.length-e}s(V,"popStack");function f(){var e;e=a.pop()||k.lex()||u;if(typeof e!=="number"){if(e instanceof Array){a=e;e=a.pop()}e=n.symbols_[e]||e}return e}s(f,"lex");var E,A,v,S,R,x={},B,N,O,T;while(!0){v=i[i.length-1];if(this.defaultActions[v]){S=this.defaultActions[v]}else{(E===null||typeof E=="undefined")&&(E=f());S=o[v]&&o[v][E]}if(typeof S==="undefined"||!S.length||!S[0]){var D="";T=[];for(B in o[v]){this.terminals_[B]&&B>y&&T.push("'"+this.terminals_[B]+"'")}if(k.showPosition){D="Parse error on line "+(_+1)+":\n"+k.showPosition()+"\nExpecting "+T.join(", ")+", got '"+(this.terminals_[E]||E)+"'"}else{D="Parse error on line "+(_+1)+": Unexpected "+(E==u?"end of input":"'"+(this.terminals_[E]||E)+"'")}this.parseError(D,{text:k.match,token:this.terminals_[E]||E,line:k.yylineno,loc:m,expected:T})}if(S[0]instanceof Array&&S.length>1){throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+E)}switch(S[0]){case 1:i.push(E);r.push(k.yytext);c.push(k.yylloc);i.push(S[1]);E=null;if(!A){$=k.yyleng;l=k.yytext;_=k.yylineno;m=k.yylloc;h>0&&h--}else{E=A;A=null}break;case 2:N=this.productions_[S[1]][1];x.$=r[r.length-N];x._$={first_line:c[c.length-(N||1)].first_line,last_line:c[c.length-1].last_line,first_column:c[c.length-(N||1)].first_column,last_column:c[c.length-1].last_column};g&&(x._$.range=[c[c.length-(N||1)].range[0],c[c.length-1].range[1]]);R=this.performAction.apply(x,[l,$,_,b.yy,S[1],r,c].concat(d));if(typeof R!=="undefined"){return R}if(N){i=i.slice(0,-1*N*2);r=r.slice(0,-1*N);c=c.slice(0,-1*N)}i.push(this.productions_[S[1]][0]);r.push(x.$);c.push(x._$);O=o[i[i.length-2]][i[i.length-1]];i.push(O);break;case 3:return!0}}return!0},"parse")};var z=function(){var e={EOF:1,parseError:s(function e(t,s){if(this.yy.parser){this.yy.parser.parseError(t,s)}else{throw new Error(t)}},"parseError"),setInput:s(function(e,t){this.yy=t||this.yy||{};this._input=e;this._more=this._backtrack=this.done=!1;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};this.options.ranges&&(this.yylloc.range=[0,0]);this.offset=0;return this},"setInput"),input:s(function(){var e=this._input[0];this.yytext+=e;this.yyleng++;this.offset++;this.match+=e;this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);if(t){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);return e},"input"),unput:s(function(e){var t=e.length;var s=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-t);this.offset-=t;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);s.length-1&&(this.yylineno-=s.length-1);var i=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:s?(s.length===n.length?this.yylloc.first_column:0)+n[n.length-s.length].length-s[0].length:this.yylloc.first_column-t};this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]);this.yyleng=this.yytext.length;return this},"unput"),more:s(function(){this._more=!0;return this},"more"),reject:s(function(){if(this.options.backtrack_lexer){this._backtrack=!0}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}return this},"reject"),less:s(function(e){this.unput(this.match.slice(e))},"less"),pastInput:s(function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:s(function(){var e=this.match;e.length<20&&(e+=this._input.substr(0,20-e.length));return(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:s(function(){var e=this.pastInput();var t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},"showPosition"),test_match:s(function(e,t){var s,n,i;if(this.options.backtrack_lexer){i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done};this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))}n=e[0].match(/(?:\r\n?|\n).*/g);n&&(this.yylineno+=n.length);this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length};this.yytext+=e[0];this.match+=e[0];this.matches=e;this.yyleng=this.yytext.length;this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]);this._more=!1;this._backtrack=!1;this._input=this._input.slice(e[0].length);this.matched+=e[0];s=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]);this.done&&this._input&&(this.done=!1);if(s){return s}else if(this._backtrack){for(var a in i){this[a]=i[a]}return!1}return!1},"test_match"),next:s(function(){if(this.done){return this.EOF}this._input||(this.done=!0);var e,t,s,n;if(!this._more){this.yytext="";this.match=""}var i=this._currentRules();for(var a=0;a<i.length;a++){s=this._input.match(this.rules[i[a]]);if(s&&(!t||s[0].length>t[0].length)){t=s;n=a;if(this.options.backtrack_lexer){e=this.test_match(s,i[a]);if(e!==!1){return e}else if(this._backtrack){t=!1;continue}else{return!1}}else if(!this.options.flex){break}}}if(t){e=this.test_match(t,i[n]);if(e!==!1){return e}return!1}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},"next"),lex:s(function e(){var t=this.next();if(t){return t}else{return this.lex()}},"lex"),begin:s(function e(t){this.conditionStack.push(t)},"begin"),popState:s(function e(){var t=this.conditionStack.length-1;if(t>0){return this.conditionStack.pop()}else{return this.conditionStack[0]}},"popState"),_currentRules:s(function e(){if(this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}else{return this.conditions["INITIAL"].rules}},"_currentRules"),topState:s(function e(t){t=this.conditionStack.length-1-Math.abs(t||0);if(t>=0){return this.conditionStack[t]}else{return"INITIAL"}},"topState"),pushState:s(function e(t){this.begin(t)},"pushState"),stateStackSize:s(function e(){return this.conditionStack.length},"stateStackSize"),options:{"case-insensitive":!0},performAction:s(function e(t,s,n,i){switch(n){case 0:this.begin("acc_title");return 24;break;case 1:this.popState();return"acc_title_value";break;case 2:this.begin("acc_descr");return 26;break;case 3:this.popState();return"acc_descr_value";break;case 4:this.begin("acc_descr_multiline");break;case 5:this.popState();break;case 6:return"acc_descr_multiline_value";break;case 7:return 33;break;case 8:return 34;break;case 9:return 35;break;case 10:return 36;break;case 11:return 10;break;case 12:break;case 13:return 8;break;case 14:return 50;break;case 15:return 70;break;case 16:return 4;break;case 17:this.begin("block");return 17;break;case 18:return 49;break;case 19:return 49;break;case 20:return 42;break;case 21:return 15;break;case 22:return 13;break;case 23:break;case 24:return 59;break;case 25:return 56;break;case 26:return 56;break;case 27:return 60;break;case 28:break;case 29:this.popState();return 19;break;case 30:return s.yytext[0];break;case 31:return 20;break;case 32:return 21;break;case 33:this.begin("style");return 44;break;case 34:this.popState();return 10;break;case 35:break;case 36:return 13;break;case 37:return 42;break;case 38:return 49;break;case 39:this.begin("style");return 37;break;case 40:return 43;break;case 41:return 63;break;case 42:return 65;break;case 43:return 65;break;case 44:return 65;break;case 45:return 63;break;case 46:return 63;break;case 47:return 64;break;case 48:return 64;break;case 49:return 64;break;case 50:return 64;break;case 51:return 64;break;case 52:return 65;break;case 53:return 64;break;case 54:return 65;break;case 55:return 66;break;case 56:return 66;break;case 57:return 66;break;case 58:return 66;break;case 59:return 63;break;case 60:return 64;break;case 61:return 65;break;case 62:return 67;break;case 63:return 68;break;case 64:return 69;break;case 65:return 69;break;case 66:return 68;break;case 67:return 68;break;case 68:return 68;break;case 69:return 41;break;case 70:return 47;break;case 71:return 40;break;case 72:return 48;break;case 73:return s.yytext[0];break;case 74:return 6;break}},"anonymous"),rules:[/^(?:accTitle\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*:\s*)/i,/^(?:(?!\n||)*[^\n]*)/i,/^(?:accDescr\s*\{\s*)/i,/^(?:[\}])/i,/^(?:[^\}]*)/i,/^(?:.*direction\s+TB[^\n]*)/i,/^(?:.*direction\s+BT[^\n]*)/i,/^(?:.*direction\s+RL[^\n]*)/i,/^(?:.*direction\s+LR[^\n]*)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?:[\s]+)/i,/^(?:"[^"%\r\n\v\b\\]+")/i,/^(?:"[^"]*")/i,/^(?:erDiagram\b)/i,/^(?:\{)/i,/^(?:#)/i,/^(?:#)/i,/^(?:,)/i,/^(?::::)/i,/^(?::)/i,/^(?:\s+)/i,/^(?:\b((?:PK)|(?:FK)|(?:UK))\b)/i,/^(?:([^\s]*)[~].*[~]([^\s]*))/i,/^(?:([\*A-Za-z_\u00C0-\uFFFF][A-Za-z0-9\-\_\[\]\(\)\u00C0-\uFFFF\*]*))/i,/^(?:"[^"]*")/i,/^(?:[\n]+)/i,/^(?:\})/i,/^(?:.)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:style\b)/i,/^(?:[\n]+)/i,/^(?:\s+)/i,/^(?::)/i,/^(?:,)/i,/^(?:#)/i,/^(?:classDef\b)/i,/^(?:class\b)/i,/^(?:one or zero\b)/i,/^(?:one or more\b)/i,/^(?:one or many\b)/i,/^(?:1\+)/i,/^(?:\|o\b)/i,/^(?:zero or one\b)/i,/^(?:zero or more\b)/i,/^(?:zero or many\b)/i,/^(?:0\+)/i,/^(?:\}o\b)/i,/^(?:many\(0\))/i,/^(?:many\(1\))/i,/^(?:many\b)/i,/^(?:\}\|)/i,/^(?:one\b)/i,/^(?:only one\b)/i,/^(?:1\b)/i,/^(?:\|\|)/i,/^(?:o\|)/i,/^(?:o\{)/i,/^(?:\|\{)/i,/^(?:\s*u\b)/i,/^(?:\.\.)/i,/^(?:--)/i,/^(?:to\b)/i,/^(?:optionally to\b)/i,/^(?:\.-)/i,/^(?:-\.)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:;)/i,/^(?:([^\x00-\x7F]|\w|-|\*)+)/i,/^(?:[0-9])/i,/^(?:.)/i,/^(?:$)/i],conditions:{style:{rules:[34,35,36,37,38,69,70],inclusive:!1},acc_descr_multiline:{rules:[5,6],inclusive:!1},acc_descr:{rules:[3],inclusive:!1},acc_title:{rules:[1],inclusive:!1},block:{rules:[23,24,25,26,27,28,29,30],inclusive:!1},INITIAL:{rules:[0,2,4,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,31,32,33,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,71,72,73,74],inclusive:!0}}};return e}();Z.lexer=z;function U(){this.yy={}}s(U,"Parser");U.prototype=Z;Z.Parser=U;return new U}();E.parser=E;var A=(f=class{constructor(){this.entities=new Map;this.relationships=[];this.classes=new Map;this.direction="TB";this.Cardinality={ZERO_OR_ONE:"ZERO_OR_ONE",ZERO_OR_MORE:"ZERO_OR_MORE",ONE_OR_MORE:"ONE_OR_MORE",ONLY_ONE:"ONLY_ONE",MD_PARENT:"MD_PARENT"};this.Identification={NON_IDENTIFYING:"NON_IDENTIFYING",IDENTIFYING:"IDENTIFYING"};this.setAccTitle=n;this.getAccTitle=i;this.setAccDescription=a;this.getAccDescription=r;this.setDiagramTitle=c;this.getDiagramTitle=o;this.getConfig=s(()=>l().er,"getConfig");this.clear();this.addEntity=this.addEntity.bind(this);this.addAttributes=this.addAttributes.bind(this);this.addRelationship=this.addRelationship.bind(this);this.setDirection=this.setDirection.bind(this);this.addCssStyles=this.addCssStyles.bind(this);this.addClass=this.addClass.bind(this);this.setClass=this.setClass.bind(this);this.setAccTitle=this.setAccTitle.bind(this);this.setAccDescription=this.setAccDescription.bind(this)}addEntity(e,t=""){var s,n;if(!this.entities.has(e)){this.entities.set(e,{id:`entity-${e}-${this.entities.size}`,label:e,attributes:[],alias:t,shape:"erBox",look:(s=l().look)!==null&&s!==void 0?s:"default",cssClasses:"default",cssStyles:[]});_.info("Added new entity :",e)}else if(!((n=this.entities.get(e))===null||n===void 0?void 0:n.alias)&&t){this.entities.get(e).alias=t;_.info(`Add alias '${t}' to entity '${e}'`)}return this.entities.get(e)}getEntity(e){return this.entities.get(e)}getEntities(){return this.entities}getClasses(){return this.classes}addAttributes(e,t){const s=this.addEntity(e);let n;for(n=t.length-1;n>=0;n--){if(!t[n].keys){t[n].keys=[]}if(!t[n].comment){t[n].comment=""}s.attributes.push(t[n]);_.debug("Added attribute ",t[n].name)}}addRelationship(e,t,s,n){const i=this.entities.get(e);const a=this.entities.get(s);if(!i||!a){return}const r={entityA:i.id,roleA:t,entityB:a.id,relSpec:n};this.relationships.push(r);_.debug("Added new relationship :",r)}getRelationships(){return this.relationships}getDirection(){return this.direction}setDirection(e){this.direction=e}getCompiledStyles(e){var t,s;let n=[];for(const i of e){const e=this.classes.get(i);if(e===null||e===void 0?void 0:e.styles){n=[...n,...(t=e.styles)!==null&&t!==void 0?t:[]].map(e=>e.trim())}if(e===null||e===void 0?void 0:e.textStyles){n=[...n,...(s=e.textStyles)!==null&&s!==void 0?s:[]].map(e=>e.trim())}}return n}addCssStyles(e,t){for(const s of e){const e=this.entities.get(s);if(!t||!e){return}for(const s of t){e.cssStyles.push(s)}}}addClass(e,t){e.forEach(e=>{let s=this.classes.get(e);if(s===void 0){s={id:e,styles:[],textStyles:[]};this.classes.set(e,s)}if(t){t.forEach(function(e){if(/color/.exec(e)){const t=e.replace("fill","bgFill");s.textStyles.push(t)}s.styles.push(e)})}})}setClass(e,t){for(const s of e){const e=this.entities.get(s);if(e){for(const s of t){e.cssClasses+=" "+s}}}}clear(){this.entities=new Map;this.classes=new Map;this.relationships=[];$()}getData(){const e=[];const t=[];const s=l();for(const t of this.entities.keys()){const s=this.entities.get(t);if(s){s.cssCompiledStyles=this.getCompiledStyles(s.cssClasses.split(" "));e.push(s)}}let n=0;for(const e of this.relationships){const i={id:h(e.entityA,e.entityB,{prefix:"id",counter:n++}),type:"normal",curve:"basis",start:e.entityA,end:e.entityB,label:e.roleA,labelpos:"c",thickness:"normal",classes:"relationshipLine",arrowTypeStart:e.relSpec.cardB.toLowerCase(),arrowTypeEnd:e.relSpec.cardA.toLowerCase(),pattern:e.relSpec.relType=="IDENTIFYING"?"solid":"dashed",look:s.look};t.push(i)}return{nodes:e,edges:t,other:{},config:s,direction:"TB"}}},t(f,"ErDB"),(()=>{s(f,"ErDB")})(),f);var v={};y(v,{draw:()=>S});var S=s(async function(e,t,s,n){var i,a;_.info("REF0:");_.info("Drawing er diagram (unified)",t);const{securityLevel:r,er:c,layout:o}=l();const $=n.db.getData();const h=u(t,r);$.type=n.type;$.layoutAlgorithm=d(o);$.config.flowchart.nodeSpacing=(c===null||c===void 0?void 0:c.nodeSpacing)||140;$.config.flowchart.rankSpacing=(c===null||c===void 0?void 0:c.rankSpacing)||80;$.direction=n.db.getDirection();$.markers=["only_one","zero_or_one","one_or_more","zero_or_more"];$.diagramId=t;await k($,h);$.layoutAlgorithm==="elk"&&h.select(".edges").lower();const y=h.selectAll('[id*="-background"]');Array.from(y).length>0&&y.each(function(){const e=b(this);const t=e.attr("id");const s=t.replace("-background","");const n=h.select(`#${CSS.escape(s)}`);if(!n.empty()){let t=n.attr("transform");e.attr("transform",t)}});const g=8;p.insertTitle(h,"erDiagramTitleText",(i=c===null||c===void 0?void 0:c.titleTopMargin)!==null&&i!==void 0?i:25,n.db.getDiagramTitle());m(h,g,"erDiagram",(a=c===null||c===void 0?void 0:c.useMaxWidth)!==null&&a!==void 0?a:!0)},"draw");var R=s((e,t)=>{const s=g(e,"r");const n=g(e,"g");const i=g(e,"b");return V(s,n,i,t)},"fade");var x=s(e=>`\n  .entityBox {\n    fill: ${e.mainBkg};\n    stroke: ${e.nodeBorder};\n  }\n\n  .relationshipLabelBox {\n    fill: ${e.tertiaryColor};\n    opacity: 0.7;\n    background-color: ${e.tertiaryColor};\n      rect {\n        opacity: 0.5;\n      }\n  }\n\n  .labelBkg {\n    background-color: ${R(e.tertiaryColor,.5)};\n  }\n\n  .edgeLabel .label {\n    fill: ${e.nodeBorder};\n    font-size: 14px;\n  }\n\n  .label {\n    font-family: ${e.fontFamily};\n    color: ${e.nodeTextColor||e.textColor};\n  }\n\n  .edge-pattern-dashed {\n    stroke-dasharray: 8,8;\n  }\n\n  .node rect,\n  .node circle,\n  .node ellipse,\n  .node polygon\n  {\n    fill: ${e.mainBkg};\n    stroke: ${e.nodeBorder};\n    stroke-width: 1px;\n  }\n\n  .relationshipLine {\n    stroke: ${e.lineColor};\n    stroke-width: 1;\n    fill: none;\n  }\n\n  .marker {\n    fill: none !important;\n    stroke: ${e.lineColor} !important;\n    stroke-width: 1;\n  }\n`,"getStyles");var B={parser:E,get db(){return new A},renderer:v,styles:x};var N={diagram:B};__bbb.o=N}).call(this)