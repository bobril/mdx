(function(e){"use strict";var t=function(e){if(!("default"in e))return e;var t=e.default;if(typeof t==="object"||typeof t==="function"){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&r!=="default"&&(t[r]=e[r])}return t};var r=function(e,t,r){typeof t==="symbol"&&(t=t.description?"[".concat(t.description,"]"):"");return Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})};var n=function(t,r){var n=__bbb;var o=__bbb[r];if(o!==e){if(o instanceof Promise)return o;return Promise.resolve(o)}o=new Promise(function(a,i){var s=document.createElement("script");var l=setTimeout(c,12e4);function c(){s.onload=s.onerror=e;clearTimeout(l);if(__bbb[r]===o){n[r]=e;i(new Error("Fail to load "+t))}else a(__bbb[r])}s.charset="utf-8";s.onload=s.onerror=c;s.src=t;document.head.appendChild(s)});return __bbb[r]=o};var o=__bbb.Lc;var a=__bbb.nb;var i=__bbb.Mc;var s=__bbb.Nc;var l=__bbb.mb;var c=__bbb.Oc;var u=__bbb.Pc;var d=__bbb.Qc;var p=__bbb.Rc;var m=__bbb.Sc;var f=__bbb.Tc;var h=__bbb.lb;var _=__bbb.Cb;var g=__bbb.Bb;var y=__bbb.$;var x=__bbb.Lb;var T=__bbb.Uc;var k=__bbb.Ya;var v=__bbb.sb;var R=__bbb.Vc;var A=__bbb.ub;var I=__bbb.Db;var C=__bbb.fb;var E=__bbb.zb;var S=__bbb.Wc;var N=__bbb.Xc;var P=__bbb.Yc;var b=__bbb.qa;var O=__bbb.eb;var L=__bbb.ba;var w=__bbb.Zc;var D=__bbb.Gb;var $=__bbb.$c;var M=__bbb._c;var F=__bbb.ad;var G=__bbb._;__bbb.bd;var U=__bbb.tb;var K=__bbb.cd;function V(e){return typeof e==="object"&&e!==null&&typeof e.$type==="string"}function B(e){return typeof e==="object"&&e!==null&&typeof e.$refText==="string"}function j(e){return typeof e==="object"&&e!==null&&typeof e.name==="string"&&typeof e.type==="string"&&typeof e.path==="string"}function W(e){return typeof e==="object"&&e!==null&&V(e.container)&&B(e.reference)&&typeof e.message==="string"}class AbstractAstReflection{constructor(){this.subtypes={};this.allSubtypes={}}isInstance(e,t){return V(e)&&this.isSubtype(e.$type,t)}isSubtype(t,r){if(t===r){return!0}let n=this.subtypes[t];n||(n=this.subtypes[t]={});const o=n[r];if(o!==e){return o}else{let e=this.computeIsSubtype(t,r);n[r]=e;return e}}getAllSubTypes(e){const t=this.allSubtypes[e];if(t){return t}else{let t=this.getAllTypes(),r=[];for(const n of t){this.isSubtype(n,e)&&r.push(n)}this.allSubtypes[e]=r;return r}}}function z(e){return typeof e==="object"&&e!==null&&Array.isArray(e.content)}function H(e){return typeof e==="object"&&e!==null&&typeof e.tokenType==="object"}function X(e){return z(e)&&typeof e.fullText==="string"}var Y;var q={};class StreamImpl{constructor(e,t){this.startFn=e;this.nextFn=t}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),[Symbol.iterator]:()=>e};return e}[Symbol.iterator](){return this.iterator()}isEmpty(){const e=this.iterator();return Boolean(e.next().done)}count(){const e=this.iterator();let t=0;let r=e.next();while(!r.done){t++;r=e.next()}return t}toArray(){const t=[];const r=this.iterator();let n;do{n=r.next();n.value!==e&&t.push(n.value)}while(!n.done);return t}toSet(){return new Set(this)}toMap(e,t){const r=this.map(r=>[e?e(r):r,t?t(r):r]);return new Map(r)}toString(){return this.join()}concat(e){return new StreamImpl(()=>({first:this.startFn(),firstDone:!1,iterator:e[Symbol.iterator]()}),e=>{let t;if(!e.firstDone){do{t=this.nextFn(e.first);if(!t.done){return t}}while(!t.done);e.firstDone=!0}do{t=e.iterator.next();if(!t.done){return t}}while(!t.done);return Y})}join(e=","){const t=this.iterator();let r="";let n;let o=!1;do{n=t.next();if(!n.done){o&&(r+=e);r+=Z(n.value)}o=!0}while(!n.done);return r}indexOf(e,t=0){const r=this.iterator();let n=0;let o=r.next();while(!o.done){if(n>=t&&o.value===e){return n}o=r.next();n++}return-1}every(e){const t=this.iterator();let r=t.next();while(!r.done){if(!e(r.value)){return!1}r=t.next()}return!0}some(e){const t=this.iterator();let r=t.next();while(!r.done){if(e(r.value)){return!0}r=t.next()}return!1}forEach(e){const t=this.iterator();let r=0;let n=t.next();while(!n.done){e(n.value,r);n=t.next();r++}}map(e){return new StreamImpl(this.startFn,t=>{const{done:r,value:n}=this.nextFn(t);if(r){return Y}else{return{done:!1,value:e(n)}}})}filter(e){return new StreamImpl(this.startFn,t=>{let r;do{r=this.nextFn(t);if(!r.done&&e(r.value)){return r}}while(!r.done);return Y})}nonNullable(){return this.filter(t=>t!==e&&t!==null)}reduce(t,r){const n=this.iterator();let o=r;let a=n.next();while(!a.done){if(o===e){o=a.value}else{o=t(o,a.value)}a=n.next()}return o}reduceRight(e,t){return this.recursiveReduce(this.iterator(),e,t)}recursiveReduce(t,r,n){const o=t.next();if(o.done){return n}const a=this.recursiveReduce(t,r,n);if(a===e){return o.value}return r(a,o.value)}find(t){const r=this.iterator();let n=r.next();while(!n.done){if(t(n.value)){return n.value}n=r.next()}return e}findIndex(e){const t=this.iterator();let r=0;let n=t.next();while(!n.done){if(e(n.value)){return r}n=t.next();r++}return-1}includes(e){const t=this.iterator();let r=t.next();while(!r.done){if(r.value===e){return!0}r=t.next()}return!1}flatMap(t){return new StreamImpl(()=>({this:this.startFn()}),r=>{do{if(r.iterator){let t=r.iterator.next();if(t.done){r.iterator=e}else{return t}}let{done:n,value:o}=this.nextFn(r.this);if(!n){let e=t(o);if(J(e)){r.iterator=e[Symbol.iterator]()}else{return{done:!1,value:e}}}}while(r.iterator);return Y})}flat(t){t===e&&(t=1);if(t<=0){return this}const r=t>1?this.flat(t-1):this;return new StreamImpl(()=>({this:r.startFn()}),t=>{do{if(t.iterator){let r=t.iterator.next();if(r.done){t.iterator=e}else{return r}}let{done:n,value:o}=r.nextFn(t.this);if(!n){if(J(o)){t.iterator=o[Symbol.iterator]()}else{return{done:!1,value:o}}}}while(t.iterator);return Y})}head(){const t=this.iterator();const r=t.next();if(r.done){return e}return r.value}tail(e=1){return new StreamImpl(()=>{const t=this.startFn();for(let r=0;r<e;r++){let e=this.nextFn(t);if(e.done){return t}}return t},this.nextFn)}limit(e){return new StreamImpl(()=>({size:0,state:this.startFn()}),t=>{t.size++;if(t.size>e){return Y}return this.nextFn(t.state)})}distinct(e){return new StreamImpl(()=>({set:new Set,internalState:this.startFn()}),t=>{let r;do{r=this.nextFn(t.internalState);if(!r.done){let n=e?e(r.value):r.value;if(!t.set.has(n)){t.set.add(n);return r}}}while(!r.done);return Y})}exclude(e,t){const r=new Set;for(const n of e){let e=t?t(n):n;r.add(e)}return this.filter(e=>{const n=t?t(e):e;return!r.has(n)})}}function Z(e){if(typeof e==="string"){return e}if(typeof e==="undefined"){return"undefined"}if(typeof e.toString==="function"){return e.toString()}return Object.prototype.toString.call(e)}function J(e){return!!e&&typeof e[Symbol.iterator]==="function"}var Q=new StreamImpl(()=>e,()=>Y);Y=Object.freeze({done:!0,value:e});function ee(...t){if(t.length===1){let e=t[0];if(e instanceof StreamImpl){return e}if(J(e)){return new StreamImpl(()=>e[Symbol.iterator](),e=>e.next())}if(typeof e.length==="number"){return new StreamImpl(()=>({index:0}),t=>{if(t.index<e.length){return{done:!1,value:e[t.index++]}}else{return Y}})}}if(t.length>1){return new StreamImpl(()=>({collIndex:0,arrIndex:0}),r=>{do{if(r.iterator){let t=r.iterator.next();if(!t.done){return t}r.iterator=e}if(r.array){if(r.arrIndex<r.array.length){return{done:!1,value:r.array[r.arrIndex++]}}r.array=e;r.arrIndex=0}if(r.collIndex<t.length){let e=t[r.collIndex++];if(J(e)){r.iterator=e[Symbol.iterator]()}else e&&typeof e.length==="number"&&(r.array=e)}}while(r.iterator||r.array||r.collIndex<t.length);return Y})}return Q}class TreeStreamImpl extends StreamImpl{constructor(e,t,r){super(()=>({iterators:(r===null||r===void 0?void 0:r.includeRoot)?[[e][Symbol.iterator]()]:[t(e)[Symbol.iterator]()],pruned:!1}),e=>{if(e.pruned){e.iterators.pop();e.pruned=!1}while(e.iterators.length>0){let r=e.iterators[e.iterators.length-1],n=r.next();if(n.done){e.iterators.pop()}else{e.iterators.push(t(n.value)[Symbol.iterator]());return n}}return Y})}iterator(){const e={state:this.startFn(),next:()=>this.nextFn(e.state),prune:()=>{e.state.pruned=!0},[Symbol.iterator]:()=>e};return e}}(function(e){function t(e){return e.reduce((e,t)=>e+t,0)}e.sum=t;function r(e){return e.reduce((e,t)=>e*t,0)}e.product=r;function n(e){return e.reduce((e,t)=>Math.min(e,t))}e.min=n;function o(e){return e.reduce((e,t)=>Math.max(e,t))}e.max=o})(q);function te(e){return new TreeStreamImpl(e,e=>{if(z(e)){return e.content}else{return[]}},{includeRoot:!0})}function re(e,t){while(e.container){e=e.container;if(e===t){return!0}}return!1}function ne(e){return{start:{character:e.startColumn-1,line:e.startLine-1},end:{character:e.endColumn,line:e.endLine-1}}}function oe(t){if(!t){return e}const{offset:r,end:n,range:o}=t;return{range:o,offset:r,end:n,length:n-r}}function ae(e,t){if(e.end.line<t.start.line||e.end.line===t.start.line&&e.end.character<=t.start.character){return 0}else if(e.start.line>t.end.line||e.start.line===t.end.line&&e.start.character>=t.end.character){return 1}const r=e.start.line>t.start.line||e.start.line===t.start.line&&e.start.character>=t.start.character;const n=e.end.line<t.end.line||e.end.line===t.end.line&&e.end.character<=t.end.character;if(r&&n){return 4}else if(r){return 3}else if(n){return 2}else{return 5}}function ie(e,t){const r=ae(e,t);return r>1}var se=/^[\w\p{L}]$/u;function le(t,r){if(t){let e=ue(t,!0);if(e&&ce(e,r)){return e}if(X(t)){let e=t.content.findIndex(e=>!e.hidden);for(let n=e-1;n>=0;n--){let e=t.content[n];if(ce(e,r)){return e}}}}return e}function ce(e,t){return H(e)&&t.includes(e.tokenType.name)}function ue(t,r=!0){while(t.container){let e=t.container,n=e.content.indexOf(t);while(n>0){n--;let t=e.content[n];if(r||!t.hidden){return t}}t=e}return e}class ErrorWithLocation extends Error{constructor(e,t){super(e?`${t} at ${e.range.start.line}:${e.range.start.character}`:t)}}function de(e){throw new Error("Error! The input value was not handled.")}var pe;var me="AbstractRule";var fe="AbstractType";var he="Condition";var _e="TypeDefinition";var ge="ValueLiteral";var ye="AbstractElement";function xe(e){return pe.isInstance(e,ye)}var Te="ArrayLiteral";var ke="ArrayType";var ve="BooleanLiteral";function Re(e){return pe.isInstance(e,ve)}var Ae="Conjunction";function Ie(e){return pe.isInstance(e,Ae)}var Ce="Disjunction";function Ee(e){return pe.isInstance(e,Ce)}var Se="Grammar";var Ne="GrammarImport";var Pe="InferredType";function be(e){return pe.isInstance(e,Pe)}var Oe="Interface";function Le(e){return pe.isInstance(e,Oe)}var we="NamedArgument";var De="Negation";function $e(e){return pe.isInstance(e,De)}var Me="NumberLiteral";var Fe="Parameter";var Ge="ParameterReference";function Ue(e){return pe.isInstance(e,Ge)}var Ke="ParserRule";function Ve(e){return pe.isInstance(e,Ke)}var Be="ReferenceType";var je="ReturnType";function We(e){return pe.isInstance(e,je)}var ze="SimpleType";function He(e){return pe.isInstance(e,ze)}var Xe="StringLiteral";var Ye="TerminalRule";function qe(e){return pe.isInstance(e,Ye)}var Ze="Type";function Je(e){return pe.isInstance(e,Ze)}var Qe="TypeAttribute";var et="UnionType";var tt="Action";function rt(e){return pe.isInstance(e,tt)}var nt="Alternatives";function ot(e){return pe.isInstance(e,nt)}var at="Assignment";function it(e){return pe.isInstance(e,at)}var st="CharacterRange";function lt(e){return pe.isInstance(e,st)}var ct="CrossReference";function ut(e){return pe.isInstance(e,ct)}var dt="EndOfFile";function pt(e){return pe.isInstance(e,dt)}var mt="Group";function ft(e){return pe.isInstance(e,mt)}var ht="Keyword";function _t(e){return pe.isInstance(e,ht)}var gt="NegatedToken";function yt(e){return pe.isInstance(e,gt)}var xt="RegexToken";function Tt(e){return pe.isInstance(e,xt)}var kt="RuleCall";function vt(e){return pe.isInstance(e,kt)}var Rt="TerminalAlternatives";function At(e){return pe.isInstance(e,Rt)}var It="TerminalGroup";function Ct(e){return pe.isInstance(e,It)}var Et="TerminalRuleCall";function St(e){return pe.isInstance(e,Et)}var Nt="UnorderedGroup";function Pt(e){return pe.isInstance(e,Nt)}var bt="UntilToken";function Ot(e){return pe.isInstance(e,bt)}var Lt="Wildcard";function wt(e){return pe.isInstance(e,Lt)}class LangiumGrammarAstReflection extends AbstractAstReflection{getAllTypes(){return[ye,me,fe,tt,nt,Te,ke,at,ve,st,he,Ae,ct,Ce,dt,Se,Ne,mt,Pe,Oe,ht,we,gt,De,Me,Fe,Ge,Ke,Be,xt,je,kt,ze,Xe,Rt,It,Ye,Et,Ze,Qe,_e,et,Nt,bt,ge,Lt]}computeIsSubtype(e,t){switch(e){case tt:case nt:case at:case st:case ct:case dt:case mt:case ht:case gt:case xt:case kt:case Rt:case It:case Et:case Nt:case bt:case Lt:return this.isSubtype(ye,t);case Te:case Me:case Xe:return this.isSubtype(ge,t);case ke:case Be:case ze:case et:return this.isSubtype(_e,t);case ve:return this.isSubtype(he,t)||this.isSubtype(ge,t);case Ae:case Ce:case De:case Ge:return this.isSubtype(he,t);case Pe:case Oe:case Ze:return this.isSubtype(fe,t);case Ke:return this.isSubtype(me,t)||this.isSubtype(fe,t);case Ye:return this.isSubtype(me,t);default:return!1}}getReferenceType(e){const t=`${e.container.$type}:${e.property}`;switch(t){case"Action:type":case"CrossReference:type":case"Interface:superTypes":case"ParserRule:returnType":case"SimpleType:typeRef":return fe;case"Grammar:hiddenTokens":case"ParserRule:hiddenTokens":case"RuleCall:rule":return me;case"Grammar:usedGrammars":return Se;case"NamedArgument:parameter":case"ParameterReference:parameter":return Fe;case"TerminalRuleCall:rule":return Ye;default:throw new Error(`${t} is not a valid reference id.`)}}getTypeMetaData(e){switch(e){case ye:return{name:ye,properties:[{name:"cardinality"},{name:"lookahead"}]};case Te:return{name:Te,properties:[{name:"elements",defaultValue:[]}]};case ke:return{name:ke,properties:[{name:"elementType"}]};case ve:return{name:ve,properties:[{name:"true",defaultValue:!1}]};case Ae:return{name:Ae,properties:[{name:"left"},{name:"right"}]};case Ce:return{name:Ce,properties:[{name:"left"},{name:"right"}]};case Se:return{name:Se,properties:[{name:"definesHiddenTokens",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"imports",defaultValue:[]},{name:"interfaces",defaultValue:[]},{name:"isDeclared",defaultValue:!1},{name:"name"},{name:"rules",defaultValue:[]},{name:"types",defaultValue:[]},{name:"usedGrammars",defaultValue:[]}]};case Ne:return{name:Ne,properties:[{name:"path"}]};case Pe:return{name:Pe,properties:[{name:"name"}]};case Oe:return{name:Oe,properties:[{name:"attributes",defaultValue:[]},{name:"name"},{name:"superTypes",defaultValue:[]}]};case we:return{name:we,properties:[{name:"calledByName",defaultValue:!1},{name:"parameter"},{name:"value"}]};case De:return{name:De,properties:[{name:"value"}]};case Me:return{name:Me,properties:[{name:"value"}]};case Fe:return{name:Fe,properties:[{name:"name"}]};case Ge:return{name:Ge,properties:[{name:"parameter"}]};case Ke:return{name:Ke,properties:[{name:"dataType"},{name:"definesHiddenTokens",defaultValue:!1},{name:"definition"},{name:"entry",defaultValue:!1},{name:"fragment",defaultValue:!1},{name:"hiddenTokens",defaultValue:[]},{name:"inferredType"},{name:"name"},{name:"parameters",defaultValue:[]},{name:"returnType"},{name:"wildcard",defaultValue:!1}]};case Be:return{name:Be,properties:[{name:"referenceType"}]};case je:return{name:je,properties:[{name:"name"}]};case ze:return{name:ze,properties:[{name:"primitiveType"},{name:"stringType"},{name:"typeRef"}]};case Xe:return{name:Xe,properties:[{name:"value"}]};case Ye:return{name:Ye,properties:[{name:"definition"},{name:"fragment",defaultValue:!1},{name:"hidden",defaultValue:!1},{name:"name"},{name:"type"}]};case Ze:return{name:Ze,properties:[{name:"name"},{name:"type"}]};case Qe:return{name:Qe,properties:[{name:"defaultValue"},{name:"isOptional",defaultValue:!1},{name:"name"},{name:"type"}]};case et:return{name:et,properties:[{name:"types",defaultValue:[]}]};case tt:return{name:tt,properties:[{name:"cardinality"},{name:"feature"},{name:"inferredType"},{name:"lookahead"},{name:"operator"},{name:"type"}]};case nt:return{name:nt,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case at:return{name:at,properties:[{name:"cardinality"},{name:"feature"},{name:"lookahead"},{name:"operator"},{name:"terminal"}]};case st:return{name:st,properties:[{name:"cardinality"},{name:"left"},{name:"lookahead"},{name:"right"}]};case ct:return{name:ct,properties:[{name:"cardinality"},{name:"deprecatedSyntax",defaultValue:!1},{name:"lookahead"},{name:"terminal"},{name:"type"}]};case dt:return{name:dt,properties:[{name:"cardinality"},{name:"lookahead"}]};case mt:return{name:mt,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"guardCondition"},{name:"lookahead"}]};case ht:return{name:ht,properties:[{name:"cardinality"},{name:"lookahead"},{name:"value"}]};case gt:return{name:gt,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case xt:return{name:xt,properties:[{name:"cardinality"},{name:"lookahead"},{name:"regex"}]};case kt:return{name:kt,properties:[{name:"arguments",defaultValue:[]},{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Rt:return{name:Rt,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case It:return{name:It,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case Et:return{name:Et,properties:[{name:"cardinality"},{name:"lookahead"},{name:"rule"}]};case Nt:return{name:Nt,properties:[{name:"cardinality"},{name:"elements",defaultValue:[]},{name:"lookahead"}]};case bt:return{name:bt,properties:[{name:"cardinality"},{name:"lookahead"},{name:"terminal"}]};case Lt:return{name:Lt,properties:[{name:"cardinality"},{name:"lookahead"}]};default:return{name:e,properties:[]}}}}pe=new LangiumGrammarAstReflection;function Dt(e){for(const[t,r]of Object.entries(e)){if(!t.startsWith("$")){if(Array.isArray(r)){r.forEach((r,n)=>{if(V(r)){r.$container=e;r.$containerProperty=t;r.$containerIndex=n}})}else if(V(r)){r.$container=e;r.$containerProperty=t}}}}function $t(t,r){let n=t;while(n){if(r(n)){return n}n=n.$container}return e}function Mt(e){const t=Ft(e);const r=t.$document;if(!r){throw new Error("AST node has no document.")}return r}function Ft(e){while(e.$container){e=e.$container}return e}function Gt(e,t){if(!e){throw new Error("Node must be an AstNode.")}const r=t===null||t===void 0?void 0:t.range;return new StreamImpl(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),t=>{while(t.keyIndex<t.keys.length){let n=t.keys[t.keyIndex];if(!n.startsWith("$")){let o=e[n];if(V(o)){t.keyIndex++;if(Vt(o,r)){return{done:!1,value:o}}}else if(Array.isArray(o)){while(t.arrayIndex<o.length){let e=t.arrayIndex++,n=o[e];if(V(n)&&Vt(n,r)){return{done:!1,value:n}}}t.arrayIndex=0}}t.keyIndex++}return Y})}function Ut(e,t){if(!e){throw new Error("Root node must be an AstNode.")}return new TreeStreamImpl(e,e=>Gt(e,t))}function Kt(e,t){if(!e){throw new Error("Root node must be an AstNode.")}else if((t===null||t===void 0?void 0:t.range)&&!Vt(e,t.range)){return new TreeStreamImpl(e,()=>[])}return new TreeStreamImpl(e,e=>Gt(e,t),{includeRoot:!0})}function Vt(e,t){var r;if(!t){return!0}const n=(r=e.$cstNode)===null||r===void 0?void 0:r.range;if(!n){return!1}return ie(n,t)}function Bt(e){return new StreamImpl(()=>({keys:Object.keys(e),keyIndex:0,arrayIndex:0}),t=>{while(t.keyIndex<t.keys.length){let r=t.keys[t.keyIndex];if(!r.startsWith("$")){let n=e[r];if(B(n)){t.keyIndex++;return{done:!1,value:{reference:n,container:e,property:r}}}else if(Array.isArray(n)){while(t.arrayIndex<n.length){let o=t.arrayIndex++,a=n[o];if(B(a)){return{done:!1,value:{reference:a,container:e,property:r,index:o}}}}t.arrayIndex=0}}t.keyIndex++}return Y})}function jt(t,r){const n=t.getTypeMetaData(r.$type);const o=r;for(const t of n.properties){t.defaultValue!==e&&r[t.name]===e&&(o[t.name]=Wt(t.defaultValue))}}function Wt(e){if(Array.isArray(e)){return[...e.map(Wt)]}else{return e}}function zt(e){return e.charCodeAt(0)}function Ht(e,t){if(Array.isArray(e)){e.forEach(function(e){t.push(e)})}else{t.push(e)}}function Xt(e,t){if(e[t]===!0){throw"duplicate flag "+t}e[t];e[t]=!0}function Yt(t){if(t===e){throw Error("Internal Error - Should never get here!")}return!0}function qt(){throw Error("Internal Error - Should never get here!")}function Zt(e){return e["type"]==="Character"}var Jt=[];for(let e=zt("0");e<=zt("9");e++){Jt.push(e)}var Qt=[zt("_")].concat(Jt);for(let e=zt("a");e<=zt("z");e++){Qt.push(e)}for(let e=zt("A");e<=zt("Z");e++){Qt.push(e)}var er=[zt(" "),zt("\f"),zt("\n"),zt("\r"),zt("\t"),zt("\v"),zt("\t"),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt(" "),zt("\u2028"),zt("\u2029"),zt(" "),zt(" "),zt("　"),zt("\ufeff")];const tr=/[0-9a-fA-F]/;const rr=/[0-9]/;const nr=/[1-9]/;class RegExpParser{constructor(){this.idx=0;this.input="";this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx;this.input=e.input;this.groupIdx=e.groupIdx}pattern(e){this.idx=0;this.input=e;this.groupIdx=0;this.consumeChar("/");const t=this.disjunction();this.consumeChar("/");const r={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};while(this.isRegExpFlag()){switch(this.popChar()){case"g":Xt(r,"global");break;case"i":Xt(r,"ignoreCase");break;case"m":Xt(r,"multiLine");break;case"u":Xt(r,"unicode");break;case"y":Xt(r,"sticky");break}}if(this.idx!==this.input.length){throw Error("Redundant input: "+this.input.substring(this.idx))}return{type:"Pattern",flags:r,value:t,loc:this.loc(0)}}disjunction(){const e=[];const t=this.idx;e.push(this.alternative());while(this.peekChar()==="|"){this.consumeChar("|");e.push(this.alternative())}return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){const e=[];const t=this.idx;while(this.isTerm()){e.push(this.term())}return{type:"Alternative",value:e,loc:this.loc(t)}}term(){if(this.isAssertion()){return this.assertion()}else{return this.atom()}}assertion(){const e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break}Yt(t);let r=this.disjunction();this.consumeChar(")");return{type:t,value:r,loc:this.loc(e)}}return qt()}quantifier(t=!1){let r=e;const n=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:Infinity};break;case"+":r={atLeast:1,atMost:Infinity};break;case"?":r={atLeast:0,atMost:1};break;case"{":let n=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:n,atMost:n};break;case",":let e;if(this.isDigit()){e=this.integerIncludingZero();r={atLeast:n,atMost:e}}else{r={atLeast:n,atMost:Infinity}}this.consumeChar("}");break}if(t===!0&&r===e){return e}Yt(r);break}if(t===!0&&r===e){return e}if(Yt(r)){if(this.peekChar(0)==="?"){this.consumeChar("?");r.greedy=!1}else{r.greedy=!0}r.type="Quantifier";r.loc=this.loc(n);return r}}atom(){let t;const r=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group();break}t===e&&this.isPatternCharacter()&&(t=this.patternCharacter());if(Yt(t)){t.loc=this.loc(r);this.isQuantifier()&&(t.quantifier=this.quantifier());return t}return qt()}dotAll(){this.consumeChar(".");return{type:"Set",complement:!0,value:[zt("\n"),zt("\r"),zt("\u2028"),zt("\u2029")]}}atomEscape(){this.consumeChar("\\");switch(this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){const e=this.positiveInteger();return{type:"GroupBackReference",value:e}}characterClassEscape(){let e;let t=!1;switch(this.popChar()){case"d":e=Jt;break;case"D":e=Jt;t=!0;break;case"s":e=er;break;case"S":e=er;t=!0;break;case"w":e=Qt;break;case"W":e=Qt;t=!0;break}if(Yt(e)){return{type:"Set",value:e,complement:t}}return qt()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=zt("\f");break;case"n":e=zt("\n");break;case"r":e=zt("\r");break;case"t":e=zt("\t");break;case"v":e=zt("\v");break}if(Yt(e)){return{type:"Character",value:e}}return qt()}controlLetterEscapeAtom(){this.consumeChar("c");const e=this.popChar();if(/[a-zA-Z]/.test(e)===!1){throw Error("Invalid ")}const t=e.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:t}}nulCharacterAtom(){this.consumeChar("0");return{type:"Character",value:zt("\0")}}hexEscapeSequenceAtom(){this.consumeChar("x");return this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){this.consumeChar("u");return this.parseHexDigits(4)}identityEscapeAtom(){const e=this.popChar();return{type:"Character",value:zt(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:zt(e)}}}characterClass(){const e=[];let t=!1;this.consumeChar("[");if(this.peekChar(0)==="^"){this.consumeChar("^");t=!0}while(this.isClassAtom()){let t=this.classAtom(),r=t.type==="Character";if(Zt(t)&&this.isRangeDash()){this.consumeChar("-");let r=this.classAtom(),n=r.type==="Character";if(Zt(r)){if(r.value<t.value){throw Error("Range out of order in character class")}e.push({from:t.value,to:r.value})}else{Ht(t.value,e);e.push(zt("-"));Ht(r.value,e)}}else{Ht(t.value,e)}}this.consumeChar("]");return{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){this.consumeChar("\\");switch(this.peekChar()){case"b":this.consumeChar("b");return{type:"Character",value:zt("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("(");switch(this.peekChar(0)){case"?":this.consumeChar("?");this.consumeChar(":");e=!1;break;default:this.groupIdx++;break}const t=this.disjunction();this.consumeChar(")");const r={type:"Group",capturing:e,value:t};e&&(r["idx"]=this.groupIdx);return r}positiveInteger(){let e=this.popChar();if(nr.test(e)===!1){throw Error("Expecting a positive integer")}while(rr.test(this.peekChar(0))){e+=this.popChar()}return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(rr.test(e)===!1){throw Error("Expecting an integer")}while(rr.test(this.peekChar(0))){e+=this.popChar()}return parseInt(e,10)}patternCharacter(){const e=this.popChar();switch(e){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:zt(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return rr.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter()){return!0}switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){const t=this.saveState();try{return this.quantifier(!0)!==e}catch(e){return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let r=0;r<e;r++){let e=this.popChar();if(tr.test(e)===!1){throw Error("Expecting a HexDecimal digits")}t+=e}const r=parseInt(t,16);return{type:"Character",value:r}}peekChar(e=0){return this.input[this.idx+e]}popChar(){const t=this.peekChar(0);this.consumeChar(e);return t}consumeChar(t){if(t!==e&&this.input[this.idx]!==t){throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx)}if(this.idx>=this.input.length){throw Error("Unexpected end of input")}this.idx++}loc(e){return{begin:e,end:this.idx}}}class BaseRegExpVisitor{visitChildren(t){for(const r in t){let n=t[r];if(t.hasOwnProperty(r)){if(n.type!==e){this.visit(n)}else Array.isArray(n)&&n.forEach(e=>{this.visit(e)},this)}}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}}var or=/\r?\n/gm;const ar=new RegExpParser;class TerminalRegExpVisitor extends BaseRegExpVisitor{constructor(){super(...arguments);this.isStarting=!0;this.endRegexpStack=[];this.multiline=!1}get endRegex(){return this.endRegexpStack.join("")}reset(e){this.multiline=!1;this.regex=e;this.startRegexp="";this.isStarting=!0;this.endRegexpStack=[]}visitGroup(e){if(e.quantifier){this.isStarting=!1;this.endRegexpStack=[]}}visitCharacter(e){const t=String.fromCharCode(e.value);!this.multiline&&t==="\n"&&(this.multiline=!0);if(e.quantifier){this.isStarting=!1;this.endRegexpStack=[]}else{let e=ur(t);this.endRegexpStack.push(e);this.isStarting&&(this.startRegexp+=e)}}visitSet(e){if(!this.multiline){let t=this.regex.substring(e.loc.begin,e.loc.end),r=new RegExp(t);this.multiline=Boolean("\n".match(r))}if(e.quantifier){this.isStarting=!1;this.endRegexpStack=[]}else{let t=this.regex.substring(e.loc.begin,e.loc.end);this.endRegexpStack.push(t);this.isStarting&&(this.startRegexp+=t)}}visitChildren(e){if(e.type==="Group"){let t=e;if(t.quantifier){return}}super.visitChildren(e)}}const ir=new TerminalRegExpVisitor;function sr(e){try{typeof e==="string"&&(e=new RegExp(e));e=e.toString();ir.reset(e);ir.visit(ar.pattern(e));return ir.multiline}catch(e){return!1}}var lr=("\f\n\r\t\v           "+"   \u2028\u2029  　\ufeff").split("");function cr(e){const t=typeof e==="string"?new RegExp(e):e;return lr.some(e=>t.test(e))}function ur(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function dr(e){return Array.prototype.map.call(e,e=>/\w/.test(e)?`[${e.toLowerCase()}${e.toUpperCase()}]`:ur(e)).join("")}
function pr(e,t){const r=mr(e);const n=t.match(r);return!!n&&n[0].length>0}function mr(e){typeof e==="string"&&(e=new RegExp(e));const t=e,r=e.source;let n=0;function o(){let e="",a;function i(t){e+=r.substr(n,t);n+=t}function s(t){e+="(?:"+r.substr(n,t)+"|$)";n+=t}while(n<r.length){switch(r[n]){case"\\":switch(r[n+1]){case"c":s(3);break;case"x":s(4);break;case"u":if(t.unicode){if(r[n+2]==="{"){s(r.indexOf("}",n)-n+1)}else{s(6)}}else{s(2)}break;case"p":case"P":if(t.unicode){s(r.indexOf("}",n)-n+1)}else{s(2)}break;case"k":s(r.indexOf(">",n)-n+1);break;default:s(2);break}break;case"[":a=/\[(?:\\.|.)*?\]/g;a.lastIndex=n;a=a.exec(r)||[];s(a[0].length);break;case"|":case"^":case"$":case"*":case"+":case"?":i(1);break;case"{":a=/\{\d+,?\d*\}/g;a.lastIndex=n;a=a.exec(r);if(a){i(a[0].length)}else{s(1)}break;case"(":if(r[n+1]==="?"){switch(r[n+2]){case":":e+="(?:";n+=3;e+=o()+"|$)";break;case"=":e+="(?=";n+=3;e+=o()+")";break;case"!":a=n;n+=3;o();e+=r.substr(a,n-a);break;case"<":switch(r[n+3]){case"=":case"!":a=n;n+=4;o();e+=r.substr(a,n-a);break;default:i(r.indexOf(">",n)-n+1);e+=o()+"|$)";break}break}}else{i(1);e+=o()+"|$)"}break;case")":++n;return e;default:s(1);break}}return e}return new RegExp(o(),e.flags)}function fr(e){return e.rules.find(e=>Ve(e)&&e.entry)}function hr(e){return e.rules.filter(e=>qe(e)&&e.hidden)}function _r(e,t){const r=new Set;const n=fr(e);if(!n){return new Set(e.rules)}const o=[n].concat(hr(e));for(const e of o){gr(e,r,t)}const a=new Set;for(const t of e.rules){(r.has(t.name)||qe(t)&&t.hidden)&&a.add(t)}return a}function gr(e,t,r){t.add(e.name);Ut(e).forEach(e=>{if(vt(e)||r&&St(e)){let n=e.rule.ref;n&&!t.has(n.name)&&gr(n,t,r)}})}function yr(t){if(t.terminal){return t.terminal}else if(t.type.ref){let e=Cr(t.type.ref);return e===null||e===void 0?void 0:e.terminal}return e}function xr(e){return e.hidden&&!cr(wr(e))}function Tr(e,t){if(!e||!t){return[]}return vr(e,t,e.astNode,!0)}function kr(t,r,n){if(!t||!r){return e}const o=vr(t,r,t.astNode,!0);if(o.length===0){return e}if(n!==e){n=Math.max(0,Math.min(n,o.length-1))}else{n=0}return o[n]}function vr(e,t,r,n){if(!n){let r=$t(e.grammarSource,it);if(r&&r.feature===t){return[e]}}if(z(e)&&e.astNode===r){return e.content.flatMap(e=>vr(e,t,r,!1))}return[]}function Rr(t,r,n){if(!t){return e}const o=Ar(t,r,t===null||t===void 0?void 0:t.astNode);if(o.length===0){return e}if(n!==e){n=Math.max(0,Math.min(n,o.length-1))}else{n=0}return o[n]}function Ar(e,t,r){if(e.astNode!==r){return[]}if(_t(e.grammarSource)&&e.grammarSource.value===t){return[e]}const n=te(e).iterator();let o;const a=[];do{o=n.next();if(!o.done){let e=o.value;if(e.astNode===r){_t(e.grammarSource)&&e.grammarSource.value===t&&a.push(e)}else{n.prune()}}}while(!o.done);return a}function Ir(t){var r;const n=t.astNode;while(n===((r=t.container)===null||r===void 0?void 0:r.astNode)){let e=$t(t.grammarSource,it);if(e){return e}t=t.container}return e}function Cr(e){let t=e;if(be(t)){if(rt(t.$container)){t=t.$container.$container}else if(Ve(t.$container)){t=t.$container}else{de(t.$container)}}return Er(e,t,new Map)}function Er(t,r,n){var o;function a(r,o){let a=e;const i=$t(r,it);i||(a=Er(o,o,n));n.set(t,a);return a}if(n.has(t)){return n.get(t)}n.set(t,e);for(const e of Ut(r)){if(it(e)&&e.feature.toLowerCase()==="name"){n.set(t,e);return e}else if(vt(e)&&Ve(e.rule.ref)){return a(e,e.rule.ref)}else if(He(e)&&((o=e.typeRef)===null||o===void 0?void 0:o.ref)){return a(e,e.typeRef.ref)}}return e}function Sr(e){return Nr(e,new Set)}function Nr(e,t){if(t.has(e)){return!0}else{t.add(e)}for(const r of Ut(e)){if(vt(r)){if(!r.rule.ref){return!1}if(Ve(r.rule.ref)&&!Nr(r.rule.ref,t)){return!1}}else if(it(r)){return!1}else if(rt(r)){return!1}}return Boolean(e.definition)}function Pr(t){if(t.inferredType){return t.inferredType.name}else if(t.dataType){return t.dataType}else if(t.returnType){let e=t.returnType.ref;if(e){if(Ve(e)){return e.name}else if(Le(e)||Je(e)){return e.name}}}return e}function br(e){var t;if(Ve(e)){return Sr(e)?e.name:(t=Pr(e))!==null&&t!==void 0?t:e.name}else if(Le(e)||Je(e)||We(e)){return e.name}else if(rt(e)){let t=Or(e);if(t){return t}}else if(be(e)){return e.name}throw new Error("Cannot get name of Unknown Type")}function Or(t){var r;if(t.inferredType){return t.inferredType.name}else if((r=t.type)===null||r===void 0?void 0:r.ref){return br(t.type.ref)}return e}function Lr(e){var t,r,n;if(qe(e)){return(r=(t=e.type)===null||t===void 0?void 0:t.name)!==null&&r!==void 0?r:"string"}else{return(n=Pr(e))!==null&&n!==void 0?n:e.name}}function wr(e){const t={s:!1,i:!1,u:!1};const r=$r(e.definition,t);const n=Object.entries(t).filter(([,e])=>e).map(([e])=>e).join("");return new RegExp(r,n)}const Dr=/[\s\S]/.source;function $r(e,t){if(At(e)){return Mr(e)}else if(Ct(e)){return Fr(e)}else if(lt(e)){return Kr(e)}else if(St(e)){let t=e.rule.ref;if(!t){throw new Error("Missing rule reference.")}return Br($r(t.definition),{cardinality:e.cardinality,lookahead:e.lookahead})}else if(yt(e)){return Ur(e)}else if(Ot(e)){return Gr(e)}else if(Tt(e)){let r=e.regex.lastIndexOf("/"),n=e.regex.substring(1,r),o=e.regex.substring(r+1);if(t){t.i=o.includes("i");t.s=o.includes("s");t.u=o.includes("u")}return Br(n,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}else if(wt(e)){return Br(Dr,{cardinality:e.cardinality,lookahead:e.lookahead})}else{throw new Error(`Invalid terminal element: ${e===null||e===void 0?void 0:e.$type}`)}}function Mr(e){return Br(e.elements.map(e=>$r(e)).join("|"),{cardinality:e.cardinality,lookahead:e.lookahead})}function Fr(e){return Br(e.elements.map(e=>$r(e)).join(""),{cardinality:e.cardinality,lookahead:e.lookahead})}function Gr(e){return Br(`${Dr}*?${$r(e.terminal)}`,{cardinality:e.cardinality,lookahead:e.lookahead})}function Ur(e){return Br(`(?!${$r(e.terminal)})${Dr}*?`,{cardinality:e.cardinality,lookahead:e.lookahead})}function Kr(e){if(e.right){return Br(`[${Vr(e.left)}-${Vr(e.right)}]`,{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}return Br(Vr(e.left),{cardinality:e.cardinality,lookahead:e.lookahead,wrap:!1})}function Vr(e){return ur(e.value)}function Br(e,t){var r;(t.wrap!==!1||t.lookahead)&&(e=`(${(r=t.lookahead)!==null&&r!==void 0?r:""}${e})`);if(t.cardinality){return`${e}${t.cardinality}`}return e}function jr(e){const t=[];const r=e.Grammar;for(const e of r.rules){qe(e)&&xr(e)&&sr(wr(e))&&t.push(e.name)}return{multilineCommentRules:t,nameRegexp:se}}function Wr(e){console&&console.error&&console.error(`Error: ${e}`)}function zr(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function Hr(e){const t=(new Date).getTime();const r=e();const n=(new Date).getTime();const o=n-t;return{time:o,value:r}}function Xr(toBecomeFast){function FakeConstructor(){}FakeConstructor.prototype=toBecomeFast;const fakeInstance=new FakeConstructor;function fakeAccess(){return typeof fakeInstance.bar}fakeAccess();fakeAccess();return toBecomeFast;eval(toBecomeFast)}function Yr(e){if(qr(e)){return e.LABEL}else{return e.name}}function qr(e){return o(e.LABEL)&&e.LABEL!==""}class AbstractProduction{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this);a(this.definition,t=>{t.accept(e)})}}class NonTerminal extends AbstractProduction{constructor(t){super([]);this.idx=1;i(this,s(t,t=>t!==e))}set definition(e){}get definition(){if(this.referencedRule!==e){return this.referencedRule.definition}return[]}accept(e){e.visit(this)}}class Rule extends AbstractProduction{constructor(t){super(t.definition);this.orgText="";i(this,s(t,t=>t!==e))}}class Alternative extends AbstractProduction{constructor(t){super(t.definition);this.ignoreAmbiguities=!1;i(this,s(t,t=>t!==e))}}class Option extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class RepetitionMandatory extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class RepetitionMandatoryWithSeparator extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class Repetition extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class RepetitionWithSeparator extends AbstractProduction{constructor(t){super(t.definition);this.idx=1;i(this,s(t,t=>t!==e))}}class Alternation extends AbstractProduction{get definition(){return this._definition}set definition(e){this._definition=e}constructor(t){super(t.definition);this.idx=1;this.ignoreAmbiguities=!1;this.hasPredicates=!1;i(this,s(t,t=>t!==e))}}class Terminal{constructor(t){this.idx=1;i(this,s(t,t=>t!==e))}accept(e){e.visit(this)}}function Zr(e){return l(e,Jr)}function Jr(e){function t(e){return l(e,Jr)}if(e instanceof NonTerminal){let t={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};o(e.label)&&(t.label=e.label);return t}else if(e instanceof Alternative){return{type:"Alternative",definition:t(e.definition)}}else if(e instanceof Option){return{type:"Option",idx:e.idx,definition:t(e.definition)}}else if(e instanceof RepetitionMandatory){return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)}}else if(e instanceof RepetitionMandatoryWithSeparator){return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:Jr(new Terminal({terminalType:e.separator})),definition:t(e.definition)}}else if(e instanceof RepetitionWithSeparator){return{type:"RepetitionWithSeparator",idx:e.idx,separator:Jr(new Terminal({terminalType:e.separator})),definition:t(e.definition)}}else if(e instanceof Repetition){return{type:"Repetition",idx:e.idx,definition:t(e.definition)}}else if(e instanceof Alternation){return{type:"Alternation",idx:e.idx,definition:t(e.definition)}}else if(e instanceof Terminal){let t={type:"Terminal",name:e.terminalType.name,label:Yr(e.terminalType),idx:e.idx};o(e.label)&&(t.terminalLabel=e.label);let r=e.terminalType.PATTERN;e.terminalType.PATTERN&&(t.pattern=c(r)?r.source:r);return t}else if(e instanceof Rule){return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)}}else{throw Error("non exhaustive match")}}class GAstVisitor{visit(e){const t=e;switch(t.constructor){case NonTerminal:return this.visitNonTerminal(e);case Alternative:return this.visitAlternative(e);case Option:return this.visitOption(e);case RepetitionMandatory:return this.visitRepetitionMandatory(e);case RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(e);case RepetitionWithSeparator:return this.visitRepetitionWithSeparator(e);case Repetition:return this.visitRepetition(e);case Alternation:return this.visitAlternation(e);case Terminal:return this.visitTerminal(e);case Rule:return this.visitRule(e);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}}function Qr(e){return e instanceof Alternative||e instanceof Option||e instanceof Repetition||e instanceof RepetitionMandatory||e instanceof RepetitionMandatoryWithSeparator||e instanceof RepetitionWithSeparator||e instanceof Terminal||e instanceof Rule}function en(e,t=[]){const r=e instanceof Option||e instanceof Repetition||e instanceof RepetitionWithSeparator;if(r){return!0}if(e instanceof Alternation){return u(e.definition,e=>en(e,t))}else if(e instanceof NonTerminal&&d(t,e)){return!1}else if(e instanceof AbstractProduction){e instanceof NonTerminal&&t.push(e);return p(e.definition,e=>en(e,t))}else{return!1}}function tn(e){return e instanceof Alternation}function rn(e){if(e instanceof NonTerminal){return"SUBRULE"}else if(e instanceof Option){return"OPTION"}else if(e instanceof Alternation){return"OR"}else if(e instanceof RepetitionMandatory){return"AT_LEAST_ONE"}else if(e instanceof RepetitionMandatoryWithSeparator){return"AT_LEAST_ONE_SEP"}else if(e instanceof RepetitionWithSeparator){return"MANY_SEP"}else if(e instanceof Repetition){return"MANY"}else if(e instanceof Terminal){return"CONSUME"}else{throw Error("non exhaustive match")}}class RestWalker{walk(e,t=[]){a(e.definition,(r,n)=>{const o=m(e.definition,n+1);if(r instanceof NonTerminal){this.walkProdRef(r,o,t)}else if(r instanceof Terminal){this.walkTerminal(r,o,t)}else if(r instanceof Alternative){this.walkFlat(r,o,t)}else if(r instanceof Option){this.walkOption(r,o,t)}else if(r instanceof RepetitionMandatory){this.walkAtLeastOne(r,o,t)}else if(r instanceof RepetitionMandatoryWithSeparator){this.walkAtLeastOneSep(r,o,t)}else if(r instanceof RepetitionWithSeparator){this.walkManySep(r,o,t)}else if(r instanceof Repetition){this.walkMany(r,o,t)}else if(r instanceof Alternation){this.walkOr(r,o,t)}else{throw Error("non exhaustive match")}})}walkTerminal(e,t,r){}walkProdRef(e,t,r){}walkFlat(e,t,r){const n=t.concat(r);this.walk(e,n)}walkOption(e,t,r){const n=t.concat(r);this.walk(e,n)}walkAtLeastOne(e,t,r){const n=[new Option({definition:e.definition})].concat(t,r);this.walk(e,n)}walkAtLeastOneSep(e,t,r){const n=nn(e,t,r);this.walk(e,n)}walkMany(e,t,r){const n=[new Option({definition:e.definition})].concat(t,r);this.walk(e,n)}walkManySep(e,t,r){const n=nn(e,t,r);this.walk(e,n)}walkOr(e,t,r){const n=t.concat(r);a(e.definition,e=>{const t=new Alternative({definition:[e]});this.walk(t,n)})}}function nn(e,t,r){const n=[new Option({definition:[new Terminal({terminalType:e.separator})].concat(e.definition)})];const o=n.concat(t,r);return o}function on(e){if(e instanceof NonTerminal){return on(e.referencedRule)}else if(e instanceof Terminal){return ln(e)}else if(Qr(e)){return an(e)}else if(tn(e)){return sn(e)}else{throw Error("non exhaustive match")}}function an(e){let t=[];const r=e.definition;let n=0;let o=r.length>n;let a;let i=!0;while(o&&i){a=r[n];i=en(a);t=t.concat(on(a));n=n+1;o=r.length>n}return f(t)}function sn(e){const t=l(e.definition,e=>on(e));return f(h(t))}function ln(e){return[e.terminalType]}var cn="_~IN~_";class ResyncFollowsWalker extends RestWalker{constructor(e){super();this.topProd=e;this.follows={}}startWalking(){this.walk(this.topProd);return this.follows}walkTerminal(e,t,r){}walkProdRef(e,t,r){const n=dn(e.referencedRule,e.idx)+this.topProd.name;const o=t.concat(r);const a=new Alternative({definition:o});const i=on(a);this.follows[n]=i}}function un(e){const t={};a(e,e=>{const r=new ResyncFollowsWalker(e).startWalking();i(t,r)});return t}function dn(e,t){return e.name+t+cn}let pn={};const mn=new RegExpParser;function fn(e){const t=e.toString();if(pn.hasOwnProperty(t)){return pn[t]}else{let e=mn.pattern(t);pn[t]=e;return e}}function hn(){pn={}}const _n="Complement Sets are not supported for first char optimization";var gn='Unable to use "first char" lexer optimizations:\n';function yn(e,t=!1){try{let r=fn(e),n=xn(r.value,{},r.flags.ignoreCase);return n}catch(r){if(r.message===_n){if(t){zr(`${gn}`+`\tUnable to optimize: < ${e.toString()} >\n`+"\tComplement Sets cannot be automatically optimized.\n"+"\tThis will disable the lexer's first char optimizations.\n"+"\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.")}}else{let r="";if(t){r="\n\tThis will disable the lexer's first char optimizations.\n"+"\tSee: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."}Wr(`${gn}\n`+`\tFailed parsing: < ${e.toString()} >\n`+`\tUsing the @chevrotain/regexp-to-ast library\n`+"\tPlease open an issue at: https://github.com/chevrotain/chevrotain/issues"+r)}}return[]}function xn(t,r,n){switch(t.type){case"Disjunction":for(let e=0;e<t.value.length;e++){xn(t.value[e],r,n)}break;case"Alternative":let o=t.value;for(let t=0;t<o.length;t++){let i=o[t];switch(i.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let s=i;switch(s.type){case"Character":Tn(s.value,r,n);break;case"Set":if(s.complement===!0){throw Error(_n)}a(s.value,e=>{if(typeof e==="number"){Tn(e,r,n)}else{let t=e;if(n===!0){for(let e=t.from;e<=t.to;e++){Tn(e,r,n)}}else{for(let e=t.from;e<=t.to&&e<oo;e++){Tn(e,r,n)}if(t.to>=oo){let e=t.from>=oo?t.from:oo,n=t.to,o=io(e),a=io(n);for(let e=o;e<=a;e++){r[e]=e}}}}});break;case"Group":xn(s.value,r,n);break;default:throw Error("Non Exhaustive Match")}let l=s.quantifier!==e&&s.quantifier.atLeast===0;if(s.type==="Group"&&Rn(s)===!1||s.type!=="Group"&&l===!1){break}}break;default:throw Error("non exhaustive match!")}return _(r)}function Tn(e,t,r){const n=io(e);t[n]=n;r===!0&&kn(e,t)}function kn(e,t){const r=String.fromCharCode(e);const n=r.toUpperCase();if(n!==r){let e=io(n.charCodeAt(0));t[e]=e}else{let e=r.toLowerCase();if(e!==r){let r=io(e.charCodeAt(0));t[r]=r}}}function vn(t,r){return g(t.value,t=>{if(typeof t==="number"){return d(r,t)}else{let n=t;return g(r,e=>n.from<=e&&e<=n.to)!==e}})}function Rn(e){const t=e.quantifier;if(t&&t.atLeast===0){return!0}if(!e.value){return!1}return y(e.value)?p(e.value,Rn):Rn(e.value)}class CharCodeFinder extends BaseRegExpVisitor{constructor(e){super();this.targetCharCodes=e;this.found=!1}visitChildren(e){if(this.found===!0){return}switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}visitCharacter(e){d(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(t){if(t.complement){vn(t,this.targetCharCodes)===e&&(this.found=!0)}else{vn(t,this.targetCharCodes)!==e&&(this.found=!0)}}}function An(t,r){if(r instanceof RegExp){let e=fn(r),n=new CharCodeFinder(t);n.visit(e);return n.found}else{return g(r,e=>d(t,e.charCodeAt(0)))!==e}}const In="PATTERN";var Cn="defaultMode";var En="modes";var Sn=typeof new RegExp("(?:)").sticky==="boolean";function Nn(t,r){r=x(r,{useSticky:Sn,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:(e,t)=>t()});const n=r.tracer;n("initCharCodeToOptimizedIndexMap",()=>{so()});let i;n("Reject Lexer.NA",()=>{i=T(t,e=>e[In]===Lexer.NA)});let s=!1;let u;n("Transform Patterns",()=>{s=!1;u=l(i,e=>{const t=e[In];if(c(t)){let e=t.source;if(e.length===1&&e!=="^"&&e!=="$"&&e!=="."&&!t.ignoreCase){return e}else if(e.length===2&&e[0]==="\\"&&!d(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],e[1])){return e[1]}else{return r.useSticky?Hn(t):zn(t)}}else if(k(t)){s=!0;return{exec:t}}else if(typeof t==="object"){s=!0;return t}else if(typeof t==="string"){if(t.length===1){return t}else{let e=t.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=new RegExp(e);return r.useSticky?Hn(n):zn(n)}}else{throw Error("non exhaustive match")}})});let p;let m;let f;let h;let _;n("misc mapping",()=>{p=l(i,e=>e.tokenTypeIdx);m=l(i,t=>{const r=t.GROUP;if(r===Lexer.SKIPPED){return e}else if(o(r)){return r}else if(v(r)){return!1}else{throw Error("non exhaustive match")}});f=l(i,e=>{const t=e.LONGER_ALT;if(t){let e=y(t)?l(t,e=>R(i,e)):[R(i,t)];return e}});h=l(i,e=>e.PUSH_MODE);_=l(i,e=>A(e,"POP_MODE"))});let g;n("Line Terminator Handling",()=>{const e=ro(r.lineTerminatorCharacters);g=l(i,e=>!1);r.positionTracking!=="onlyOffset"&&(g=l(i,t=>{if(A(t,"LINE_BREAKS")){return!!t.LINE_BREAKS}else{return eo(t,e)===!1&&An(e,t.PATTERN)}}))});let E;let S;let N;let P;n("Misc Mapping #2",()=>{E=l(i,Zn);S=l(u,Jn);N=I(i,(e,t)=>{const r=t.GROUP;o(r)&&!(r===Lexer.SKIPPED)&&(e[r]=[]);return e},{});P=l(u,(e,t)=>({pattern:u[t],longerAlt:f[t],canLineTerminator:g[t],isCustom:E[t],short:S[t],group:m[t],push:h[t],pop:_[t],tokenTypeIdx:p[t],tokenType:i[t]}))});let b=!0;let O=[];r.safeMode||n("First Char Optimization",()=>{O=I(i,(e,t,n)=>{if(typeof t.PATTERN==="string"){let r=t.PATTERN.charCodeAt(0),o=io(r);no(e,o,P[n])}else if(y(t.START_CHARS_HINT)){let r;a(t.START_CHARS_HINT,t=>{const o=typeof t==="string"?t.charCodeAt(0):t;const a=io(o);if(r!==a){r=a;no(e,a,P[n])}})}else if(c(t.PATTERN)){if(t.PATTERN.unicode){b=!1;r.ensureOptimizations&&Wr(`${gn}`+`\tUnable to analyze < ${t.PATTERN.toString()} > pattern.\n`+"\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n"+"\tThis will disable the lexer's first char optimizations.\n"+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE")}else{let o=yn(t.PATTERN,r.ensureOptimizations);C(o)&&(b=!1);a(o,t=>{no(e,t,P[n])})}}else{r.ensureOptimizations&&Wr(`${gn}`+`\tTokenType: <${t.name}> is using a custom token pattern without providing <start_chars_hint> parameter.\n`+"\tThis will disable the lexer's first char optimizations.\n"+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE");b=!1}return e},[])});return{emptyGroups:N,patternIdxToConfig:P,charCodeToPatternIdxToConfig:O,hasCustom:s,canBeOptimized:b}}function Pn(e,t){let r=[];const n=On(e);r=r.concat(n.errors);const o=Ln(n.valid);const a=o.valid;r=r.concat(o.errors);r=r.concat(bn(a));r=r.concat(Kn(a));r=r.concat(Vn(a,t));r=r.concat(Bn(a));return r}function bn(e){let t=[];const r=E(e,e=>c(e[In]));t=t.concat(Dn(r));t=t.concat(Fn(r));t=t.concat(Gn(r));t=t.concat(Un(r));t=t.concat($n(r));return t}function On(e){const t=E(e,e=>!A(e,In));const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- missing static 'PATTERN' property",type:0,tokenTypes:[e]}));const n=S(e,t);return{errors:r,valid:n}}function Ln(e){const t=E(e,e=>{const t=e[In];return!c(t)&&!k(t)&&!A(t,"exec")&&!o(t)});const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' can only be a RegExp, a"+" Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:1,tokenTypes:[e]}));const n=S(e,t);return{errors:r,valid:n}}const wn=/[^\\][$]/;function Dn(e){class EndAnchorFinder extends BaseRegExpVisitor{constructor(){super(...arguments);this.found=!1}visitEndAnchor(e){this.found=!0}}const t=E(e,e=>{const t=e.PATTERN;try{let e=fn(t),r=new EndAnchorFinder;r.visit(e);return r.found}catch(e){return wn.test(t.source)}});const r=l(t,e=>({message:"Unexpected RegExp Anchor Error:\n"+"\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n"+"\tSee chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS"+"\tfor details.",type:2,tokenTypes:[e]}));return r}function $n(e){const t=E(e,e=>{const t=e.PATTERN;return t.test("")});const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' must not match an empty string",type:12,tokenTypes:[e]}));return r}const Mn=/[^\\[][\^]|^\^/;function Fn(e){class StartAnchorFinder extends BaseRegExpVisitor{constructor(){super(...arguments);this.found=!1}visitStartAnchor(e){this.found=!0}}const t=E(e,e=>{const t=e.PATTERN;try{let e=fn(t),r=new StartAnchorFinder;r.visit(e);return r.found}catch(e){return Mn.test(t.source)}});const r=l(t,e=>({message:"Unexpected RegExp Anchor Error:\n"+"\tToken Type: ->"+e.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n"+"\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS"+"\tfor details.",type:11,tokenTypes:[e]}));return r}function Gn(e){const t=E(e,e=>{const t=e[In];return t instanceof RegExp&&(t.multiline||t.global)});const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:3,tokenTypes:[e]}));return r}function Un(e){const t=[];let r=l(e,r=>I(e,(e,n)=>{if(r.PATTERN.source===n.PATTERN.source&&!d(t,n)&&n.PATTERN!==Lexer.NA){t.push(n);e.push(n);return e}return e},[]));r=N(r);const n=E(r,e=>e.length>1);const o=l(n,e=>{const t=l(e,e=>e.name);const r=P(e).PATTERN;return{message:`The same RegExp pattern ->${r}<-`+`has been used in all of the following Token Types: ${t.join(", ")} <-`,type:4,tokenTypes:e}});return o}function Kn(e){const t=E(e,e=>{if(!A(e,"GROUP")){return!1}const t=e.GROUP;return t!==Lexer.SKIPPED&&t!==Lexer.NA&&!o(t)});const r=l(t,e=>({message:"Token Type: ->"+e.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:5,tokenTypes:[e]}));return r}function Vn(t,r){const n=E(t,t=>t.PUSH_MODE!==e&&!d(r,t.PUSH_MODE));const o=l(n,e=>{const t=`Token Type: ->${e.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${e.PUSH_MODE}<-`+`which does not exist`;return{message:t,type:6,tokenTypes:[e]}});return o}function Bn(e){const t=[];const r=I(e,(e,t,r)=>{const n=t.PATTERN;if(n===Lexer.NA){return e}if(o(n)){e.push({str:n,idx:r,tokenType:t})}else c(n)&&Wn(n)&&e.push({str:n.source,idx:r,tokenType:t});return e},[]);a(e,(e,n)=>{a(r,({str:r,idx:o,tokenType:a})=>{if(n<o&&jn(r,e.PATTERN)){let r=`Token: ->${a.name}<- can never be matched.\n`+`Because it appears AFTER the Token Type ->${e.name}<-`+`in the lexer's definition.\n`+`See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:r,type:14,tokenTypes:[e,a]})}})});return t}function jn(e,t){if(c(t)){let r=t.exec(e);return r!==null&&r.index===0}else if(k(t)){return t(e,0,[],{})}else if(A(t,"exec")){return t.exec(e,0,[],{})}else if(typeof t==="string"){return t===e}else{throw Error("non exhaustive match")}}function Wn(t){const r=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return g(r,e=>t.source.indexOf(e)!==-1)===e}function zn(e){const t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function Hn(e){const t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function Xn(e,t,r){const n=[];A(e,Cn)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Cn+"> property in its definition\n",type:7});A(e,En)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+En+"> property in its definition\n",type:8});A(e,En)&&A(e,Cn)&&!A(e.modes,e.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${Cn}: <${e.defaultMode}>`+`which does not exist\n`,type:9});A(e,En)&&a(e.modes,(e,t)=>{a(e,(r,o)=>{if(v(r)){n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:`+`<${t}> at index: <${o}>\n`,type:10})}else if(A(r,"LONGER_ALT")){let o=y(r.LONGER_ALT)?r.LONGER_ALT:[r.LONGER_ALT];a(o,o=>{!v(o)&&!d(e,o)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${o.name}> on token <${r.name}> outside of mode <${t}>\n`,type:17})})}})});return n}function Yn(e,t,r){const n=[];let o=!1;const i=N(h(_(e.modes)));const s=T(i,e=>e[In]===Lexer.NA);const l=ro(r);t&&a(s,e=>{const t=eo(e,l);if(t!==!1){let r=to(e,t),o={message:r,type:t.issue,tokenType:e};n.push(o)}else{if(A(e,"LINE_BREAKS")){e.LINE_BREAKS===!0&&(o=!0)}else{An(l,e.PATTERN)&&(o=!0)}}});t&&!o&&n.push({message:"Warning: No LINE_BREAKS Found.\n"+"\tThis Lexer has been defined to track line and column information,\n"+"\tBut none of the Token Types can be identified as matching a line terminator.\n"+"\tSee https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n"+"\tfor details.",type:13});return n}function qn(e){const t={};const r=b(e);a(r,r=>{const n=e[r];if(y(n)){t[r]=[]}else{throw Error("non exhaustive match")}});return t}function Zn(e){const t=e.PATTERN;if(c(t)){return!1}else if(k(t)){return!0}else if(A(t,"exec")){return!0}else if(o(t)){return!1}else{throw Error("non exhaustive match")}}function Jn(e){if(o(e)&&e.length===1){return e.charCodeAt(0)}else{return!1}}var Qn={test:function(e){const t=e.length;for(let r=this.lastIndex;r<t;r++){let t=e.charCodeAt(r);if(t===10){this.lastIndex=r+1;return!0}else if(t===13){if(e.charCodeAt(r+1)===10){this.lastIndex=r+2}else{this.lastIndex=r+1}return!0}}return!1},lastIndex:0};function eo(e,t){if(A(e,"LINE_BREAKS")){return!1}else{if(c(e.PATTERN)){try{An(t,e.PATTERN)}catch(e){return{issue:Io.IDENTIFY_TERMINATOR,errMsg:e.message}}return!1}else if(o(e.PATTERN)){return!1}else if(Zn(e)){return{issue:16}}else{throw Error("non exhaustive match")}}}function to(e,t){if(t.issue===15){return"Warning: unable to identify line terminator usage in pattern.\n"+`\tThe problem is in the <${e.name}> Token Type\n`+`\t Root cause: ${t.errMsg}.\n`+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR"}else if(t.issue===16){return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n"+`\tThe problem is in the <${e.name}> Token Type\n`+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK"}else{throw Error("non exhaustive match")}}function ro(e){const t=l(e,e=>{if(o(e)){return e.charCodeAt(0)}else{return e}});return t}function no(t,r,n){if(t[r]===e){t[r]=[n]}else{t[r].push(n)}}var oo=256;let ao=[];function io(e){return e<oo?e:ao[e]}function so(){if(C(ao)){ao=new Array(65536);for(let e=0;e<65536;e++){ao[e]=e>255?255+~~(e/255):e}}}function lo(e,t){const r=e.tokenTypeIdx;if(r===t.tokenTypeIdx){return!0}else{return t.isParent===!0&&t.categoryMatchesMap[r]===!0}}function co(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}var uo=1;var po={};function mo(e){const t=fo(e);ho(t);go(t);_o(t);a(t,e=>{e.isParent=e.categoryMatches.length>0})}function fo(e){let t=O(e);let r=e;let n=!0;while(n){r=N(h(l(r,e=>e.CATEGORIES)));let e=S(r,t);t=t.concat(e);if(C(e)){n=!1}else{r=e}}return t}function ho(e){a(e,e=>{if(!xo(e)){po[uo]=e;e.tokenTypeIdx=uo++}To(e)&&!y(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]);To(e)||(e.CATEGORIES=[]);ko(e)||(e.categoryMatches=[]);vo(e)||(e.categoryMatchesMap={})})}function _o(e){a(e,e=>{e.categoryMatches=[];a(e.categoryMatchesMap,(t,r)=>{e.categoryMatches.push(po[r].tokenTypeIdx)})})}function go(e){a(e,e=>{yo([],e)})}function yo(e,t){a(e,e=>{t.categoryMatchesMap[e.tokenTypeIdx]=!0});a(t.CATEGORIES,r=>{const n=e.concat(t);d(n,r)||yo(n,r)})}function xo(e){return A(e,"tokenTypeIdx")}function To(e){return A(e,"CATEGORIES")}function ko(e){return A(e,"categoryMatches")}function vo(e){return A(e,"categoryMatchesMap")}function Ro(e){return A(e,"tokenTypeIdx")}var Ao={buildUnableToPopLexerModeMessage(e){return`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(e,t,r,n,o){return`unexpected character: ->${e.charAt(t)}<- at offset: ${t},`+` skipped ${r} characters.`}};var Io={};(function(e){e[e["MISSING_PATTERN"]=0]="MISSING_PATTERN";e[e["INVALID_PATTERN"]=1]="INVALID_PATTERN";e[e["EOI_ANCHOR_FOUND"]=2]="EOI_ANCHOR_FOUND";e[e["UNSUPPORTED_FLAGS_FOUND"]=3]="UNSUPPORTED_FLAGS_FOUND";e[e["DUPLICATE_PATTERNS_FOUND"]=4]="DUPLICATE_PATTERNS_FOUND";e[e["INVALID_GROUP_TYPE_FOUND"]=5]="INVALID_GROUP_TYPE_FOUND";e[e["PUSH_MODE_DOES_NOT_EXIST"]=6]="PUSH_MODE_DOES_NOT_EXIST";e[e["MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE"]=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE";e[e["MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY"]=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY";e[e["MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST"]=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST";e[e["LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED"]=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED";e[e["SOI_ANCHOR_FOUND"]=11]="SOI_ANCHOR_FOUND";e[e["EMPTY_MATCH_PATTERN"]=12]="EMPTY_MATCH_PATTERN";e[e["NO_LINE_BREAKS_FLAGS"]=13]="NO_LINE_BREAKS_FLAGS";e[e["UNREACHABLE_PATTERN"]=14]="UNREACHABLE_PATTERN";e[e["IDENTIFY_TERMINATOR"]=15]="IDENTIFY_TERMINATOR";e[e["CUSTOM_LINE_BREAK"]=16]="CUSTOM_LINE_BREAK";e[e["MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"]=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(Io);const Co={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:Ao,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Co);class Lexer{constructor(e,t=Co){this.lexerDefinition=e;this.lexerDefinitionErrors=[];this.lexerDefinitionWarning=[];this.patternIdxToConfig={};this.charCodeToPatternIdxToConfig={};this.modes=[];this.emptyGroups={};this.trackStartLines=!0;this.trackEndLines=!0;this.hasCustom=!1;this.canModeBeOptimized={};this.TRACE_INIT=((e,t)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`)
let{time:n,value:o}=Hr(t),a=n>10?console.warn:console.log;this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${n}ms`);this.traceInitIndent--;return o}else{return t()}});if(typeof t==="boolean"){throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\n"+"a boolean 2nd argument is no longer supported")}this.config=i({},Co,t);const r=this.config.traceInitPerf;if(r===!0){this.traceInitMaxIdent=Infinity;this.traceInitPerf=!0}else if(typeof r==="number"){this.traceInitMaxIdent=r;this.traceInitPerf=!0}this.traceInitIndent=-1;this.TRACE_INIT("Lexer Constructor",()=>{let r;let n=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Co.lineTerminatorsPattern){this.config.lineTerminatorsPattern=Qn}else{if(this.config.lineTerminatorCharacters===Co.lineTerminatorCharacters){throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n"+"\tFor details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS")}}if(t.safeMode&&t.ensureOptimizations){throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.')}this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking);this.trackEndLines=/full/i.test(this.config.positionTracking);if(y(e)){r={modes:{defaultMode:O(e)},defaultMode:Cn}}else{n=!1;r=O(e)}});if(this.config.skipValidations===!1){this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Xn(r,this.trackStartLines,this.config.lineTerminatorCharacters))});this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Yn(r,this.trackStartLines,this.config.lineTerminatorCharacters))})}r.modes=r.modes?r.modes:{};a(r.modes,(e,t)=>{r.modes[t]=T(e,e=>v(e))});const o=b(r.modes);a(r.modes,(e,r)=>{this.TRACE_INIT(`Mode: <${r}> processing`,()=>{this.modes.push(r);this.config.skipValidations===!1&&this.TRACE_INIT(`validatePatterns`,()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(Pn(e,o))});if(C(this.lexerDefinitionErrors)){mo(e);let n;this.TRACE_INIT(`analyzeTokenTypes`,()=>{n=Nn(e,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})});this.patternIdxToConfig[r]=n.patternIdxToConfig;this.charCodeToPatternIdxToConfig[r]=n.charCodeToPatternIdxToConfig;this.emptyGroups=i({},this.emptyGroups,n.emptyGroups);this.hasCustom=n.hasCustom||this.hasCustom;this.canModeBeOptimized[r]=n.canBeOptimized}})});this.defaultMode=r.defaultMode;if(!C(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let e=l(this.lexerDefinitionErrors,e=>e.message),t=e.join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+t)}a(this.lexerDefinitionWarning,e=>{zr(e.message)});this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Sn){this.chopInput=L;this.match=this.matchWithTest}else{this.updateLastIndex=w;this.match=this.matchWithExec}n&&(this.handleModes=w);this.trackStartLines===!1&&(this.computeNewColumn=L);this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=w);if(/full/i.test(this.config.positionTracking)){this.createTokenInstance=this.createFullToken}else if(/onlyStart/i.test(this.config.positionTracking)){this.createTokenInstance=this.createStartOnlyToken}else if(/onlyOffset/i.test(this.config.positionTracking)){this.createTokenInstance=this.createOffsetOnlyToken}else{throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`)}if(this.hasCustom){this.addToken=this.addTokenUsingPush;this.handlePayload=this.handlePayloadWithCustom}else{this.addToken=this.addTokenUsingMemberAccess;this.handlePayload=this.handlePayloadNoCustom}});this.TRACE_INIT("Failed Optimization Warnings",()=>{const e=I(this.canModeBeOptimized,(e,t,r)=>{t===!1&&e.push(r);return e},[]);if(t.ensureOptimizations&&!C(e)){throw Error(`Lexer Modes: < ${e.join(", ")} > cannot be optimized.\n`+'\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n'+"\t Or inspect the console log for details on how to resolve these issues.")}});this.TRACE_INIT("clearRegExpParserCache",()=>{hn()});this.TRACE_INIT("toFastProperties",()=>{Xr(this)})})}tokenize(e,t=this.defaultMode){if(!C(this.lexerDefinitionErrors)){let e=l(this.lexerDefinitionErrors,e=>e.message),t=e.join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+t)}return this.tokenizeInternal(e,t)}tokenizeInternal(t,r){let n,o,a,i,s,l,c,u,d,p,m,f,h,_,g;const y=t;const x=y.length;let T=0;let k=0;const v=this.hasCustom?0:Math.floor(t.length/10);const R=new Array(v);const A=[];let I=this.trackStartLines?1:e;let C=this.trackStartLines?1:e;const E=qn(this.emptyGroups);const S=this.trackStartLines;const N=this.config.lineTerminatorsPattern;let P=0;let b=[];let O=[];const L=[];const w=[];Object.freeze(w);let $;function M(){return b}function F(t){const r=io(t);const n=O[r];if(n===e){return w}else{return n}}const G=t=>{if(L.length===1&&t.tokenType.PUSH_MODE===e){let e=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);A.push({offset:t.startOffset,line:t.startLine,column:t.startColumn,length:t.image.length,message:e})}else{L.pop();let e=D(L);b=this.patternIdxToConfig[e];O=this.charCodeToPatternIdxToConfig[e];P=b.length;let t=this.canModeBeOptimized[e]&&this.config.safeMode===!1;if(O&&t){$=F}else{$=M}}};function U(e){L.push(e);O=this.charCodeToPatternIdxToConfig[e];b=this.patternIdxToConfig[e];P=b.length;P=b.length;const t=this.canModeBeOptimized[e]&&this.config.safeMode===!1;if(O&&t){$=F}else{$=M}}U.call(this,r);let K;const V=this.config.recoveryEnabled;while(T<x){l=null;let r=y.charCodeAt(T),v=$(r),O=v.length;for(n=0;n<O;n++){K=v[n];let o=K.pattern;c=null;let d=K.short;if(d!==!1){r===d&&(l=o)}else if(K.isCustom===!0){g=o.exec(y,T,R,E);if(g!==null){l=g[0];g.payload!==e&&(c=g.payload)}else{l=null}}else{this.updateLastIndex(o,T);l=this.match(o,t,T)}if(l!==null){s=K.longerAlt;if(s!==e){let r=s.length;for(a=0;a<r;a++){let r=b[s[a]],n=r.pattern;u=null;if(r.isCustom===!0){g=n.exec(y,T,R,E);if(g!==null){i=g[0];g.payload!==e&&(u=g.payload)}else{i=null}}else{this.updateLastIndex(n,T);i=this.match(n,t,T)}if(i&&i.length>l.length){l=i;c=u;K=r;break}}}break}}if(l!==null){d=l.length;p=K.group;if(p!==e){m=K.tokenTypeIdx;f=this.createTokenInstance(l,T,m,K.tokenType,I,C,d);this.handlePayload(f,c);if(p===!1){k=this.addToken(R,k,f)}else{E[p].push(f)}}t=this.chopInput(t,d);T=T+d;C=this.computeNewColumn(C,d);if(S===!0&&K.canLineTerminator===!0){let e=0,t,r;N.lastIndex=0;do{t=N.test(l);if(t===!0){r=N.lastIndex-1;e++}}while(t===!0);if(e!==0){I=I+e;C=d-r;this.updateTokenEndLineColumnLocation(f,p,r,e,I,C,d)}}this.handleModes(K,G,U,f)}else{let e=T,r=I,n=C,a=V===!1;while(a===!1&&T<x){t=this.chopInput(t,1);T++;for(o=0;o<P;o++){let e=b[o],r=e.pattern,n=e.short;if(n!==!1){y.charCodeAt(T)===n&&(a=!0)}else if(e.isCustom===!0){a=r.exec(y,T,R,E)!==null}else{this.updateLastIndex(r,T);a=r.exec(t)!==null}if(a===!0){break}}}h=T-e;C=this.computeNewColumn(C,h);_=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(y,e,h,r,n);A.push({offset:e,line:r,column:n,length:h,message:_});if(V===!1){break}}}this.hasCustom||(R.length=k);return{tokens:R,groups:E,errors:A}}handleModes(t,r,n,o){if(t.pop===!0){let a=t.push;r(o);a!==e&&n.call(this,a)}else t.push!==e&&n.call(this,t.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(t,r,n,o,a,i,s){let l,c;if(r!==e){l=n===s-1;c=l?-1:0;if(!(o===1&&l===!0)){t.endLine=a+c;t.endColumn=i-1+-c}}}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,r,n){return{image:e,startOffset:t,tokenTypeIdx:r,tokenType:n}}createStartOnlyToken(e,t,r,n,o,a){return{image:e,startOffset:t,startLine:o,startColumn:a,tokenTypeIdx:r,tokenType:n}}createFullToken(e,t,r,n,o,a,i){return{image:e,startOffset:t,endOffset:t+i-1,startLine:o,endLine:o,startColumn:a,endColumn:a+i-1,tokenTypeIdx:r,tokenType:n}}addTokenUsingPush(e,t,r){e.push(r);return t}addTokenUsingMemberAccess(e,t,r){e[t]=r;t++;return t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,r){const n=e.test(t);if(n===!0){return t.substring(r,e.lastIndex)}return null}matchWithExec(e,t){const r=e.exec(t);return r!==null?r[0]:null}}Lexer.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will"+"be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";Lexer.NA=/NOT_APPLICABLE/;function Eo(e){if(So(e)){return e.LABEL}else{return e.name}}function So(e){return o(e.LABEL)&&e.LABEL!==""}const No="parent";const Po="categories";const bo="label";const Oo="group";const Lo="push_mode";const wo="pop_mode";const Do="longer_alt";const $o="line_breaks";const Mo="start_chars_hint";function Fo(e){return Go(e)}function Go(e){const t=e.pattern;const r={};r.name=e.name;v(t)||(r.PATTERN=t);if(A(e,No)){throw"The parent property is no longer supported.\n"+"See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details."}A(e,Po)&&(r.CATEGORIES=e[Po]);mo([r]);A(e,bo)&&(r.LABEL=e[bo]);A(e,Oo)&&(r.GROUP=e[Oo]);A(e,wo)&&(r.POP_MODE=e[wo]);A(e,Lo)&&(r.PUSH_MODE=e[Lo]);A(e,Do)&&(r.LONGER_ALT=e[Do]);A(e,$o)&&(r.LINE_BREAKS=e[$o]);A(e,Mo)&&(r.START_CHARS_HINT=e[Mo]);return r}var Uo=Fo({name:"EOF",pattern:Lexer.NA});mo([Uo]);function Ko(e,t,r,n,o,a,i,s){return{image:t,startOffset:r,endOffset:n,startLine:o,endLine:a,startColumn:i,endColumn:s,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function Vo(e,t){return lo(e,t)}var Bo={buildMismatchTokenMessage({expected:e,actual:t,previous:r,ruleName:n}){const o=So(e);const a=o?`--\x3e ${Eo(e)} <--`:`token of type --\x3e ${e.name} <--`;const i=`Expecting ${a} but found --\x3e '${t.image}' <--`;return i},buildNotAllInputParsedMessage({firstRedundant:e,ruleName:t}){return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:n,ruleName:o}){const a="Expecting: ";const i=P(t).image;const s="\nbut found: '"+i+"'";if(n){return a+n+s}else{let t=I(e,(e,t)=>e.concat(t),[]),r=l(t,e=>`[${l(e,e=>Eo(e)).join(", ")}]`),n=l(r,(e,t)=>`  ${t+1}. ${e}`),o=`one of these possible Token sequences:\n${n.join("\n")}`;return a+o+s}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:n}){const o="Expecting: ";const a=P(t).image;const i="\nbut found: '"+a+"'";if(r){return o+r+i}else{let t=l(e,e=>`[${l(e,e=>Eo(e)).join(",")}]`),r=`expecting at least one iteration which starts with one of these possible Token sequences::\n  `+`<${t.join(" ,")}>`;return o+r+i}}};Object.freeze(Bo);var jo={buildRuleNotFoundError(e,t){const r="Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+"<-\n"+"inside top level rule: ->"+e.name+"<-";return r}};var Wo={buildDuplicateFoundError(e,t){function r(e){if(e instanceof Terminal){return e.terminalType.name}else if(e instanceof NonTerminal){return e.nonTerminalName}else{return""}}const n=e.name;const o=P(t);const a=o.idx;const i=rn(o);const s=r(o);const l=a>0;let c=`->${i}${l?a:""}<- ${s?`with argument: ->${s}<-`:""}\n                  appears more than once (${t.length} times) in the top level rule: ->${n}<-.                  \n                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  `;c=c.replace(/[ \t]+/g," ");c=c.replace(/\s\s+/g,"\n");return c},buildNamespaceConflictError(e){const t=`Namespace conflict found in grammar.\n`+`The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.\n`+`To resolve this make sure each Terminal and Non-Terminal names are unique\n`+`This is easy to accomplish by using the convention that Terminal names start with an uppercase letter\n`+`and Non-Terminal names start with a lower case letter.`;return t},buildAlternationPrefixAmbiguityError(e){const t=l(e.prefixPath,e=>Eo(e)).join(", ");const r=e.alternation.idx===0?"":e.alternation.idx;const n=`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix\n`+`in <OR${r}> inside <${e.topLevelRule.name}> Rule,\n`+`<${t}> may appears as a prefix path in all these alternatives.\n`+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\n`+`For Further details.`;return n},buildAlternationAmbiguityError(e){const t=l(e.prefixPath,e=>Eo(e)).join(", ");const r=e.alternation.idx===0?"":e.alternation.idx;let n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}>`+` inside <${e.topLevelRule.name}> Rule,\n`+`<${t}> may appears as a prefix path in all these alternatives.\n`;n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\n`+`For Further details.`;return n},buildEmptyRepetitionError(e){let t=rn(e.repetition);e.repetition.idx!==0&&(t+=e.repetition.idx);const r=`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.\n`+`This could lead to an infinite loop.`;return r},buildTokenNameError(e){return"deprecated"},buildEmptyAlternationError(e){const t=`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}>`+` in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\n`+`Only the last alternative may be an empty alternative.`;return t},buildTooManyAlternativesError(e){const t=`An Alternation cannot have more than 256 alternatives:\n`+`<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.\n has ${e.alternation.definition.length+1} alternatives.`;return t},buildLeftRecursionError(e){const t=e.topLevelRule.name;const r=l(e.leftRecursionPath,e=>e.name);const n=`${t} --\x3e ${r.concat([t]).join(" --\x3e ")}`;const o=`Left Recursion found in grammar.\n`+`rule: <${t}> can be invoked from itself (directly or indirectly)\n`+`without consuming any Tokens. The grammar path that causes this is: \n ${n}\n`+` To fix this refactor your grammar to remove the left recursion.\n`+`see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`;return o},buildInvalidRuleNameError(e){return"deprecated"},buildDuplicateRuleNameError(e){let t;if(e.topLevelRule instanceof Rule){t=e.topLevelRule.name}else{t=e.topLevelRule}const r=`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`;return r}};function zo(e,t){const r=new GastRefResolverVisitor(e,t);r.resolveRefs();return r.errors}class GastRefResolverVisitor extends GAstVisitor{constructor(e,t){super();this.nameToTopRule=e;this.errMsgProvider=t;this.errors=[]}resolveRefs(){a(_(this.nameToTopRule),e=>{this.currTopLevel=e;e.accept(this)})}visitNonTerminal(e){const t=this.nameToTopRule[e.nonTerminalName];if(!t){let t=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:t,type:4,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}else{e.referencedRule=t}}}class AbstractNextPossibleTokensWalker extends RestWalker{constructor(e,t){super();this.topProd=e;this.path=t;this.possibleTokTypes=[];this.nextProductionName="";this.nextProductionOccurrence=0;this.found=!1;this.isAtEndOfPath=!1}startWalking(){this.found=!1;if(this.path.ruleStack[0]!==this.topProd.name){throw Error("The path does not start with the walker's top Rule!")}this.ruleStack=O(this.path.ruleStack).reverse();this.occurrenceStack=O(this.path.occurrenceStack).reverse();this.ruleStack.pop();this.occurrenceStack.pop();this.updateExpectedNext();this.walk(this.topProd);return this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,r){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let n=t.concat(r);this.updateExpectedNext();this.walk(e.referencedRule,n)}}updateExpectedNext(){if(C(this.ruleStack)){this.nextProductionName="";this.nextProductionOccurrence=0;this.isAtEndOfPath=!0}else{this.nextProductionName=this.ruleStack.pop();this.nextProductionOccurrence=this.occurrenceStack.pop()}}}class NextAfterTokenWalker extends AbstractNextPossibleTokensWalker{constructor(e,t){super(e,t);this.path=t;this.nextTerminalName="";this.nextTerminalOccurrence=0;this.nextTerminalName=this.path.lastTok.name;this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,r){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let e=t.concat(r),n=new Alternative({definition:e});this.possibleTokTypes=on(n);this.found=!0}}}class AbstractNextTerminalAfterProductionWalker extends RestWalker{constructor(t,r){super();this.topRule=t;this.occurrence=r;this.result={token:e,occurrence:e,isEndOfRule:e}}startWalking(){this.walk(this.topRule);return this.result}}class NextTerminalAfterManyWalker extends AbstractNextTerminalAfterProductionWalker{walkMany(t,r,n){if(t.idx===this.occurrence){let t=P(r.concat(n));this.result.isEndOfRule=t===e;if(t instanceof Terminal){this.result.token=t.terminalType;this.result.occurrence=t.idx}}else{super.walkMany(t,r,n)}}}class NextTerminalAfterManySepWalker extends AbstractNextTerminalAfterProductionWalker{walkManySep(t,r,n){if(t.idx===this.occurrence){let t=P(r.concat(n));this.result.isEndOfRule=t===e;if(t instanceof Terminal){this.result.token=t.terminalType;this.result.occurrence=t.idx}}else{super.walkManySep(t,r,n)}}}class NextTerminalAfterAtLeastOneWalker extends AbstractNextTerminalAfterProductionWalker{walkAtLeastOne(t,r,n){if(t.idx===this.occurrence){let t=P(r.concat(n));this.result.isEndOfRule=t===e;if(t instanceof Terminal){this.result.token=t.terminalType;this.result.occurrence=t.idx}}else{super.walkAtLeastOne(t,r,n)}}}class NextTerminalAfterAtLeastOneSepWalker extends AbstractNextTerminalAfterProductionWalker{walkAtLeastOneSep(t,r,n){if(t.idx===this.occurrence){let t=P(r.concat(n));this.result.isEndOfRule=t===e;if(t instanceof Terminal){this.result.token=t.terminalType;this.result.occurrence=t.idx}}else{super.walkAtLeastOneSep(t,r,n)}}}function Ho(e,t,r=[]){r=O(r);let n=[];let o=0;function i(t){return t.concat(m(e,o+1))}function s(e){const o=Ho(i(e),t,r);return n.concat(o)}while(r.length<t&&o<e.length){let t=e[o];if(t instanceof Alternative){return s(t.definition)}else if(t instanceof NonTerminal){return s(t.definition)}else if(t instanceof Option){n=s(t.definition)}else if(t instanceof RepetitionMandatory){let e=t.definition.concat([new Repetition({definition:t.definition})]);return s(e)}else if(t instanceof RepetitionMandatoryWithSeparator){let e=[new Alternative({definition:t.definition}),new Repetition({definition:[new Terminal({terminalType:t.separator})].concat(t.definition)})];return s(e)}else if(t instanceof RepetitionWithSeparator){let e=t.definition.concat([new Repetition({definition:[new Terminal({terminalType:t.separator})].concat(t.definition)})]);n=s(e)}else if(t instanceof Repetition){let e=t.definition.concat([new Repetition({definition:t.definition})]);n=s(e)}else if(t instanceof Alternation){a(t.definition,e=>{C(e.definition)===!1&&(n=s(e.definition))});return n}else if(t instanceof Terminal){r.push(t.terminalType)}else{throw Error("non exhaustive match")}o++}n.push({partialPath:r,suffixDef:m(e,o)});return n}function Xo(e,t,r,n){const o="EXIT_NONE_TERMINAL";const a=[o];const i="EXIT_ALTERNATIVE";let s=!1;const l=t.length;const c=l-n-1;const u=[];const d=[];d.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});while(!C(d)){let e=d.pop();if(e===i){s&&D(d).idx<=c&&d.pop();continue}let n=e.def,p=e.idx,f=e.ruleStack,h=e.occurrenceStack;if(C(n)){continue}let _=n[0];if(_===o){let e={idx:p,def:m(n),ruleStack:$(f),occurrenceStack:$(h)};d.push(e)}else if(_ instanceof Terminal){if(p<l-1){let e=p+1,o=t[e];if(r(o,_.terminalType)){let t={idx:e,def:m(n),ruleStack:f,occurrenceStack:h};d.push(t)}}else if(p===l-1){u.push({nextTokenType:_.terminalType,nextTokenOccurrence:_.idx,ruleStack:f,occurrenceStack:h});s=!0}else{throw Error("non exhaustive match")}}else if(_ instanceof NonTerminal){let e=O(f);e.push(_.nonTerminalName);let t=O(h);t.push(_.idx);let r={idx:p,def:_.definition.concat(a,m(n)),ruleStack:e,occurrenceStack:t};d.push(r)}else if(_ instanceof Option){let e={idx:p,def:m(n),ruleStack:f,occurrenceStack:h};d.push(e);d.push(i);let t={idx:p,def:_.definition.concat(m(n)),ruleStack:f,occurrenceStack:h};d.push(t)}else if(_ instanceof RepetitionMandatory){let e=new Repetition({definition:_.definition,idx:_.idx}),t=_.definition.concat([e],m(n)),r={idx:p,def:t,ruleStack:f,occurrenceStack:h};d.push(r)}else if(_ instanceof RepetitionMandatoryWithSeparator){let e=new Terminal({terminalType:_.separator}),t=new Repetition({definition:[e].concat(_.definition),idx:_.idx}),r=_.definition.concat([t],m(n)),o={idx:p,def:r,ruleStack:f,occurrenceStack:h};d.push(o)}else if(_ instanceof RepetitionWithSeparator){let e={idx:p,def:m(n),ruleStack:f,occurrenceStack:h};d.push(e);d.push(i);let t=new Terminal({terminalType:_.separator}),r=new Repetition({definition:[t].concat(_.definition),idx:_.idx}),o=_.definition.concat([r],m(n)),a={idx:p,def:o,ruleStack:f,occurrenceStack:h};d.push(a)}else if(_ instanceof Repetition){let e={idx:p,def:m(n),ruleStack:f,occurrenceStack:h};d.push(e);d.push(i);let t=new Repetition({definition:_.definition,idx:_.idx}),r=_.definition.concat([t],m(n)),o={idx:p,def:r,ruleStack:f,occurrenceStack:h};d.push(o)}else if(_ instanceof Alternation){for(let e=_.definition.length-1;e>=0;e--){let t=_.definition[e],r={idx:p,def:t.definition.concat(m(n)),ruleStack:f,occurrenceStack:h};d.push(r);d.push(i)}}else if(_ instanceof Alternative){d.push({idx:p,def:_.definition.concat(m(n)),ruleStack:f,occurrenceStack:h})}else if(_ instanceof Rule){d.push(Yo(_,p,f,h))}else{throw Error("non exhaustive match")}}return u}function Yo(e,t,r,n){const o=O(r);o.push(e.name);const a=O(n);a.push(1);return{idx:t,def:e.definition,ruleStack:o,occurrenceStack:a}}var qo={};(function(e){e[e["OPTION"]=0]="OPTION";e[e["REPETITION"]=1]="REPETITION";e[e["REPETITION_MANDATORY"]=2]="REPETITION_MANDATORY";e[e["REPETITION_MANDATORY_WITH_SEPARATOR"]=3]="REPETITION_MANDATORY_WITH_SEPARATOR";e[e["REPETITION_WITH_SEPARATOR"]=4]="REPETITION_WITH_SEPARATOR";e[e["ALTERNATION"]=5]="ALTERNATION"})(qo);function Zo(e){if(e instanceof Option||e==="Option"){return 0}else if(e instanceof Repetition||e==="Repetition"){return 1}else if(e instanceof RepetitionMandatory||e==="RepetitionMandatory"){return 2}else if(e instanceof RepetitionMandatoryWithSeparator||e==="RepetitionMandatoryWithSeparator"){return 3}else if(e instanceof RepetitionWithSeparator||e==="RepetitionWithSeparator"){return 4}else if(e instanceof Alternation||e==="Alternation"){return 5}else{throw Error("non exhaustive match")}}function Jo(e){const{occurrence:t,rule:r,prodType:n,maxLookahead:o}=e;const a=Zo(n);if(a===5){return sa(t,r,o)}else{return la(t,r,a,o)}}function Qo(e,t,r,n,o,a){const i=sa(e,t,r);const s=da(i)?co:lo;return a(i,n,s,o)}function ea(e,t,r,n,o,a){const i=la(e,t,o,r);const s=da(i)?co:lo;return a(i[0],s,n)}function ta(t,r,n,o){const i=t.length;const s=p(t,e=>p(e,e=>e.length===1));if(r){return function(r){const o=l(r,e=>e.GATE);for(let r=0;r<i;r++){let a=t[r],i=a.length,s=o[r];if(s!==e&&s.call(this)===!1){continue}e:for(let e=0;e<i;e++){let t=a[e],o=t.length;for(let e=0;e<o;e++){let r=this.LA(e+1);if(n(r,t[e])===!1){continue e}}return r}}return e}}else if(s&&!o){let e=l(t,e=>h(e)),r=I(e,(e,t,r)=>{a(t,t=>{A(e,t.tokenTypeIdx)||(e[t.tokenTypeIdx]=r);a(t.categoryMatches,t=>{A(e,t)||(e[t]=r)})});return e},{});return function(){const e=this.LA(1);return r[e.tokenTypeIdx]}}else{return function(){for(let e=0;e<i;e++){let r=t[e],o=r.length;e:for(let t=0;t<o;t++){let o=r[t],a=o.length;for(let e=0;e<a;e++){let t=this.LA(e+1);if(n(t,o[e])===!1){continue e}}return e}}return e}}}function ra(e,t,r){const n=p(e,e=>e.length===1);const o=e.length;if(n&&!r){let t=h(e);if(t.length===1&&C(t[0].categoryMatches)){let e=t[0],r=e.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===r}}else{let e=I(t,(e,t,r)=>{e[t.tokenTypeIdx]=!0;a(t.categoryMatches,t=>{e[t]=!0});return e},[]);return function(){const t=this.LA(1);return e[t.tokenTypeIdx]===!0}}}else{return function(){e:for(let r=0;r<o;r++){let n=e[r],o=n.length;for(let e=0;e<o;e++){let r=this.LA(e+1);if(t(r,n[e])===!1){continue e}}return!0}return!1}}}class RestDefinitionFinderWalker extends RestWalker{constructor(e,t,r){super();this.topProd=e;this.targetOccurrence=t;this.targetProdType=r}startWalking(){this.walk(this.topProd);return this.restDef}checkIsTarget(e,t,r,n){if(e.idx===this.targetOccurrence&&this.targetProdType===t){this.restDef=r.concat(n);return!0}return!1}walkOption(e,t,r){this.checkIsTarget(e,qo.OPTION,t,r)||super.walkOption(e,t,r)}walkAtLeastOne(e,t,r){this.checkIsTarget(e,qo.REPETITION_MANDATORY,t,r)||super.walkOption(e,t,r)}walkAtLeastOneSep(e,t,r){this.checkIsTarget(e,qo.REPETITION_MANDATORY_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}walkMany(e,t,r){this.checkIsTarget(e,qo.REPETITION,t,r)||super.walkOption(e,t,r)}walkManySep(e,t,r){this.checkIsTarget(e,qo.REPETITION_WITH_SEPARATOR,t,r)||super.walkOption(e,t,r)}}class InsideDefinitionFinderVisitor extends GAstVisitor{constructor(e,t,r){super();this.targetOccurrence=e;this.targetProdType=t;this.targetRef=r;this.result=[]}checkIsTarget(t,r){t.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===e||t===this.targetRef)&&(this.result=t.definition)}visitOption(e){this.checkIsTarget(e,0)}visitRepetition(e){this.checkIsTarget(e,1)}visitRepetitionMandatory(e){this.checkIsTarget(e,2)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,3)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,4)}visitAlternation(e){this.checkIsTarget(e,5)}}function na(e){const t=new Array(e);for(let r=0;r<e;r++){t[r]=[]}return t}function oa(e){let t=[""];for(let r=0;r<e.length;r++){let n=e[r],o=[];for(let e=0;e<t.length;e++){let r=t[e];o.push(r+"_"+n.tokenTypeIdx);for(let e=0;e<n.categoryMatches.length;e++){let t="_"+n.categoryMatches[e];o.push(r+t)}}t=o}return t}function aa(e,t,r){for(let n=0;n<e.length;n++){if(n===r){continue}let o=e[n];for(let e=0;e<t.length;e++){let r=t[e];if(o[r]===!0){return!1}}}return!0}function ia(e,t){const r=l(e,e=>Ho([e],1));const n=na(r.length);const o=l(r,e=>{const t={};a(e,e=>{const r=oa(e.partialPath);a(r,e=>{t[e]=!0})});return t});let i=r;for(let e=1;e<=t;e++){let r=i;i=na(r.length);for(let s=0;s<r.length;s++){let l=r[s];for(let r=0;r<l.length;r++){let c=l[r].partialPath,u=l[r].suffixDef,d=oa(c),p=aa(o,d,s);if(p||C(u)||c.length===t){let e=n[s];if(ca(e,c)===!1){e.push(c);for(let e=0;e<d.length;e++){let t=d[e];o[s][t]=!0}}}else{let t=Ho(u,e+1,c);i[s]=i[s].concat(t);a(t,e=>{const t=oa(e.partialPath);a(t,e=>{o[s][e]=!0})})}}}}return n}function sa(e,t,r,n){const o=new InsideDefinitionFinderVisitor(e,5,n);t.accept(o);return ia(o.result,r)}function la(e,t,r,n){const o=new InsideDefinitionFinderVisitor(e,r);t.accept(o);const a=o.result;const i=new RestDefinitionFinderWalker(t,e,r);const s=i.startWalking();const l=new Alternative({definition:a});const c=new Alternative({definition:s});return ia([l,c],n)}function ca(t,r){e:for(let n=0;n<t.length;n++){let o=t[n];if(o.length!==r.length){continue}for(let t=0;t<o.length;t++){let n=r[t],a=o[t],i=n===a||a.categoryMatchesMap[n.tokenTypeIdx]!==e;if(i===!1){continue e}}return!0}return!1}function ua(e,t){return e.length<t.length&&p(e,(e,r)=>{const n=t[r];return e===n||n.categoryMatchesMap[e.tokenTypeIdx]})}function da(e){return p(e,e=>p(e,e=>p(e,e=>C(e.categoryMatches))))}function pa(e){const t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return l(t,e=>Object.assign({type:13},e))}function ma(e,t,r,n){const o=M(e,e=>fa(e,r));const a=Ea(e,t,r);const i=M(e,e=>Ra(e,r));const s=M(e,t=>ga(t,e,n,r));return o.concat(a,i,s)}function fa(e,t){const r=new OccurrenceValidationCollector;e.accept(r);const n=r.allProductions;const o=F(n,ha);const a=s(o,e=>e.length>1);const i=l(_(a),r=>{const n=P(r);const o=t.buildDuplicateFoundError(e,r);const a=rn(n);const i={message:o,type:3,ruleName:e.name,dslName:a,occurrence:n.idx};const s=_a(n);s&&(i.parameter=s);return i});return i}function ha(e){return`${rn(e)}_#_${e.idx}_#_${_a(e)}`}function _a(e){if(e instanceof Terminal){return e.terminalType.name}else if(e instanceof NonTerminal){return e.nonTerminalName}else{return""}}class OccurrenceValidationCollector extends GAstVisitor{constructor(){super(...arguments);this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}}function ga(e,t,r,n){const o=[];const a=I(t,(t,r)=>{if(r.name===e.name){return t+1}return t},0);if(a>1){let t=n.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});o.push({message:t,type:1,ruleName:e.name})}return o}function ya(e,t,r){const n=[];let o;if(!d(t,e)){o=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-`+`as it is not defined in any of the super grammars `;n.push({message:o,type:2,ruleName:e})}return n}function xa(e,t,r,n=[]){const o=[];const a=Ta(t.definition);if(C(a)){return[]}else{let t=e.name,i=d(a,e);i&&o.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:n}),type:5,ruleName:t});let s=S(a,n.concat([e])),l=M(s,t=>{const o=O(n);o.push(t);return xa(e,t,r,o)});return o.concat(l)}}function Ta(e){let t=[];if(C(e)){return t}const r=P(e);if(r instanceof NonTerminal){t.push(r.referencedRule)}else if(r instanceof Alternative||r instanceof Option||r instanceof RepetitionMandatory||r instanceof RepetitionMandatoryWithSeparator||r instanceof RepetitionWithSeparator||r instanceof Repetition){t=t.concat(Ta(r.definition))}else if(r instanceof Alternation){t=h(l(r.definition,e=>Ta(e.definition)))}else if(r instanceof Terminal){}else{throw Error("non exhaustive match")}const n=en(r);const o=e.length>1;if(n&&o){let r=m(e);return t.concat(Ta(r))}else{return t}}class OrCollector extends GAstVisitor{constructor(){super(...arguments);this.alternations=[]}visitAlternation(e){this.alternations.push(e)}}function ka(e,t){const r=new OrCollector;e.accept(r);const n=r.alternations;const o=M(n,r=>{const n=$(r.definition);return M(n,(n,o)=>{const a=Xo([n],[],lo,1);if(C(a)){return[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:r,emptyChoiceIdx:o}),type:6,ruleName:e.name,occurrence:r.idx,alternative:o+1}]}else{return[]}})});return o}function va(e,t,r){const n=new OrCollector;e.accept(n);let o=n.alternations;o=T(o,e=>e.ignoreAmbiguities===!0);const a=M(o,n=>{const o=n.idx;const a=n.maxLookahead||t;const i=sa(o,e,a,n);const s=Ia(i,n,e,r);const l=Ca(i,n,e,r);return s.concat(l)});return a}class RepetitionCollector extends GAstVisitor{constructor(){super(...arguments);this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}}function Ra(e,t){const r=new OrCollector;e.accept(r);const n=r.alternations;const o=M(n,r=>{if(r.definition.length>255){return[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:r}),type:12,ruleName:e.name,occurrence:r.idx}]}else{return[]}});return o}function Aa(e,t,r){const n=[];a(e,e=>{const o=new RepetitionCollector;e.accept(o);const i=o.allProductions;a(i,o=>{const a=Zo(o);const i=o.maxLookahead||t;const s=o.idx;const l=la(s,e,a,i)
const c=l[0];if(C(h(c))){let t=r.buildEmptyRepetitionError({topLevelRule:e,repetition:o});n.push({message:t,type:10,ruleName:e.name})}})});return n}function Ia(e,t,r,n){const o=[];const i=I(e,(r,n,i)=>{if(t.definition[i].ignoreAmbiguities===!0){return r}a(n,n=>{const s=[i];a(e,(e,r)=>{i!==r&&ca(e,n)&&t.definition[r].ignoreAmbiguities!==!0&&s.push(r)});if(s.length>1&&!ca(o,n)){o.push(n);r.push({alts:s,path:n})}});return r},[]);const s=l(i,e=>{const o=l(e.alts,e=>e+1);const a=n.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:o,prefixPath:e.path});return{message:a,type:7,ruleName:r.name,occurrence:t.idx,alternatives:e.alts}});return s}function Ca(e,t,r,n){const o=I(e,(e,t,r)=>{const n=l(t,e=>({idx:r,path:e}));return e.concat(n)},[]);const a=N(M(o,e=>{const a=t.definition[e.idx];if(a.ignoreAmbiguities===!0){return[]}const i=e.idx;const s=e.path;const c=E(o,e=>t.definition[e.idx].ignoreAmbiguities!==!0&&e.idx<i&&ua(e.path,s));const u=l(c,e=>{const o=[e.idx+1,i+1];const a=t.idx===0?"":t.idx;const s=n.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:o,prefixPath:e.path});return{message:s,type:11,ruleName:r.name,occurrence:a,alternatives:o}});return u}));return a}function Ea(e,t,r){const n=[];const o=l(t,e=>e.name);a(e,e=>{const t=e.name;if(d(o,t)){let o=r.buildNamespaceConflictError(e);n.push({message:o,type:8,ruleName:t})}});return n}function Sa(e){const t=x(e,{errMsgProvider:jo});const r={};a(e.rules,e=>{r[e.name]=e});return zo(r,t.errMsgProvider)}function Na(e){e=x(e,{errMsgProvider:Wo});return ma(e.rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}const Pa="MismatchedTokenException";const ba="NoViableAltException";const Oa="EarlyExitException";const La="NotAllInputParsedException";const wa=[Pa,ba,Oa,La];Object.freeze(wa);function Da(e){return d(wa,e.name)}class RecognitionException extends Error{constructor(e,t){super(e);this.token=t;this.resyncedTokens=[];Object.setPrototypeOf(this,new.target.prototype);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}class MismatchedTokenException extends RecognitionException{constructor(e,t,r){super(e,t);this.previousToken=r;this.name=Pa}}class NoViableAltException extends RecognitionException{constructor(e,t,r){super(e,t);this.previousToken=r;this.name=ba}}class NotAllInputParsedException extends RecognitionException{constructor(e,t){super(e,t);this.name=La}}class EarlyExitException extends RecognitionException{constructor(e,t,r){super(e,t);this.previousToken=r;this.name=Oa}}var $a={};var Ma="InRuleRecoveryException";class InRuleRecoveryException extends Error{constructor(e){super(e);this.name=Ma}}class Recoverable{initRecoverable(e){this.firstAfterRepMap={};this.resyncFollows={};this.recoveryEnabled=A(e,"recoveryEnabled")?e.recoveryEnabled:xi.recoveryEnabled;this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Fa)}getTokenToInsert(e){const t=Ko(e,"",NaN,NaN,NaN,NaN,NaN,NaN);t.isInsertedInRecovery=!0;return t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,r,n){const o=this.findReSyncTokenType();const a=this.exportLexerState();const i=[];let s=!1;const l=this.LA(1);let c=this.LA(1);const u=()=>{const e=this.LA(0);const t=this.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:l,previous:e,ruleName:this.getCurrRuleFullName()});const r=new MismatchedTokenException(t,l,this.LA(0));r.resyncedTokens=$(i);this.SAVE_ERROR(r)};while(!s){if(this.tokenMatcher(c,n)){u();return}else if(r.call(this)){u();e.apply(this,t);return}else if(this.tokenMatcher(c,o)){s=!0}else{c=this.SKIP_TOKEN();this.addToResyncTokens(c,i)}}this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,t,r){if(r===!1){return!1}if(this.tokenMatcher(this.LA(1),e)){return!1}if(this.isBackTracking()){return!1}if(this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t))){return!1}return!0}getFollowsForInRuleRecovery(e,t){const r=this.getCurrentGrammarPath(e,t);const n=this.getNextPossibleTokenTypes(r);return n}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t)){let t=this.getTokenToInsert(e);return t}if(this.canRecoverWithSingleTokenDeletion(e)){let e=this.SKIP_TOKEN();this.consumeToken();return e}throw new InRuleRecoveryException("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(t,r){if(!this.canTokenTypeBeInsertedInRecovery(t)){return!1}if(C(r)){return!1}const n=this.LA(1);const o=g(r,e=>this.tokenMatcher(n,e))!==e;return o}canRecoverWithSingleTokenDeletion(e){if(!this.canTokenTypeBeDeletedInRecovery(e)){return!1}const t=this.tokenMatcher(this.LA(2),e);return t}isInCurrentRuleReSyncSet(e){const t=this.getCurrFollowKey();const r=this.getFollowSetFromFollowKey(t);return d(r,e)}findReSyncTokenType(){const t=this.flattenFollowSet();let r=this.LA(1);let n=2;while(!0){let o=g(t,e=>{const t=Vo(r,e);return t});if(o!==e){return o}r=this.LA(n);n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1){return $a}const e=this.getLastExplicitRuleShortName();const t=this.getLastExplicitRuleOccurrenceIndex();const r=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(r)}}buildFullFollowKeyStack(){const e=this.RULE_STACK;const t=this.RULE_OCCURRENCE_STACK;return l(e,(r,n)=>{if(n===0){return $a}return{ruleName:this.shortRuleNameToFullName(r),idxInCallingRule:t[n],inRule:this.shortRuleNameToFullName(e[n-1])}})}flattenFollowSet(){const e=l(this.buildFullFollowKeyStack(),e=>this.getFollowSetFromFollowKey(e));return h(e)}getFollowSetFromFollowKey(e){if(e===$a){return[Uo]}const t=e.ruleName+e.idxInCallingRule+cn+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){this.tokenMatcher(e,Uo)||t.push(e);return t}reSyncTo(e){const t=[];let r=this.LA(1);while(this.tokenMatcher(r,e)===!1){r=this.SKIP_TOKEN();this.addToResyncTokens(r,t)}return $(t)}attemptInRepetitionRecovery(e,t,r,n,o,a,i){}getCurrentGrammarPath(e,t){const r=this.getHumanReadableRuleStack();const n=O(this.RULE_OCCURRENCE_STACK);const o={ruleStack:r,occurrenceStack:n,lastTok:e,lastTokOccurrence:t};return o}getHumanReadableRuleStack(){return l(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}}function Fa(t,r,n,o,a,i,s){const l=this.getKeyForAutomaticLookahead(o,a);let c=this.firstAfterRepMap[l];if(c===e){let e=this.getCurrRuleFullName(),t=this.getGAstProductions()[e],r=new i(t,a);c=r.startWalking();this.firstAfterRepMap[l]=c}let u=c.token;let d=c.occurrence;const p=c.isEndOfRule;if(this.RULE_STACK.length===1&&p&&u===e){u=Uo;d=1}if(u===e||d===e){return}this.shouldInRepetitionRecoveryBeTried(u,d,s)&&this.tryInRepetitionRecovery(t,r,n,u)}var Ga=4;var Ua=8;var Ka=1<<Ua;var Va=2<<Ua;var Ba=3<<Ua;var ja=4<<Ua;var Wa=5<<Ua;var za=6<<Ua;function Ha(e,t,r){return r|t|e}class LLkLookaheadStrategy{constructor(e){var t;this.maxLookahead=(t=e===null||e===void 0?void 0:e.maxLookahead)!==null&&t!==void 0?t:xi.maxLookahead}validate(e){const t=this.validateNoLeftRecursion(e.rules);if(C(t)){let r=this.validateEmptyOrAlternatives(e.rules),n=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),o=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead),a=[...t,...r,...n,...o];return a}return t}validateNoLeftRecursion(e){return M(e,e=>xa(e,e,Wo))}validateEmptyOrAlternatives(e){return M(e,e=>ka(e,Wo))}validateAmbiguousAlternationAlternatives(e,t){return M(e,e=>va(e,t,Wo))}validateSomeNonEmptyLookaheadPath(e,t){return Aa(e,t,Wo)}buildLookaheadForAlternation(e){return Qo(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,ta)}buildLookaheadForOptional(e){return ea(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Zo(e.prodType),ra)}}class LooksAhead{initLooksAhead(e){this.dynamicTokensEnabled=A(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:xi.dynamicTokensEnabled;this.maxLookahead=A(e,"maxLookahead")?e.maxLookahead:xi.maxLookahead;this.lookaheadStrategy=A(e,"lookaheadStrategy")?e.lookaheadStrategy:new LLkLookaheadStrategy({maxLookahead:this.maxLookahead});this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){a(e,e=>{this.TRACE_INIT(`${e.name} Rule Lookahead`,()=>{const{alternation:t,repetition:r,option:n,repetitionMandatory:o,repetitionMandatoryWithSeparator:i,repetitionWithSeparator:s}=Ya(e);a(t,t=>{const r=t.idx===0?"":t.idx;this.TRACE_INIT(`${rn(t)}${r}`,()=>{const r=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:t.idx,rule:e,maxLookahead:t.maxLookahead||this.maxLookahead,hasPredicates:t.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled});const n=Ha(this.fullRuleNameToShort[e.name],Ka,t.idx);this.setLaFuncCache(n,r)})});a(r,t=>{this.computeLookaheadFunc(e,t.idx,Ba,"Repetition",t.maxLookahead,rn(t))});a(n,t=>{this.computeLookaheadFunc(e,t.idx,Va,"Option",t.maxLookahead,rn(t))});a(o,t=>{this.computeLookaheadFunc(e,t.idx,ja,"RepetitionMandatory",t.maxLookahead,rn(t))});a(i,t=>{this.computeLookaheadFunc(e,t.idx,za,"RepetitionMandatoryWithSeparator",t.maxLookahead,rn(t))});a(s,t=>{this.computeLookaheadFunc(e,t.idx,Wa,"RepetitionWithSeparator",t.maxLookahead,rn(t))})})})}computeLookaheadFunc(e,t,r,n,o,a){this.TRACE_INIT(`${a}${t===0?"":t}`,()=>{const a=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:o||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:n});const i=Ha(this.fullRuleNameToShort[e.name],r,t);this.setLaFuncCache(i,a)})}getKeyForAutomaticLookahead(e,t){const r=this.getLastExplicitRuleShortName();return Ha(r,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}}class DslMethodsCollectorVisitor extends GAstVisitor{constructor(){super(...arguments);this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}}const Xa=new DslMethodsCollectorVisitor;function Ya(e){Xa.reset();e.accept(Xa);const t=Xa.dslMethods;Xa.reset();return t}function qa(e,t){if(isNaN(e.startOffset)===!0){e.startOffset=t.startOffset;e.endOffset=t.endOffset}else e.endOffset<t.endOffset===!0&&(e.endOffset=t.endOffset)}function Za(e,t){if(isNaN(e.startOffset)===!0){e.startOffset=t.startOffset;e.startColumn=t.startColumn;e.startLine=t.startLine;e.endOffset=t.endOffset;e.endColumn=t.endColumn;e.endLine=t.endLine}else if(e.endOffset<t.endOffset===!0){e.endOffset=t.endOffset;e.endColumn=t.endColumn;e.endLine=t.endLine}}function Ja(t,r,n){if(t.children[n]===e){t.children[n]=[r]}else{t.children[n].push(r)}}function Qa(t,r,n){if(t.children[r]===e){t.children[r]=[n]}else{t.children[r].push(n)}}const ei="name";function ti(e,t){Object.defineProperty(e,ei,{enumerable:!1,configurable:!0,writable:!1,value:t})}function ri(t,r){const n=b(t);const o=n.length;for(let a=0;a<o;a++){let o=n[a],i=t[o],s=i.length;for(let t=0;t<s;t++){let n=i[t];n.tokenTypeIdx===e&&this[n.name](n.children,r)}}}function ni(t,r){const n=function(){};ti(n,t+"BaseSemantics");const o={visit:function(t,r){y(t)&&(t=t[0]);if(v(t)){return e}return this[t.name](t.children,r)},validateVisitor:function(){const e=ai(this,r);if(!C(e)){let t=l(e,e=>e.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:\n\t`+`${t.join("\n\n").replace(/\n/g,"\n\t")}`)}}};n.prototype=o;n.prototype.constructor=n;n._RULE_NAMES=r;return n}function oi(e,t,r){const n=function(){};ti(n,e+"BaseSemanticsWithDefaults");const o=Object.create(r.prototype);a(t,e=>{o[e]=ri});n.prototype=o;n.prototype.constructor=n;return n}function ai(e,t){const r=ii(e,t);return r}function ii(e,t){const r=E(t,t=>k(e[t])===!1);const n=l(r,t=>({msg:`Missing visitor method: <${t}> on ${e.constructor.name} CST Visitor.`,type:1,methodName:t}));return N(n)}class TreeBuilder{initTreeBuilder(e){this.CST_STACK=[];this.outputCst=e.outputCst;this.nodeLocationTracking=A(e,"nodeLocationTracking")?e.nodeLocationTracking:xi.nodeLocationTracking;if(!this.outputCst){this.cstInvocationStateUpdate=w;this.cstFinallyStateUpdate=w;this.cstPostTerminal=w;this.cstPostNonTerminal=w;this.cstPostRule=w}else{if(/full/i.test(this.nodeLocationTracking)){if(this.recoveryEnabled){this.setNodeLocationFromToken=Za;this.setNodeLocationFromNode=Za;this.cstPostRule=w;this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery}else{this.setNodeLocationFromToken=w;this.setNodeLocationFromNode=w;this.cstPostRule=this.cstPostRuleFull;this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular}}else if(/onlyOffset/i.test(this.nodeLocationTracking)){if(this.recoveryEnabled){this.setNodeLocationFromToken=qa;this.setNodeLocationFromNode=qa;this.cstPostRule=w;this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery}else{this.setNodeLocationFromToken=w;this.setNodeLocationFromNode=w;this.cstPostRule=this.cstPostRuleOnlyOffset;this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular}}else if(/none/i.test(this.nodeLocationTracking)){this.setNodeLocationFromToken=w;this.setNodeLocationFromNode=w;this.cstPostRule=w;this.setInitialNodeLocation=w}else{throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}}}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){const t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){const t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t);this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){const t=this.LA(0);const r=e.location;if(r.startOffset<=t.startOffset===!0){r.endOffset=t.endOffset;r.endLine=t.endLine;r.endColumn=t.endColumn}else{r.startOffset=NaN;r.startLine=NaN;r.startColumn=NaN}}cstPostRuleOnlyOffset(e){const t=this.LA(0);const r=e.location;if(r.startOffset<=t.startOffset===!0){r.endOffset=t.endOffset}else{r.startOffset=NaN}}cstPostTerminal(e,t){const r=this.CST_STACK[this.CST_STACK.length-1];Ja(r,t,e);this.setNodeLocationFromToken(r.location,t)}cstPostNonTerminal(e,t){const r=this.CST_STACK[this.CST_STACK.length-1];Qa(r,t,e);this.setNodeLocationFromNode(r.location,e.location)}getBaseCstVisitorConstructor(){if(v(this.baseCstVisitorConstructor)){let e=ni(this.className,b(this.gastProductionsCache));this.baseCstVisitorConstructor=e;return e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(v(this.baseCstVisitorWithDefaultsConstructor)){let e=oi(this.className,b(this.gastProductionsCache),this.getBaseCstVisitorConstructor());this.baseCstVisitorWithDefaultsConstructor=e;return e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){const e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){const e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}}class LexerAdapter{initLexerAdapter(){this.tokVector=[];this.tokVectorLength=0;this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0){throw Error(`Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.`)}this.reset();this.tokVector=e;this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){if(this.currIdx<=this.tokVector.length-2){this.consumeToken();return this.LA(1)}else{return yi}}LA(e){const t=this.currIdx+e;if(t<0||this.tokVectorLength<=t){return yi}else{return this.tokVector[t]}}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}}class RecognizerApi{ACTION(e){return e.call(this)}consume(e,t,r){return this.consumeInternal(t,e,r)}subrule(e,t,r){return this.subruleInternal(t,e,r)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,r=Ti){if(d(this.definedRulesNames,e)){let t=Wo.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),r={message:t,type:1,ruleName:e};this.definitionErrors.push(r)}this.definedRulesNames.push(e);const n=this.defineRule(e,t,r);this[e]=n;return n}OVERRIDE_RULE(e,t,r=Ti){const n=ya(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(n);const o=this.defineRule(e,t,r);this[e]=o;return o}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);const r=this.saveRecogState();try{e.apply(this,t);return!0}catch(e){if(Da(e)){return!1}else{throw e}}finally{this.reloadRecogState(r);this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return Zr(_(this.gastProductionsCache))}}class RecognizerEngine{initRecognizerEngine(e,t){this.className=this.constructor.name;this.shortRuleNameToFull={};this.fullRuleNameToShort={};this.ruleShortNameIdx=256;this.tokenMatcher=co;this.subruleIdx=0;this.definedRulesNames=[];this.tokensMap={};this.isBackTrackingStack=[];this.RULE_STACK=[];this.RULE_OCCURRENCE_STACK=[];this.gastProductionsCache={};if(A(t,"serializedGrammar")){throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n"+"\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0\n"+"\tFor Further details.")}if(y(e)){if(C(e)){throw Error("A Token Vocabulary cannot be empty.\n"+"\tNote that the first argument for the parser constructor\n"+"\tis no longer a Token vector (since v4.0).")}if(typeof e[0].startOffset==="number"){throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n"+"\tSee: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0\n"+"\tFor Further details.")}}if(y(e)){this.tokensMap=I(e,(e,t)=>{e[t.name]=t;return e},{})}else if(A(e,"modes")&&p(h(_(e.modes)),Ro)){let t=h(_(e.modes)),r=f(t);this.tokensMap=I(r,(e,t)=>{e[t.name]=t;return e},{})}else if(G(e)){this.tokensMap=O(e)}else{throw new Error("<tokensDictionary> argument must be An Array of Token constructors,"+" A dictionary of Token constructors or an IMultiModeLexerDefinition")}this.tokensMap["EOF"]=Uo;const r=A(e,"modes")?h(_(e.modes)):_(e);const n=p(r,e=>C(e.categoryMatches));this.tokenMatcher=n?co:lo;mo(_(this.tokensMap))}defineRule(e,t,r){if(this.selfAnalysisDone){throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'\n`+`Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`)}const n=A(r,"resyncEnabled")?r.resyncEnabled:Ti.resyncEnabled;const o=A(r,"recoveryValueFunc")?r.recoveryValueFunc:Ti.recoveryValueFunc;const a=this.ruleShortNameIdx<<Ga+Ua;this.ruleShortNameIdx++;this.shortRuleNameToFull[a]=e;this.fullRuleNameToShort[e]=a;let i;if(this.outputCst===!0){i=function r(...i){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx);t.apply(this,i);let r=this.CST_STACK[this.CST_STACK.length-1];this.cstPostRule(r);return r}catch(e){return this.invokeRuleCatch(e,n,o)}finally{this.ruleFinallyStateUpdate()}}}else{i=function r(...i){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx);return t.apply(this,i)}catch(e){return this.invokeRuleCatch(e,n,o)}finally{this.ruleFinallyStateUpdate()}}}const s=Object.assign(i,{ruleName:e,originalGrammarAction:t});return s}invokeRuleCatch(e,t,r){const n=this.RULE_STACK.length===1;const o=t&&!this.isBackTracking()&&this.recoveryEnabled;if(Da(e)){let t=e;if(o){let n=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(n)){t.resyncedTokens=this.reSyncTo(n);if(this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0;return e}else{return r(e)}}else{if(this.outputCst){let e=this.CST_STACK[this.CST_STACK.length-1];e.recoveredNode=!0;t.partialCstResult=e}throw t}}else if(n){this.moveToTerminatedState();return r(e)}else{throw t}}else{throw e}}optionInternal(e,t){const r=this.getKeyForAutomaticLookahead(Va,t);return this.optionInternalLogic(e,t,r)}optionInternalLogic(t,r,n){let o=this.getLaFuncFromCache(n);let a;if(typeof t!=="function"){a=t.DEF;let r=t.GATE;if(r!==e){let e=o;o=(()=>r.call(this)&&e.call(this))}}else{a=t}if(o.call(this)===!0){return a.call(this)}return e}atLeastOneInternal(e,t){const r=this.getKeyForAutomaticLookahead(ja,e);return this.atLeastOneInternalLogic(e,t,r)}atLeastOneInternalLogic(t,r,n){let o=this.getLaFuncFromCache(n);let a;if(typeof r!=="function"){a=r.DEF;let t=r.GATE;if(t!==e){let e=o;o=(()=>t.call(this)&&e.call(this))}}else{a=r}if(o.call(this)===!0){let e=this.doSingleRepetition(a);while(o.call(this)===!0&&e===!0){e=this.doSingleRepetition(a)}}else{throw this.raiseEarlyExitException(t,2,r.ERR_MSG)}this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,r],o,ja,t,NextTerminalAfterAtLeastOneWalker)}atLeastOneSepFirstInternal(e,t){const r=this.getKeyForAutomaticLookahead(za,e);this.atLeastOneSepFirstInternalLogic(e,t,r)}atLeastOneSepFirstInternalLogic(e,t,r){const n=t.DEF;const o=t.SEP;const a=this.getLaFuncFromCache(r);if(a.call(this)===!0){n.call(this);let t=()=>this.tokenMatcher(this.LA(1),o);while(this.tokenMatcher(this.LA(1),o)===!0){this.CONSUME(o);n.call(this)}this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,t,n,NextTerminalAfterAtLeastOneSepWalker],t,za,e,NextTerminalAfterAtLeastOneSepWalker)}else{throw this.raiseEarlyExitException(e,3,t.ERR_MSG)}}manyInternal(e,t){const r=this.getKeyForAutomaticLookahead(Ba,e);return this.manyInternalLogic(e,t,r)}manyInternalLogic(t,r,n){let o=this.getLaFuncFromCache(n);let a;if(typeof r!=="function"){a=r.DEF;let t=r.GATE;if(t!==e){let e=o;o=(()=>t.call(this)&&e.call(this))}}else{a=r}let i=!0;while(o.call(this)===!0&&i===!0){i=this.doSingleRepetition(a)}this.attemptInRepetitionRecovery(this.manyInternal,[t,r],o,Ba,t,NextTerminalAfterManyWalker,i)}manySepFirstInternal(e,t){const r=this.getKeyForAutomaticLookahead(Wa,e);this.manySepFirstInternalLogic(e,t,r)}manySepFirstInternalLogic(e,t,r){const n=t.DEF;const o=t.SEP;const a=this.getLaFuncFromCache(r);if(a.call(this)===!0){n.call(this);let t=()=>this.tokenMatcher(this.LA(1),o);while(this.tokenMatcher(this.LA(1),o)===!0){this.CONSUME(o);n.call(this)}this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,o,t,n,NextTerminalAfterManySepWalker],t,Wa,e,NextTerminalAfterManySepWalker)}}repetitionSepSecondInternal(e,t,r,n,o){while(r()){this.CONSUME(t);n.call(this)}this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,r,n,o],r,za,e,o)}doSingleRepetition(e){const t=this.getLexerPosition();e.call(this);const r=this.getLexerPosition();return r>t}orInternal(t,r){const n=this.getKeyForAutomaticLookahead(Ka,r);const o=y(t)?t:t.DEF;const a=this.getLaFuncFromCache(n);const i=a.call(this,o);if(i!==e){let e=o[i];return e.ALT.call(this)}this.raiseNoAltException(r,t.ERR_MSG)}ruleFinallyStateUpdate(){this.RULE_STACK.pop();this.RULE_OCCURRENCE_STACK.pop();this.cstFinallyStateUpdate();if(this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new NotAllInputParsedException(t,e))}}subruleInternal(t,r,n){let o;try{let a=n!==e?n.ARGS:e;this.subruleIdx=r;o=t.apply(this,a);this.cstPostNonTerminal(o,n!==e&&n.LABEL!==e?n.LABEL:t.ruleName);return o}catch(e){throw this.subruleInternalError(e,n,t.ruleName)}}subruleInternalError(t,r,n){if(Da(t)&&t.partialCstResult!==e){this.cstPostNonTerminal(t.partialCstResult,r!==e&&r.LABEL!==e?r.LABEL:n);delete t.partialCstResult}throw t}consumeInternal(t,r,n){let o;try{let e=this.LA(1);if(this.tokenMatcher(e,t)===!0){this.consumeToken();o=e}else{this.consumeInternalError(t,e,n)}}catch(e){o=this.consumeInternalRecovery(t,r,e)}this.cstPostTerminal(n!==e&&n.LABEL!==e?n.LABEL:t.name,o);return o}consumeInternalError(t,r,n){let o;const a=this.LA(0);if(n!==e&&n.ERR_MSG){o=n.ERR_MSG}else{o=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:r,previous:a,ruleName:this.getCurrRuleFullName()})}throw this.SAVE_ERROR(new MismatchedTokenException(o,r,a))}consumeInternalRecovery(e,t,r){if(this.recoveryEnabled&&r.name==="MismatchedTokenException"&&!this.isBackTracking()){let n=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,n)}catch(e){if(e.name===Ma){throw r}else{throw e}}}else{throw r}}saveRecogState(){const e=this.errors;const t=O(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors;this.importLexerState(e.lexerState);this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,r){this.RULE_OCCURRENCE_STACK.push(r);this.RULE_STACK.push(e);this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){const e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Uo)}reset(){this.resetLexerState();this.subruleIdx=0;this.isBackTrackingStack=[];this.errors=[];this.RULE_STACK=[];this.CST_STACK=[];this.RULE_OCCURRENCE_STACK=[]}}class ErrorHandler{initErrorHandler(e){this._errors=[];this.errorMessageProvider=A(e,"errorMessageProvider")?e.errorMessageProvider:xi.errorMessageProvider}SAVE_ERROR(e){if(Da(e)){e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:O(this.RULE_OCCURRENCE_STACK)};this._errors.push(e);return e}else{throw Error("Trying to save an Error which is not a RecognitionException")}}get errors(){return O(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,r){const n=this.getCurrRuleFullName();const o=this.getGAstProductions()[n];const a=la(e,o,t,this.maxLookahead);const i=a[0];const s=[];for(let e=1;e<=this.maxLookahead;e++){s.push(this.LA(e))}const l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:s,previous:this.LA(0),customUserDescription:r,ruleName:n});throw this.SAVE_ERROR(new EarlyExitException(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){const r=this.getCurrRuleFullName();const n=this.getGAstProductions()[r];const o=sa(e,n,this.maxLookahead);const a=[];for(let e=1;e<=this.maxLookahead;e++){a.push(this.LA(e))}const i=this.LA(0);const s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:o,actual:a,previous:i,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new NoViableAltException(s,this.LA(1),i))}}class ContentAssist{initContentAssist(){}computeContentAssist(e,t){const r=this.gastProductionsCache[e];if(v(r)){throw Error(`Rule ->${e}<- does not exist in this grammar.`)}return Xo([r],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){const t=P(e.ruleStack);const r=this.getGAstProductions();const n=r[t];const o=new NextAfterTokenWalker(n,e).startWalking();return o}}const si={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(si);const li=!0;const ci=Math.pow(2,Ua)-1;const ui=Fo({name:"RECORDING_PHASE_TOKEN",pattern:Lexer.NA});mo([ui]);const di=Ko(ui,"This IToken indicates the Parser is in Recording Phase\n\t"+""+"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(di)
const pi={name:"This CSTNode indicates the Parser is in Recording Phase\n\t"+"See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details",children:{}};class GastRecorder{initGastRecorder(e){this.recordingProdStack=[];this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0;this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let t=e>0?e:"";this[`CONSUME${t}`]=function(t,r){return this.consumeInternalRecord(t,e,r)};this[`SUBRULE${t}`]=function(t,r){return this.subruleInternalRecord(t,e,r)};this[`OPTION${t}`]=function(t){return this.optionInternalRecord(t,e)};this[`OR${t}`]=function(t){return this.orInternalRecord(t,e)};this[`MANY${t}`]=function(t){this.manyInternalRecord(e,t)};this[`MANY_SEP${t}`]=function(t){this.manySepFirstInternalRecord(e,t)};this[`AT_LEAST_ONE${t}`]=function(t){this.atLeastOneInternalRecord(e,t)};this[`AT_LEAST_ONE_SEP${t}`]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}}this[`consume`]=function(e,t,r){return this.consumeInternalRecord(t,e,r)};this[`subrule`]=function(e,t,r){return this.subruleInternalRecord(t,e,r)};this[`option`]=function(e,t){return this.optionInternalRecord(t,e)};this[`or`]=function(e,t){return this.orInternalRecord(t,e)};this[`many`]=function(e,t){this.manyInternalRecord(e,t)};this[`atLeastOne`]=function(e,t){this.atLeastOneInternalRecord(e,t)};this.ACTION=this.ACTION_RECORD;this.BACKTRACK=this.BACKTRACK_RECORD;this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1;this.TRACE_INIT("Deleting Recording methods",()=>{const e=this;for(let t=0;t<10;t++){let r=t>0?t:"";delete e[`CONSUME${r}`];delete e[`SUBRULE${r}`];delete e[`OPTION${r}`];delete e[`OR${r}`];delete e[`MANY${r}`];delete e[`MANY_SEP${r}`];delete e[`AT_LEAST_ONE${r}`];delete e[`AT_LEAST_ONE_SEP${r}`]}delete e[`consume`];delete e[`subrule`];delete e[`option`];delete e[`or`];delete e[`many`];delete e[`atLeastOne`];delete e.ACTION;delete e.BACKTRACK;delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return yi}topLevelRuleRecord(e,t){try{let r=new Rule({definition:[],name:e});r.name=e;this.recordingProdStack.push(r);t.call(this);this.recordingProdStack.pop();return r}catch(e){if(e.KNOWN_RECORDER_ERROR!==!0){try{e.message=e.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\t'+"https://chevrotain.io/docs/guide/internals.html#grammar-recording"}catch(t){throw e}}throw e}}optionInternalRecord(e,t){return mi.call(this,Option,e,t)}atLeastOneInternalRecord(e,t){mi.call(this,RepetitionMandatory,t,e)}atLeastOneSepFirstInternalRecord(e,t){mi.call(this,RepetitionMandatoryWithSeparator,t,e,li)}manyInternalRecord(e,t){mi.call(this,Repetition,t,e)}manySepFirstInternalRecord(e,t){mi.call(this,RepetitionWithSeparator,t,e,li)}orInternalRecord(e,t){return fi.call(this,e,t)}subruleInternalRecord(t,r,n){_i(r);if(!t||A(t,"ruleName")===!1){let e=new Error(`<SUBRULE${hi(r)}> argument is invalid`+` expecting a Parser method reference but got: <${JSON.stringify(t)}>`+`\n inside top level rule: <${this.recordingProdStack[0].name}>`);e.KNOWN_RECORDER_ERROR=!0;throw e}const o=D(this.recordingProdStack);const a=t.ruleName;const i=new NonTerminal({idx:r,nonTerminalName:a,label:n===null||n===void 0?void 0:n.LABEL,referencedRule:e});o.definition.push(i);return this.outputCst?pi:si}consumeInternalRecord(e,t,r){_i(t);if(!xo(e)){let r=new Error(`<CONSUME${hi(t)}> argument is invalid`+` expecting a TokenType reference but got: <${JSON.stringify(e)}>`+`\n inside top level rule: <${this.recordingProdStack[0].name}>`);r.KNOWN_RECORDER_ERROR=!0;throw r}const n=D(this.recordingProdStack);const o=new Terminal({idx:t,terminalType:e,label:r===null||r===void 0?void 0:r.LABEL});n.definition.push(o);return di}}function mi(e,t,r,n=!1){_i(r);const o=D(this.recordingProdStack);const a=k(t)?t:t.DEF;const i=new e({definition:[],idx:r});n&&(i.separator=t.SEP);A(t,"MAX_LOOKAHEAD")&&(i.maxLookahead=t.MAX_LOOKAHEAD);this.recordingProdStack.push(i);a.call(this);o.definition.push(i);this.recordingProdStack.pop();return si}function fi(e,t){_i(t);const r=D(this.recordingProdStack);const n=y(e)===!1;const o=n===!1?e:e.DEF;const i=new Alternation({definition:[],idx:t,ignoreAmbiguities:n&&e.IGNORE_AMBIGUITIES===!0});A(e,"MAX_LOOKAHEAD")&&(i.maxLookahead=e.MAX_LOOKAHEAD);const s=u(o,e=>k(e.GATE));i.hasPredicates=s;r.definition.push(i);a(o,e=>{const t=new Alternative({definition:[]});i.definition.push(t);if(A(e,"IGNORE_AMBIGUITIES")){t.ignoreAmbiguities=e.IGNORE_AMBIGUITIES}else A(e,"GATE")&&(t.ignoreAmbiguities=!0);this.recordingProdStack.push(t);e.ALT.call(this);this.recordingProdStack.pop()});return si}function hi(e){return e===0?"":`${e}`}function _i(e){if(e<0||e>ci){let t=new Error(`Invalid DSL Method idx value: <${e}>\n\t`+`Idx value must be a none negative value smaller than ${ci+1}`);t.KNOWN_RECORDER_ERROR=!0;throw t}}class PerformanceTracer{initPerformanceTracer(e){if(A(e,"traceInitPerf")){let t=e.traceInitPerf,r=typeof t==="number";this.traceInitMaxIdent=r?t:Infinity;this.traceInitPerf=r?t>0:t}else{this.traceInitMaxIdent=0;this.traceInitPerf=xi.traceInitPerf}this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;let r=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${r}--\x3e <${e}>`);let{time:n,value:o}=Hr(t),a=n>10?console.warn:console.log;this.traceInitIndent<this.traceInitMaxIdent&&a(`${r}<-- <${e}> time: ${n}ms`);this.traceInitIndent--;return o}else{return t()}}}function gi(e,t){t.forEach(t=>{const r=t.prototype;Object.getOwnPropertyNames(r).forEach(n=>{if(n==="constructor"){return}const o=Object.getOwnPropertyDescriptor(r,n);if(o&&(o.get||o.set)){Object.defineProperty(e.prototype,n,o)}else{e.prototype[n]=t.prototype[n]}})})}var yi=Ko(Uo,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(yi);var xi=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Bo,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1});var Ti=Object.freeze({recoveryValueFunc:()=>e,resyncEnabled:!0});function ki(t=e){return function(){return t}}class Parser{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated."+"\t\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;const t=this.className;this.TRACE_INIT("toFastProps",()=>{Xr(this)});this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording();a(this.definedRulesNames,e=>{const t=this[e];const r=t["originalGrammarAction"];let n;this.TRACE_INIT(`${e} Rule`,()=>{n=this.topLevelRuleRecord(e,r)});this.gastProductionsCache[e]=n})}finally{this.disableRecording()}});let r=[];this.TRACE_INIT("Grammar Resolving",()=>{r=Sa({rules:_(this.gastProductionsCache)});this.definitionErrors=this.definitionErrors.concat(r)});this.TRACE_INIT("Grammar Validations",()=>{if(C(r)&&this.skipValidations===!1){let e=Na({rules:_(this.gastProductionsCache),tokenTypes:_(this.tokensMap),errMsgProvider:Wo,grammarName:t}),r=pa({lookaheadStrategy:this.lookaheadStrategy,rules:_(this.gastProductionsCache),tokenTypes:_(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(e,r)}});if(C(this.definitionErrors)){this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{const e=un(_(this.gastProductionsCache));this.resyncFollows=e});this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var e,t;(t=(e=this.lookaheadStrategy).initialize)===null||t===void 0?void 0:t.call(e,{rules:_(this.gastProductionsCache)});this.preComputeLookaheadFunctions(_(this.gastProductionsCache))})}if(!Parser.DEFER_DEFINITION_ERRORS_HANDLING&&!C(this.definitionErrors)){e=l(this.definitionErrors,e=>e.message);throw new Error(`Parser Definition Errors detected:\n ${e.join("\n-------------------------------\n")}`)}})}constructor(e,t){this.definitionErrors=[];this.selfAnalysisDone=!1;const r=this;r.initErrorHandler(t);r.initLexerAdapter();r.initLooksAhead(t);r.initRecognizerEngine(e,t);r.initRecoverable(t);r.initTreeBuilder(t);r.initContentAssist();r.initGastRecorder(t);r.initPerformanceTracer(t);if(A(t,"ignoredIssues")){throw new Error("The <ignoredIssues> IParserConfig property has been deprecated.\n\t"+"Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.\n\t"+"See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES\n\t"+"For further details.")}this.skipValidations=A(t,"skipValidations")?t.skipValidations:xi.skipValidations}}Parser.DEFER_DEFINITION_ERRORS_HANDLING=!1;gi(Parser,[Recoverable,LooksAhead,TreeBuilder,LexerAdapter,RecognizerEngine,RecognizerApi,ErrorHandler,ContentAssist,GastRecorder,PerformanceTracer]);class EmbeddedActionsParser extends Parser{constructor(e,t=xi){const r=O(t);r.outputCst=!1;super(e,r)}}function vi(e,t,r){return`${e.name}_${t}_${r}`}var Ri=1;var Ai=2;var Ii=4;var Ci=5;var Ei=7;var Si=8;var Ni=9;var Pi=10;var bi=11;var Oi=12;class AbstractTransition{constructor(e){this.target=e}isEpsilon(){return!1}}class AtomTransition extends AbstractTransition{constructor(e,t){super(e);this.tokenType=t}}class EpsilonTransition extends AbstractTransition{constructor(e){super(e)}isEpsilon(){return!0}}class RuleTransition extends AbstractTransition{constructor(e,t,r){super(e);this.rule=t;this.followState=r}isEpsilon(){return!0}}function Li(t){const r={decisionMap:{},decisionStates:[],ruleToStartState:new Map,ruleToStopState:new Map,states:[]};wi(r,t);const n=t.length;for(let o=0;o<n;o++){let n=t[o],a=Vi(r,n,n);if(a===e){continue}Ji(r,n,a)}return r}function wi(t,r){const n=r.length;for(let o=0;o<n;o++){let n=r[o],a=es(t,n,e,{type:Ai}),i=es(t,n,e,{type:Ei});a.stop=i;t.ruleToStartState.set(n,a);t.ruleToStopState.set(n,i)}}function Di(e,t,r){if(r instanceof Terminal){return qi(e,t,r.terminalType,r)}else if(r instanceof NonTerminal){return Zi(e,t,r)}else if(r instanceof Alternation){return Ui(e,t,r)}else if(r instanceof Option){return Ki(e,t,r)}else if(r instanceof Repetition){return $i(e,t,r)}else if(r instanceof RepetitionWithSeparator){return Mi(e,t,r)}else if(r instanceof RepetitionMandatory){return Fi(e,t,r)}else if(r instanceof RepetitionMandatoryWithSeparator){return Gi(e,t,r)}else{return Vi(e,t,r)}}function $i(e,t,r){const n=es(e,t,r,{type:Ci});zi(e,n);const o=Hi(e,t,n,r,Vi(e,t,r));return ji(e,t,r,o)}function Mi(e,t,r){const n=es(e,t,r,{type:Ci});zi(e,n);const o=Hi(e,t,n,r,Vi(e,t,r));const a=qi(e,t,r.separator,r);return ji(e,t,r,o,a)}function Fi(e,t,r){const n=es(e,t,r,{type:Ii});zi(e,n);const o=Hi(e,t,n,r,Vi(e,t,r));return Bi(e,t,r,o)}function Gi(e,t,r){const n=es(e,t,r,{type:Ii});zi(e,n);const o=Hi(e,t,n,r,Vi(e,t,r));const a=qi(e,t,r.separator,r);return Bi(e,t,r,o,a)}function Ui(e,t,r){const n=es(e,t,r,{type:Ri});zi(e,n);const o=l(r.definition,r=>Di(e,t,r));const a=Hi(e,t,n,r,...o);return a}function Ki(e,t,r){const n=es(e,t,r,{type:Ri});zi(e,n);const o=Hi(e,t,n,r,Vi(e,t,r));return Wi(e,t,r,o)}function Vi(t,r,n){const o=E(l(n.definition,e=>Di(t,r,e)),t=>t!==e);if(o.length===1){return o[0]}else if(o.length===0){return e}else{return Yi(t,o)}}function Bi(t,r,n,o,a){const i=o.left;const s=o.right;const l=es(t,r,n,{type:bi});zi(t,l);const c=es(t,r,n,{type:Oi});i.loopback=l;c.loopback=l;t.decisionMap[vi(r,a?"RepetitionMandatoryWithSeparator":"RepetitionMandatory",n.idx)]=l;Qi(s,l);if(a===e){Qi(l,i);Qi(l,c)}else{Qi(l,c);Qi(l,a.left);Qi(a.right,i)}return{left:i,right:c}}function ji(t,r,n,o,a){const i=o.left;const s=o.right;const l=es(t,r,n,{type:Pi});zi(t,l);const c=es(t,r,n,{type:Oi});const u=es(t,r,n,{type:Ni});l.loopback=u;c.loopback=u;Qi(l,i);Qi(l,c);Qi(s,u);if(a!==e){Qi(u,c);Qi(u,a.left);Qi(a.right,i)}else{Qi(u,l)}t.decisionMap[vi(r,a?"RepetitionWithSeparator":"Repetition",n.idx)]=l;return{left:l,right:c}}function Wi(e,t,r,n){const o=n.left;const a=n.right;Qi(o,a);e.decisionMap[vi(t,"Option",r.idx)]=o;return n}function zi(e,t){e.decisionStates.push(t);t.decision=e.decisionStates.length-1;return t.decision}function Hi(t,r,n,o,...a){const i=es(t,r,o,{type:Si,start:n});n.end=i;for(const t of a){if(t!==e){Qi(n,t.left);Qi(t.right,i)}else{Qi(n,i)}}const s={left:n,right:i};t.decisionMap[vi(r,Xi(o),o.idx)]=n;return s}function Xi(e){if(e instanceof Alternation){return"Alternation"}else if(e instanceof Option){return"Option"}else if(e instanceof Repetition){return"Repetition"}else if(e instanceof RepetitionWithSeparator){return"RepetitionWithSeparator"}else if(e instanceof RepetitionMandatory){return"RepetitionMandatory"}else if(e instanceof RepetitionMandatoryWithSeparator){return"RepetitionMandatoryWithSeparator"}else{throw new Error("Invalid production type encountered")}}function Yi(t,r){const n=r.length;for(let o=0;o<n-1;o++){let n=r[o],a;n.left.transitions.length===1&&(a=n.left.transitions[0]);let i=a instanceof RuleTransition,s=a,l=r[o+1].left;if(n.left.type===Ri&&n.right.type===Ri&&a!==e&&(i&&s.followState===n.right||a.target===n.right)){if(i){s.followState=l}else{a.target=l}rs(t,n.right)}else{Qi(n.right,l)}}const o=r[0];const a=r[n-1];return{left:o.left,right:a.right}}function qi(e,t,r,n){const o=es(e,t,n,{type:Ri});const a=es(e,t,n,{type:Ri});ts(o,new AtomTransition(a,r));return{left:o,right:a}}function Zi(e,t,r){const n=r.referencedRule;const o=e.ruleToStartState.get(n);const a=es(e,t,r,{type:Ri});const i=es(e,t,r,{type:Ri});const s=new RuleTransition(o,n,i);ts(a,s);return{left:a,right:i}}function Ji(e,t,r){const n=e.ruleToStartState.get(t);Qi(n,r.left);const o=e.ruleToStopState.get(t);Qi(r.right,o);const a={left:n,right:o};return a}function Qi(e,t){const r=new EpsilonTransition(t);ts(e,r)}function es(e,t,r,n){const o=Object.assign({atn:e,production:r,epsilonOnlyTransitions:!1,rule:t,transitions:[],nextTokenWithinRule:[],stateNumber:e.states.length},n);e.states.push(o);return o}function ts(e,t){e.transitions.length===0&&(e.epsilonOnlyTransitions=t.isEpsilon());e.transitions.push(t)}function rs(e,t){e.states.splice(e.states.indexOf(t),1)}var ns={};class ATNConfigSet{constructor(){this.map={};this.configs=[]}get size(){return this.configs.length}finalize(){this.map={}}add(e){const t=os(e);if(!(t in this.map)){this.map[t]=this.configs.length;this.configs.push(e)}}get elements(){return this.configs}get alts(){return l(this.configs,e=>e.alt)}get key(){let e="";for(const t in this.map){e+=t+":"}return e}}function os(e,t=!0){return`${t?`a${e.alt}`:""}s${e.state.stateNumber}:${e.stack.map(e=>e.stateNumber.toString()).join("_")}`}function as(t,r){const n={};return o=>{const a=o.toString();let i=n[a];if(i!==e){return i}else{i={atnStartState:t,decision:r,states:{}};n[a]=i;return i}}}class PredicateSet{constructor(){this.predicates=[]}is(e){return e>=this.predicates.length||this.predicates[e]}set(e,t){this.predicates[e]=t}toString(){let e="";const t=this.predicates.length;for(let r=0;r<t;r++){e+=this.predicates[r]===!0?"1":"0"}return e}}const is=new PredicateSet;class LLStarLookaheadStrategy extends LLkLookaheadStrategy{constructor(e){var t;super();this.logging=(t=e===null||e===void 0?void 0:e.logging)!==null&&t!==void 0?t:e=>console.log(e)}initialize(e){this.atn=Li(e.rules);this.dfas=ls(this.atn)}validateAmbiguousAlternationAlternatives(){return[]}validateEmptyOrAlternatives(){return[]}buildLookaheadForAlternation(t){const{prodOccurrence:r,rule:n,hasPredicates:o,dynamicTokensEnabled:i}=t;const s=this.dfas;const c=this.logging;const u=vi(n,"Alternation",r);const d=this.atn.decisionMap[u];const p=d.decision;const m=l(Jo({maxLookahead:1,occurrence:r,prodType:"Alternation",rule:n}),e=>l(e,e=>e[0]));if(ss(m,!1)&&!i){let t=I(m,(e,t,r)=>{a(t,t=>{if(t){e[t.tokenTypeIdx]=r;a(t.categoryMatches,t=>{e[t]=r})}});return e},{});if(o){return function(r){var n;const o=this.LA(1);const a=t[o.tokenTypeIdx];if(r!==e&&a!==e){let t=(n=r[a])===null||n===void 0?void 0:n.GATE;if(t!==e&&t.call(this)===!1){return e}}return a}}else{return function(){const e=this.LA(1);return t[e.tokenTypeIdx]}}}else if(o){return function(t){const r=new PredicateSet;const n=t===e?0:t.length;for(let o=0;o<n;o++){let n=t===null||t===void 0?void 0:t[o].GATE;r.set(o,n===e||n.call(this))}const o=cs.call(this,s,p,r,c);return typeof o==="number"?o:e}}else{return function(){const t=cs.call(this,s,p,is,c);return typeof t==="number"?t:e}}}buildLookaheadForOptional(t){const{prodOccurrence:r,rule:n,prodType:o,dynamicTokensEnabled:i}=t;const s=this.dfas;const c=this.logging;const u=vi(n,o,r);const d=this.atn.decisionMap[u];const p=d.decision;const m=l(Jo({maxLookahead:1,occurrence:r,prodType:o,rule:n}),e=>l(e,e=>e[0]));if(ss(m)&&m[0][0]&&!i){let t=m[0],r=h(t);if(r.length===1&&C(r[0].categoryMatches)){let e=r[0],t=e.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===t}}else{let t=I(r,(t,r)=>{if(r!==e){t[r.tokenTypeIdx]=!0;a(r.categoryMatches,e=>{t[e]=!0})}return t},{});return function(){const e=this.LA(1);return t[e.tokenTypeIdx]===!0}}}return function(){const e=cs.call(this,s,p,is,c);return typeof e==="object"?!1:e===0}}}function ss(t,r=!0){const n=new Set;for(const o of t){let t=new Set;for(const a of o){if(a===e){if(r){break}else{return!1}}let o=[a.tokenTypeIdx].concat(a.categoryMatches);for(const e of o){if(n.has(e)){if(!t.has(e)){return!1}}else{n.add(e);t.add(e)}}}}return!0}function ls(e){const t=e.decisionStates.length;const r=Array(t);for(let n=0;n<t;n++){r[n]=as(e.decisionStates[n],n)}return r}function cs(t,r,n,o){const a=t[r](n);let i=a.start;if(i===e){let e=Rs(a.atnStartState);i=vs(a,Ts(e));a.start=i}const s=us.apply(this,[a,i,n,o]);return s}function us(t,r,n,o){let a=r;let i=1;const s=[];let l=this.LA(i++);while(!0){let r=_s(a,l);r===e&&(r=ds.apply(this,[t,a,l,i,n,o]));if(r===ns){return hs(s,a,l)}if(r.isAcceptState===!0){return r.prediction}a=r;s.push(l);l=this.LA(i++)}}function ds(t,r,n,o,a,i){const s=gs(r.configs,n,a);if(s.size===0){ks(t,r,n,ns);return ns}let l=Ts(s);const c=xs(s,a);if(c!==e){l.isAcceptState=!0;l.prediction=c;l.configs.uniqueAlt=c}else if(Ss(s)){let e=U(s.alts);l.isAcceptState=!0;l.prediction=e;l.configs.uniqueAlt=e;ps.apply(this,[t,o,s.alts,i])}l=ks(t,r,n,l);return l}function ps(e,t,r,n){const o=[];for(let e=1;e<=t;e++){o.push(this.LA(e).tokenType)}const a=e.atnStartState;const i=a.rule;const s=a.production;const l=ms({topLevelRule:i,ambiguityIndices:r,production:s,prefixPath:o});n(l)}function ms(e){const t=l(e.prefixPath,e=>Eo(e)).join(", ");const r=e.production.idx===0?"":e.production.idx;let n=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(", ")}> in <${fs(e.production)}${r}>`+` inside <${e.topLevelRule.name}> Rule,\n`+`<${t}> may appears as a prefix path in all these alternatives.\n`;n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\n`+`For Further details.`;return n}function fs(e){if(e instanceof NonTerminal){return"SUBRULE"}else if(e instanceof Option){return"OPTION"}else if(e instanceof Alternation){return"OR"}else if(e instanceof RepetitionMandatory){return"AT_LEAST_ONE"}else if(e instanceof RepetitionMandatoryWithSeparator){return"AT_LEAST_ONE_SEP"}else if(e instanceof RepetitionWithSeparator){return"MANY_SEP"}else if(e instanceof Repetition){return"MANY"}else if(e instanceof Terminal){return"CONSUME"}else{throw Error("non exhaustive match")}}function hs(e,t,r){const n=M(t.configs.elements,e=>e.state.transitions);const o=K(n.filter(e=>e instanceof AtomTransition).map(e=>e.tokenType),e=>e.tokenTypeIdx);return{actualToken:r,possibleTokenTypes:o,tokenPath:e}}function _s(e,t){return e.edges[t.tokenTypeIdx]}function gs(t,r,n){const o=new ATNConfigSet;const a=[];for(const i of t.elements){if(n.is(i.alt)===!1){continue}if(i.state.type===Ei){a.push(i);continue}let t=i.state.transitions.length;for(let n=0;n<t;n++){let t=i.state.transitions[n],a=ys(t,r);a!==e&&o.add({state:a,alt:i.alt,stack:i.stack})}}let i;a.length===0&&o.size===1&&(i=o);if(i===e){i=new ATNConfigSet;for(const e of o.elements){As(e,i)}}if(a.length>0&&!Cs(i)){for(const e of a){i.add(e)}}return i}function ys(t,r){if(t instanceof AtomTransition&&Vo(r,t.tokenType)){return t.target}return e}function xs(t,r){let n;for(const o of t.elements){if(r.is(o.alt)===!0){if(n===e){n=o.alt}else if(n!==o.alt){return e}}}return n}function Ts(e){return{configs:e,edges:{},isAcceptState:!1,prediction:-1}}function ks(e,t,r,n){n=vs(e,n);t.edges[r.tokenTypeIdx]=n;return n}function vs(t,r){if(r===ns){return r}const n=r.configs.key;const o=t.states[n];if(o!==e){return o}r.configs.finalize();t.states[n]=r;return r}function Rs(e){const t=new ATNConfigSet;const r=e.transitions.length;for(let n=0;n<r;n++){let r=e.transitions[n].target,o={state:r,alt:n,stack:[]};As(o,t)}return t}function As(t,r){const n=t.state;if(n.type===Ei){if(t.stack.length>0){let e=[...t.stack],n=e.pop(),o={state:n,alt:t.alt,stack:e};As(o,r)}else{r.add(t)}return}n.epsilonOnlyTransitions||r.add(t);const o=n.transitions.length;for(let a=0;a<o;a++){let o=n.transitions[a],i=Is(t,o);i!==e&&As(i,r)}}function Is(t,r){if(r instanceof EpsilonTransition){return{state:r.target,alt:t.alt,stack:t.stack}}else if(r instanceof RuleTransition){let e=[...t.stack,r.followState];return{state:r.target,alt:t.alt,stack:e}}return e}function Cs(e){for(const t of e.elements){if(t.state.type===Ei){return!0}}return!1}function Es(e){for(const t of e.elements){if(t.state.type!==Ei){return!1}}return!0}function Ss(e){if(Es(e)){return!0}const t=Ns(e.elements);const r=Ps(t)&&!bs(t);return r}function Ns(t){const r=new Map;for(const n of t){let t=os(n,!1),o=r.get(t);if(o===e){o={};r.set(t,o)}o[n.alt]=!0}return r}function Ps(e){for(const t of Array.from(e.values())){if(Object.keys(t).length>1){return!0}}return!1}function bs(e){for(const t of Array.from(e.values())){if(Object.keys(t).length===1){return!0}}return!1}var Os={};var Ls={};var ws={};var Ds={};var $s={};var Ms={};var Fs={};var Gs={};var Us={};var Ks={};var Vs={};var Bs={};var js={};var Ws={};var zs={};var Hs={};var Xs={};var Ys={};var qs={};var Zs={};var Js={};var Qs={};var el={};var tl={};var rl={};var nl={};var ol={};var al={};var il={};var sl={};var ll={};var cl={};var ul={};var dl={};var pl={};var ml={};var fl={};var hl={};var _l={};var gl={};var yl={};var xl={};var Tl={};var kl={};var vl={};var Rl={};var Al={};var Il={};var Cl={};var El={};var Sl={};var Nl={};var Pl={};var bl={};var Ol={};var Ll={};var wl={};var Dl={};var $l={};var Ml={};var Fl={};var Gl={};var Ul={};var Kl={};var Vl={};var Bl={};var jl={};var Wl={};var zl={};var Hl={};var Xl={};var Yl={};var ql={};var Zl={};var Jl={};var Ql={};var ec={};(function(e){function t(e){return typeof e==="string"}e.is=t})(Os);(function(e){function t(e){return typeof e==="string"}e.is=t})(Ls);(function(e){e.MIN_VALUE=-2147483648;e.MAX_VALUE=2147483647;function t(t){return typeof t==="number"&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(ws);(function(e){e.MIN_VALUE=0;e.MAX_VALUE=2147483647;function t(t){return typeof t==="number"&&e.MIN_VALUE<=t&&t<=e.MAX_VALUE}e.is=t})(Ds);(function(e){function t(e,t){e===Number.MAX_VALUE&&(e=Ds.MAX_VALUE);t===Number.MAX_VALUE&&(t=Ds.MAX_VALUE);return{line:e,character:t}}e.create=t;function r(e){return tc.objectLiteral(e)&&tc.uinteger(e.line)&&tc.uinteger(e.character)}e.is=r})($s);(function(e){function t(e,t,r,n){if(tc.uinteger(e)&&tc.uinteger(t)&&tc.uinteger(r)&&tc.uinteger(n)){return{start:$s.create(e,t),end:$s.create(r,n)}}else if($s.is(e)&&$s.is(t)){return{start:e,end:t}}else{throw new Error(`Range#create called with invalid arguments[${e}, ${t}, ${r}, ${n}]`)}}e.create=t;function r(e){return tc.objectLiteral(e)&&$s.is(e.start)&&$s.is(e.end)}e.is=r})(Ms);(function(e){function t(e,t){return{uri:e,range:t}}e.create=t;function r(e){return tc.objectLiteral(e)&&Ms.is(e.range)&&(tc.string(e.uri)||tc.undefined(e.uri))}e.is=r})(Fs);(function(e){function t(e,t,r,n){return{targetUri:e,targetRange:t,targetSelectionRange:r,originSelectionRange:n}}e.create=t;function r(e){return tc.objectLiteral(e)&&Ms.is(e.targetRange)&&tc.string(e.targetUri)&&Ms.is(e.targetSelectionRange)&&(Ms.is(e.originSelectionRange)||tc.undefined(e.originSelectionRange))}e.is=r})(Gs);(function(e){function t(e,t,r,n){return{red:e,green:t,blue:r,alpha:n}}e.create=t;function r(e){return tc.objectLiteral(e)&&tc.numberRange(e.red,0,1)&&tc.numberRange(e.green,0,1)&&tc.numberRange(e.blue,0,1)&&tc.numberRange(e.alpha,0,1)}e.is=r})(Us);(function(e){function t(e,t){return{range:e,color:t}}e.create=t;function r(e){return tc.objectLiteral(e)&&Ms.is(e.range)&&Us.is(e.color)}e.is=r})(Ks);(function(e){function t(e,t,r){return{label:e,textEdit:t,additionalTextEdits:r}}e.create=t;function r(e){return tc.objectLiteral(e)&&tc.string(e.label)&&(tc.undefined(e.textEdit)||Vs.is(e))&&(tc.undefined(e.additionalTextEdits)||tc.typedArray(e.additionalTextEdits,Vs.is))}e.is=r})(Bs);(function(e){e.Comment="comment";e.Imports="imports";e.Region="region"})(js);(function(e){function t(e,t,r,n,o,a){const i={startLine:e,endLine:t};tc.defined(r)&&(i.startCharacter=r);tc.defined(n)&&(i.endCharacter=n);tc.defined(o)&&(i.kind=o);tc.defined(a)&&(i.collapsedText=a);return i}e.create=t;function r(e){return tc.objectLiteral(e)&&tc.uinteger(e.startLine)&&tc.uinteger(e.startLine)&&(tc.undefined(e.startCharacter)||tc.uinteger(e.startCharacter))&&(tc.undefined(e.endCharacter)||tc.uinteger(e.endCharacter))&&(tc.undefined(e.kind)||tc.string(e.kind))}e.is=r})(Ws);(function(e){function t(e,t){return{location:e,message:t}}e.create=t;function r(e){return tc.defined(e)&&Fs.is(e.location)&&tc.string(e.message)}e.is=r})(zs);(function(e){e.Error=1;e.Warning=2;e.Information=3;e.Hint=4})(Hs);(function(e){e.Unnecessary=1;e.Deprecated=2})(Xs);(function(e){function t(e){return tc.objectLiteral(e)&&tc.string(e.href)}e.is=t})(Ys);(function(e){function t(e,t,r,n,o,a){let i={range:e,message:t};tc.defined(r)&&(i.severity=r);tc.defined(n)&&(i.code=n);tc.defined(o)&&(i.source=o);tc.defined(a)&&(i.relatedInformation=a);return i}e.create=t;function r(e){var t;return tc.defined(e)&&Ms.is(e.range)&&tc.string(e.message)&&(tc.number(e.severity)||tc.undefined(e.severity))&&(tc.integer(e.code)||tc.string(e.code)||tc.undefined(e.code))&&(tc.undefined(e.codeDescription)||tc.string((t=e.codeDescription)===null||t===void 0?void 0:t.href))&&(tc.string(e.source)||tc.undefined(e.source))&&(tc.undefined(e.relatedInformation)||tc.typedArray(e.relatedInformation,zs.is))}e.is=r})(qs);(function(e){function t(e,t,...r){let n={title:e,command:t};tc.defined(r)&&r.length>0&&(n.arguments=r);return n}e.create=t;function r(e){return tc.defined(e)&&tc.string(e.title)&&tc.string(e.command)}e.is=r})(Zs);(function(e){function t(e,t){return{range:e,newText:t}}e.replace=t;function r(e,t){return{range:{start:e,end:e},newText:t}}e.insert=r;function n(e){return{range:e,newText:""}}e.del=n;function o(e){return tc.objectLiteral(e)&&tc.string(e.newText)&&Ms.is(e.range)}e.is=o})(Vs);(function(t){function r(t,r,n){const o={label:t};r!==e&&(o.needsConfirmation=r);n!==e&&(o.description=n);return o}t.create=r;function n(t){return tc.objectLiteral(t)&&tc.string(t.label)&&(tc.boolean(t.needsConfirmation)||t.needsConfirmation===e)&&(tc.string(t.description)||t.description===e)}t.is=n})(Js);(function(e){function t(e){return tc.string(e)}e.is=t})(Qs);(function(e){function t(e,t,r){return{range:e,newText:t,annotationId:r}}e.replace=t;function r(e,t,r){return{range:{start:e,end:e},newText:t,annotationId:r}}e.insert=r;function n(e,t){return{range:e,newText:"",annotationId:t}}e.del=n;function o(e){return Vs.is(e)&&(Js.is(e.annotationId)||Qs.is(e.annotationId))}e.is=o})(el);(function(e){function t(e,t){return{textDocument:e,edits:t}}e.create=t;function r(e){return tc.defined(e)&&tl.is(e.textDocument)&&Array.isArray(e.edits)}e.is=r})(rl);(function(t){function r(t,r,n){let o={kind:"create",uri:t};r!==e&&(r.overwrite!==e||r.ignoreIfExists!==e)&&(o.options=r);n!==e&&(o.annotationId=n);return o}t.create=r;function n(t){return t&&t.kind==="create"&&tc.string(t.uri)&&(t.options===e||(t.options.overwrite===e||tc.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===e||tc.boolean(t.options.ignoreIfExists)))&&(t.annotationId===e||Qs.is(t.annotationId))}t.is=n})(nl);(function(t){function r(t,r,n,o){let a={kind:"rename",oldUri:t,newUri:r};n!==e&&(n.overwrite!==e||n.ignoreIfExists!==e)&&(a.options=n);o!==e&&(a.annotationId=o);return a}t.create=r;function n(t){return t&&t.kind==="rename"&&tc.string(t.oldUri)&&tc.string(t.newUri)&&(t.options===e||(t.options.overwrite===e||tc.boolean(t.options.overwrite))&&(t.options.ignoreIfExists===e||tc.boolean(t.options.ignoreIfExists)))&&(t.annotationId===e||Qs.is(t.annotationId))}t.is=n})(ol);(function(t){function r(t,r,n){let o={kind:"delete",uri:t};r!==e&&(r.recursive!==e||r.ignoreIfNotExists!==e)&&(o.options=r);n!==e&&(o.annotationId=n);return o}t.create=r;function n(t){return t&&t.kind==="delete"&&tc.string(t.uri)&&(t.options===e||(t.options.recursive===e||tc.boolean(t.options.recursive))&&(t.options.ignoreIfNotExists===e||tc.boolean(t.options.ignoreIfNotExists)))&&(t.annotationId===e||Qs.is(t.annotationId))}t.is=n})(al);(function(t){function r(t){return t&&(t.changes!==e||t.documentChanges!==e)&&(t.documentChanges===e||t.documentChanges.every(e=>{if(tc.string(e.kind)){return nl.is(e)||ol.is(e)||al.is(e)}else{return rl.is(e)}}))}t.is=r})(il);(function(e){function t(e){return{uri:e}}e.create=t;function r(e){return tc.defined(e)&&tc.string(e.uri)}e.is=r})(sl);(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function r(e){return tc.defined(e)&&tc.string(e.uri)&&tc.integer(e.version)}e.is=r})(ll);(function(e){function t(e,t){return{uri:e,version:t}}e.create=t;function r(e){return tc.defined(e)&&tc.string(e.uri)&&(e.version===null||tc.integer(e.version))}e.is=r})(tl);(function(e){function t(e,t,r,n){return{uri:e,languageId:t,version:r,text:n}}e.create=t;function r(e){return tc.defined(e)&&tc.string(e.uri)&&tc.string(e.languageId)&&tc.integer(e.version)&&tc.string(e.text)}e.is=r})(cl);(function(e){e.PlainText="plaintext";e.Markdown="markdown";function t(t){return t===e.PlainText||t===e.Markdown}e.is=t})(ul);(function(e){function t(e){return tc.objectLiteral(e)&&ul.is(e.kind)&&tc.string(e.value)}e.is=t})(dl);(function(e){e.Text=1;e.Method=2;e.Function=3;e.Constructor=4;e.Field=5;e.Variable=6;e.Class=7;e.Interface=8;e.Module=9;e.Property=10;e.Unit=11;e.Value=12;e.Enum=13;e.Keyword=14;e.Snippet=15;e.Color=16;e.File=17;e.Reference=18;e.Folder=19;e.EnumMember=20;e.Constant=21;e.Struct=22;e.Event=23;e.Operator=24;e.TypeParameter=25})(pl);(function(e){e.PlainText=1;e.Snippet=2})(ml);(function(e){e.Deprecated=1})(fl);(function(e){function t(e,t,r){return{newText:e,insert:t,replace:r}}e.create=t;function r(e){return e&&tc.string(e.newText)&&Ms.is(e.insert)&&Ms.is(e.replace)}e.is=r})(hl);(function(e){e.asIs=1;e.adjustIndentation=2})(_l);(function(t){function r(t){return t&&(tc.string(t.detail)||t.detail===e)&&(tc.string(t.description)||t.description===e)}t.is=r})(gl);(function(e){function t(e){return{label:e}}e.create=t})(yl);(function(e){function t(e,t){return{items:e?e:[],isIncomplete:!!t}}e.create=t})(xl);(function(e){function t(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function r(e){return tc.string(e)||tc.objectLiteral(e)&&tc.string(e.language)&&tc.string(e.value)}e.is=r})(Tl);(function(t){function r(t){return!!t&&tc.objectLiteral(t)&&(dl.is(t.contents)||Tl.is(t.contents)||tc.typedArray(t.contents,Tl.is))&&(t.range===e||Ms.is(t.range))}t.is=r})(kl);(function(e){function t(e,t){return t?{label:e,documentation:t}:{label:e}}e.create=t})(vl);(function(e){function t(e,t,...r){let n={label:e};tc.defined(t)&&(n.documentation=t);if(tc.defined(r)){n.parameters=r}else{n.parameters=[]}return n}e.create=t})(Rl);(function(e){e.Text=1;e.Read=2;e.Write=3})(Al);(function(e){function t(e,t){let r={range:e};tc.number(t)&&(r.kind=t);return r}e.create=t})(Il);(function(e){e.File=1;e.Module=2;e.Namespace=3;e.Package=4;e.Class=5;e.Method=6;e.Property=7;e.Field=8;e.Constructor=9;e.Enum=10;e.Interface=11;e.Function=12;e.Variable=13
e.Constant=14;e.String=15;e.Number=16;e.Boolean=17;e.Array=18;e.Object=19;e.Key=20;e.Null=21;e.EnumMember=22;e.Struct=23;e.Event=24;e.Operator=25;e.TypeParameter=26})(Cl);(function(e){e.Deprecated=1})(El);(function(e){function t(e,t,r,n,o){let a={name:e,kind:t,location:{uri:n,range:r}};o&&(a.containerName=o);return a}e.create=t})(Sl);(function(t){function r(t,r,n,o){return o!==e?{name:t,kind:r,location:{uri:n,range:o}}:{name:t,kind:r,location:{uri:n}}}t.create=r})(Nl);(function(t){function r(t,r,n,o,a,i){let s={name:t,detail:r,kind:n,range:o,selectionRange:a};i!==e&&(s.children=i);return s}t.create=r;function n(t){return t&&tc.string(t.name)&&tc.number(t.kind)&&Ms.is(t.range)&&Ms.is(t.selectionRange)&&(t.detail===e||tc.string(t.detail))&&(t.deprecated===e||tc.boolean(t.deprecated))&&(t.children===e||Array.isArray(t.children))&&(t.tags===e||Array.isArray(t.tags))}t.is=n})(Pl);(function(e){e.Empty="";e.QuickFix="quickfix";e.Refactor="refactor";e.RefactorExtract="refactor.extract";e.RefactorInline="refactor.inline";e.RefactorRewrite="refactor.rewrite";e.Source="source";e.SourceOrganizeImports="source.organizeImports";e.SourceFixAll="source.fixAll"})(bl);(function(e){e.Invoked=1;e.Automatic=2})(Ol);(function(t){function r(t,r,n){let o={diagnostics:t};r!==e&&r!==null&&(o.only=r);n!==e&&n!==null&&(o.triggerKind=n);return o}t.create=r;function n(t){return tc.defined(t)&&tc.typedArray(t.diagnostics,qs.is)&&(t.only===e||tc.typedArray(t.only,tc.string))&&(t.triggerKind===e||t.triggerKind===Ol.Invoked||t.triggerKind===Ol.Automatic)}t.is=n})(Ll);(function(t){function r(t,r,n){let o={title:t};let a=!0;if(typeof r==="string"){a=!1;o.kind=r}else if(Zs.is(r)){o.command=r}else{o.edit=r}a&&n!==e&&(o.kind=n);return o}t.create=r;function n(t){return t&&tc.string(t.title)&&(t.diagnostics===e||tc.typedArray(t.diagnostics,qs.is))&&(t.kind===e||tc.string(t.kind))&&(t.edit!==e||t.command!==e)&&(t.command===e||Zs.is(t.command))&&(t.isPreferred===e||tc.boolean(t.isPreferred))&&(t.edit===e||il.is(t.edit))}t.is=n})(wl);(function(e){function t(e,t){let r={range:e};tc.defined(t)&&(r.data=t);return r}e.create=t;function r(e){return tc.defined(e)&&Ms.is(e.range)&&(tc.undefined(e.command)||Zs.is(e.command))}e.is=r})(Dl);(function(e){function t(e,t){return{tabSize:e,insertSpaces:t}}e.create=t;function r(e){return tc.defined(e)&&tc.uinteger(e.tabSize)&&tc.boolean(e.insertSpaces)}e.is=r})($l);(function(e){function t(e,t,r){return{range:e,target:t,data:r}}e.create=t;function r(e){return tc.defined(e)&&Ms.is(e.range)&&(tc.undefined(e.target)||tc.string(e.target))}e.is=r})(Ml);(function(t){function r(e,t){return{range:e,parent:t}}t.create=r;function n(r){return tc.objectLiteral(r)&&Ms.is(r.range)&&(r.parent===e||t.is(r.parent))}t.is=n})(Fl);(function(t){function r(t){return tc.objectLiteral(t)&&(t.resultId===e||typeof t.resultId==="string")&&Array.isArray(t.data)&&(t.data.length===0||typeof t.data[0]==="number")}t.is=r})(Gl);(function(t){function r(e,t){return{range:e,text:t}}t.create=r;function n(t){return t!==e&&t!==null&&Ms.is(t.range)&&tc.string(t.text)}t.is=n})(Ul);(function(t){function r(e,t,r){return{range:e,variableName:t,caseSensitiveLookup:r}}t.create=r;function n(t){return t!==e&&t!==null&&Ms.is(t.range)&&tc.boolean(t.caseSensitiveLookup)&&(tc.string(t.variableName)||t.variableName===e)}t.is=n})(Kl);(function(t){function r(e,t){return{range:e,expression:t}}t.create=r;function n(t){return t!==e&&t!==null&&Ms.is(t.range)&&(tc.string(t.expression)||t.expression===e)}t.is=n})(Vl);(function(e){function t(e,t){return{frameId:e,stoppedLocation:t}}e.create=t;function r(e){return tc.defined(e)&&Ms.is(e.stoppedLocation)}e.is=r})(Bl);(function(e){e.Type=1;e.Parameter=2;function t(e){return e===1||e===2}e.is=t})(jl);(function(t){function r(e){return{value:e}}t.create=r;function n(t){return tc.objectLiteral(t)&&(t.tooltip===e||tc.string(t.tooltip)||dl.is(t.tooltip))&&(t.location===e||Fs.is(t.location))&&(t.command===e||Zs.is(t.command))}t.is=n})(Wl);(function(t){function r(t,r,n){const o={position:t,label:r};n!==e&&(o.kind=n);return o}t.create=r;function n(t){return tc.objectLiteral(t)&&$s.is(t.position)&&(tc.string(t.label)||tc.typedArray(t.label,Wl.is))&&(t.kind===e||jl.is(t.kind))&&t.textEdits===e||tc.typedArray(t.textEdits,Vs.is)&&(t.tooltip===e||tc.string(t.tooltip)||dl.is(t.tooltip))&&(t.paddingLeft===e||tc.boolean(t.paddingLeft))&&(t.paddingRight===e||tc.boolean(t.paddingRight))}t.is=n})(zl);(function(e){function t(e){return{kind:"snippet",value:e}}e.createSnippet=t})(Hl);(function(e){function t(e,t,r,n){return{insertText:e,filterText:t,range:r,command:n}}e.create=t})(Xl);(function(e){function t(e){return{items:e}}e.create=t})(Yl);(function(e){e.Invoked=0;e.Automatic=1})(ql);(function(e){function t(e,t){return{range:e,text:t}}e.create=t})(Zl);(function(e){function t(e,t){return{triggerKind:e,selectedCompletionInfo:t}}e.create=t})(Jl);(function(e){function t(e){return tc.objectLiteral(e)&&Ls.is(e.uri)&&tc.string(e.name)}e.is=t})(Ql);(function(e){function t(e,t,r,n){return new FullTextDocument(e,t,r,n)}e.create=t;function r(e){return tc.defined(e)&&tc.string(e.uri)&&(tc.undefined(e.languageId)||tc.string(e.languageId))&&tc.uinteger(e.lineCount)&&tc.func(e.getText)&&tc.func(e.positionAt)&&tc.func(e.offsetAt)?!0:!1}e.is=r;function n(e,t){let r=e.getText();let n=o(t,(e,t)=>{let r=e.range.start.line-t.range.start.line;if(r===0){return e.range.start.character-t.range.start.character}return r});let a=r.length;for(let t=n.length-1;t>=0;t--){let o=n[t],i=e.offsetAt(o.range.start),s=e.offsetAt(o.range.end);if(s<=a){r=r.substring(0,i)+o.newText+r.substring(s,r.length)}else{throw new Error("Overlapping edit")}a=i}return r}e.applyEdits=n;function o(e,t){if(e.length<=1){return e}const r=e.length/2|0;const n=e.slice(0,r);const a=e.slice(r);o(n,t);o(a,t);let i=0;let s=0;let l=0;while(i<n.length&&s<a.length){let r=t(n[i],a[s]);if(r<=0){e[l++]=n[i++]}else{e[l++]=a[s++]}}while(i<n.length){e[l++]=n[i++]}while(s<a.length){e[l++]=a[s++]}return e}})(ec);class FullTextDocument{constructor(t,r,n,o){this._uri=t;this._languageId=r;this._version=n;this._content=o;this._lineOffsets=e}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(t,r){this._content=t.text;this._version=r;this._lineOffsets=e}getLineOffsets(){if(this._lineOffsets===e){let e=[],t=this._content,r=!0;for(let n=0;n<t.length;n++){if(r){e.push(n);r=!1}let o=t.charAt(n);r=o==="\r"||o==="\n";o==="\r"&&n+1<t.length&&t.charAt(n+1)==="\n"&&n++}r&&t.length>0&&e.push(t.length);this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets();let r=0,n=t.length;if(n===0){return $s.create(0,e)}while(r<n){let o=Math.floor((r+n)/2);if(t[o]>e){n=o}else{r=o+1}}let o=r-1;return $s.create(o,e-t[o])}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length){return this._content.length}else if(e.line<0){return 0}let r=t[e.line];let n=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,n),r)}get lineCount(){return this.getLineOffsets().length}}var tc={};(function(e){const t=Object.prototype.toString;function r(e){return typeof e!=="undefined"}e.defined=r;function n(e){return typeof e==="undefined"}e.undefined=n;function o(e){return e===!0||e===!1}e.boolean=o;function a(e){return t.call(e)==="[object String]"}e.string=a;function i(e){return t.call(e)==="[object Number]"}e.number=i;function s(e,r,n){return t.call(e)==="[object Number]"&&r<=e&&e<=n}e.numberRange=s;function l(e){return t.call(e)==="[object Number]"&&-2147483648<=e&&e<=2147483647}e.integer=l;function c(e){return t.call(e)==="[object Number]"&&0<=e&&e<=2147483647}e.uinteger=c;function u(e){return t.call(e)==="[object Function]"}e.func=u;function d(e){return e!==null&&typeof e==="object"}e.objectLiteral=d;function p(e,t){return Array.isArray(e)&&e.every(t)}e.typedArray=p})(tc);class CstNodeBuilder{constructor(){this.nodeStack=[]}get current(){var e;return(e=this.nodeStack[this.nodeStack.length-1])!==null&&e!==void 0?e:this.rootNode}buildRootNode(e){this.rootNode=new RootCstNodeImpl(e);this.rootNode.root=this.rootNode;this.nodeStack=[this.rootNode];return this.rootNode}buildCompositeNode(e){const t=new CompositeCstNodeImpl;t.grammarSource=e;t.root=this.rootNode;this.current.content.push(t);this.nodeStack.push(t);return t}buildLeafNode(e,t){const r=new LeafCstNodeImpl(e.startOffset,e.image.length,ne(e),e.tokenType,!t);r.grammarSource=t;r.root=this.rootNode;this.current.content.push(r);return r}removeNode(e){const t=e.container;if(t){let r=t.content.indexOf(e);r>=0&&t.content.splice(r,1)}}addHiddenNodes(e){const t=[];for(const r of e){let e=new LeafCstNodeImpl(r.startOffset,r.image.length,ne(r),r.tokenType,!0);e.root=this.rootNode;t.push(e)}let r=this.current;let n=!1;if(r.content.length>0){r.content.push(...t);return}while(r.container){let e=r.container.content.indexOf(r);if(e>0){r.container.content.splice(e,0,...t);n=!0;break}r=r.container}n||this.rootNode.content.unshift(...t)}construct(e){const t=this.current;typeof e.$type==="string"&&(this.current.astNode=e);e.$cstNode=t;const r=this.nodeStack.pop();(r===null||r===void 0?void 0:r.content.length)===0&&this.removeNode(r)}}class AbstractCstNode{get parent(){return this.container}get feature(){return this.grammarSource}get hidden(){return!1}get astNode(){var e,t;const r=typeof((e=this._astNode)===null||e===void 0?void 0:e.$type)==="string"?this._astNode:(t=this.container)===null||t===void 0?void 0:t.astNode;if(!r){throw new Error("This node has no associated AST element")}return r}set astNode(e){this._astNode=e}get element(){return this.astNode}get text(){return this.root.fullText.substring(this.offset,this.end)}}class LeafCstNodeImpl extends AbstractCstNode{get offset(){return this._offset}get length(){return this._length}get end(){return this._offset+this._length}get hidden(){return this._hidden}get tokenType(){return this._tokenType}get range(){return this._range}constructor(e,t,r,n,o=!1){super();this._hidden=o;this._offset=e;this._tokenType=n;this._length=t;this._range=r}}class CompositeCstNodeImpl extends AbstractCstNode{constructor(){super(...arguments);this.content=new CstNodeContainer(this)}get children(){return this.content}get offset(){var e,t;return(t=(e=this.firstNonHiddenNode)===null||e===void 0?void 0:e.offset)!==null&&t!==void 0?t:0}get length(){return this.end-this.offset}get end(){var e,t;return(t=(e=this.lastNonHiddenNode)===null||e===void 0?void 0:e.end)!==null&&t!==void 0?t:0}get range(){const t=this.firstNonHiddenNode;const r=this.lastNonHiddenNode;if(t&&r){if(this._rangeCache===e){let{range:e}=t,{range:n}=r;this._rangeCache={start:e.start,end:n.end.line<e.start.line?e.start:n.end}}return this._rangeCache}else{return{start:$s.create(0,0),end:$s.create(0,0)}}}get firstNonHiddenNode(){for(const e of this.content){if(!e.hidden){return e}}return this.content[0]}get lastNonHiddenNode(){for(let e=this.content.length-1;e>=0;e--){let t=this.content[e];if(!t.hidden){return t}}return this.content[this.content.length-1]}}class CstNodeContainer extends Array{constructor(e){super();this.parent=e;Object.setPrototypeOf(this,CstNodeContainer.prototype)}push(...e){this.addParents(e);return super.push(...e)}unshift(...e){this.addParents(e);return super.unshift(...e)}splice(e,t,...r){this.addParents(r);return super.splice(e,t,...r)}addParents(e){for(const t of e){t.container=this.parent}}}class RootCstNodeImpl extends CompositeCstNodeImpl{get text(){return this._text.substring(this.offset,this.end)}get fullText(){return this._text}constructor(e){super();this._text="";this._text=e!==null&&e!==void 0?e:""}}var rc=Symbol("Datatype");function nc(e){return e.$type===rc}const oc="​";const ac=e=>e.endsWith(oc)?e:e+oc;class AbstractLangiumParser{constructor(e){this._unorderedGroups=new Map;this.allRules=new Map;this.lexer=e.parser.Lexer;const t=this.lexer.definition;const r=e.LanguageMetaData.mode==="production";this.wrapper=new ChevrotainWrapper(t,Object.assign(Object.assign({},e.parser.ParserConfig),{skipValidations:r,errorMessageProvider:e.parser.ParserErrorMessageProvider}))}alternatives(e,t){this.wrapper.wrapOr(e,t)}optional(e,t){this.wrapper.wrapOption(e,t)}many(e,t){this.wrapper.wrapMany(e,t)}atLeastOne(e,t){this.wrapper.wrapAtLeastOne(e,t)}getRule(e){return this.allRules.get(e)}isRecording(){return this.wrapper.IS_RECORDING}get unorderedGroups(){return this._unorderedGroups}getRuleStack(){return this.wrapper.RULE_STACK}finalize(){this.wrapper.wrapSelfAnalysis()}}class LangiumParser extends AbstractLangiumParser{get current(){return this.stack[this.stack.length-1]}constructor(e){super(e);this.nodeBuilder=new CstNodeBuilder;this.stack=[];this.assignmentMap=new Map;this.linker=e.references.Linker;this.converter=e.parser.ValueConverter;this.astReflection=e.shared.AstReflection}rule(e,t){const r=this.computeRuleType(e);const n=this.wrapper.DEFINE_RULE(ac(e.name),this.startImplementation(r,t).bind(this));this.allRules.set(e.name,n);e.entry&&(this.mainRule=n);return n}computeRuleType(t){if(t.fragment){return e}else if(Sr(t)){return rc}else{let e=Pr(t);return e!==null&&e!==void 0?e:t.name}}parse(t,r={}){this.nodeBuilder.buildRootNode(t);const n=this.lexerResult=this.lexer.tokenize(t);this.wrapper.input=n.tokens;const o=r.rule?this.allRules.get(r.rule):this.mainRule;if(!o){throw new Error(r.rule?`No rule found with name '${r.rule}'`:"No main rule available.")}const a=o.call(this.wrapper,{});this.nodeBuilder.addHiddenNodes(n.hidden);this.unorderedGroups.clear();this.lexerResult=e;return{value:a,lexerErrors:n.errors,lexerReport:n.report,parserErrors:this.wrapper.errors}}startImplementation(t,r){return n=>{const o=!this.isRecording()&&t!==e;if(o){let e={$type:t};this.stack.push(e);t===rc&&(e.value="")}let a;try{a=r(n)}catch(t){a=e}a===e&&o&&(a=this.construct());return a}}extractHiddenTokens(e){const t=this.lexerResult.hidden;if(!t.length){return[]}const r=e.startOffset;for(let e=0;e<t.length;e++){let n=t[e];if(n.startOffset>r){return t.splice(0,e)}}return t.splice(0,t.length)}consume(e,t,r){const n=this.wrapper.wrapConsume(e,t);if(!this.isRecording()&&this.isValidToken(n)){let e=this.extractHiddenTokens(n);this.nodeBuilder.addHiddenNodes(e);let t=this.nodeBuilder.buildLeafNode(n,r),{assignment:o,isCrossRef:a}=this.getAssignment(r),i=this.current;if(o){let e=_t(r)?n.image:this.converter.convert(n.image,t);this.assign(o.operator,o.feature,e,t,a)}else if(nc(i)){let e=n.image;_t(r)||(e=this.converter.convert(e,t).toString());i.value+=e}}}isValidToken(e){return!e.isInsertedInRecovery&&!isNaN(e.startOffset)&&typeof e.endOffset==="number"&&!isNaN(e.endOffset)}subrule(e,t,r,n,o){let a;!this.isRecording()&&!r&&(a=this.nodeBuilder.buildCompositeNode(n));const i=this.wrapper.wrapSubrule(e,t,o);!this.isRecording()&&a&&a.length>0&&this.performSubruleAssignment(i,n,a)}performSubruleAssignment(e,t,r){const{assignment:n,isCrossRef:o}=this.getAssignment(t);if(n){this.assign(n.operator,n.feature,e,r,o)}else if(!n){let t=this.current;if(nc(t)){t.value+=e.toString()}else if(typeof e==="object"&&e){let r=this.assignWithoutOverride(e,t),n=r;this.stack.pop();this.stack.push(n)}}}action(e,t){if(!this.isRecording()){let r=this.current;if(t.feature&&t.operator){r=this.construct();this.nodeBuilder.removeNode(r.$cstNode);let n=this.nodeBuilder.buildCompositeNode(t);n.content.push(r.$cstNode);let o={$type:e};this.stack.push(o);this.assign(t.operator,t.feature,r,r.$cstNode,!1)}else{r.$type=e}}}construct(){if(this.isRecording()){return e}const t=this.current;Dt(t);this.nodeBuilder.construct(t);this.stack.pop();if(nc(t)){return this.converter.convert(t.value,t.$cstNode)}else{jt(this.astReflection,t)}return t}getAssignment(e){if(!this.assignmentMap.has(e)){let t=$t(e,it);this.assignmentMap.set(e,{assignment:t,isCrossRef:t?ut(t.terminal):!1})}return this.assignmentMap.get(e)}assign(e,t,r,n,o){const a=this.current;let i;if(o&&typeof r==="string"){i=this.linker.buildReference(a,t,n,r)}else{i=r}switch(e){case"=":a[t]=i;break;case"?=":a[t]=!0;break;case"+=":Array.isArray(a[t])||(a[t]=[]);a[t].push(i)}}assignWithoutOverride(t,r){for(const[n,o]of Object.entries(r)){let r=t[n];if(r===e){t[n]=o}else if(Array.isArray(r)&&Array.isArray(o)){o.push(...r);t[n]=o}}const n=t.$cstNode;if(n){n.astNode=e;t.$cstNode=e}return t}get definitionErrors(){return this.wrapper.definitionErrors}}class AbstractParserErrorMessageProvider{buildMismatchTokenMessage(e){return Bo.buildMismatchTokenMessage(e)}buildNotAllInputParsedMessage(e){return Bo.buildNotAllInputParsedMessage(e)}buildNoViableAltMessage(e){return Bo.buildNoViableAltMessage(e)}buildEarlyExitMessage(e){return Bo.buildEarlyExitMessage(e)}}class LangiumParserErrorMessageProvider extends AbstractParserErrorMessageProvider{buildMismatchTokenMessage({expected:e,actual:t}){const r=e.LABEL?"`"+e.LABEL+"`":e.name.endsWith(":KW")?`keyword '${e.name.substring(0,e.name.length-3)}'`:`token of type '${e.name}'`;return`Expecting ${r} but found \`${t.image}\`.`}buildNotAllInputParsedMessage({firstRedundant:e}){return`Expecting end of file but found \`${e.image}\`.`}}class LangiumCompletionParser extends AbstractLangiumParser{constructor(){super(...arguments);this.tokens=[];this.elementStack=[];this.lastElementStack=[];this.nextTokenIndex=0;this.stackSize=0}action(){}construct(){return e}parse(e){this.resetState();const t=this.lexer.tokenize(e,{mode:"partial"});this.tokens=t.tokens;this.wrapper.input=[...this.tokens];this.mainRule.call(this.wrapper,{});this.unorderedGroups.clear();return{tokens:this.tokens,elementStack:[...this.lastElementStack],tokenIndex:this.nextTokenIndex}}rule(e,t){const r=this.wrapper.DEFINE_RULE(ac(e.name),this.startImplementation(t).bind(this));this.allRules.set(e.name,r);e.entry&&(this.mainRule=r);return r}resetState(){this.elementStack=[];this.lastElementStack=[];this.nextTokenIndex=0;this.stackSize=0}startImplementation(e){return t=>{const r=this.keepStackSize();try{e(t)}finally{this.resetStackSize(r)}}}removeUnexpectedElements(){this.elementStack.splice(this.stackSize)}keepStackSize(){const e=this.elementStack.length;this.stackSize=e;return e}resetStackSize(e){this.removeUnexpectedElements();this.stackSize=e}consume(e,t,r){this.wrapper.wrapConsume(e,t);if(!this.isRecording()){this.lastElementStack=[...this.elementStack,r];this.nextTokenIndex=this.currIdx+1}}subrule(e,t,r,n,o){this.before(n);this.wrapper.wrapSubrule(e,t,o);this.after(n)}before(e){this.isRecording()||this.elementStack.push(e)}after(e){if(!this.isRecording()){let t=this.elementStack.lastIndexOf(e);t>=0&&this.elementStack.splice(t)}}get currIdx(){return this.wrapper.currIdx}}const ic={recoveryEnabled:!0,nodeLocationTracking:"full",skipValidations:!0,errorMessageProvider:new LangiumParserErrorMessageProvider};class ChevrotainWrapper extends EmbeddedActionsParser{constructor(t,r){const n=r&&"maxLookahead"in r;super(t,Object.assign(Object.assign(Object.assign({},ic),{lookaheadStrategy:n?new LLkLookaheadStrategy({maxLookahead:r.maxLookahead}):new LLStarLookaheadStrategy({logging:r.skipValidations?()=>{}:e})}),r))}get IS_RECORDING(){return this.RECORDING_PHASE}DEFINE_RULE(e,t){return this.RULE(e,t)}wrapSelfAnalysis(){this.performSelfAnalysis()}wrapConsume(e,t){return this.consume(e,t)}wrapSubrule(e,t,r){return this.subrule(e,t,{ARGS:[r]})}wrapOr(e,t){this.or(e,t)}wrapOption(e,t){this.option(e,t)}wrapMany(e,t){this.many(e,t)}wrapAtLeastOne(e,t){this.atLeastOne(e,t)}}function sc(e,t,r){const n={parser:t,tokens:r,ruleNames:new Map};lc(n,e);return t}function lc(e,t){const r=_r(t,!1);const n=ee(t.rules).filter(Ve).filter(e=>r.has(e));for(const t of n){let r=Object.assign(Object.assign({},e),{consume:1,optional:1,subrule:1,many:1,or:1});e.parser.rule(t,cc(r,t.definition))}}function cc(t,r,n=!1){let o;if(_t(r)){o=xc(t,r)}else if(rt(r)){o=uc(t,r)}else if(it(r)){o=cc(t,r.terminal)}else if(ut(r)){o=yc(t,r)}else if(vt(r)){o=dc(t,r)}else if(ot(r)){o=fc(t,r)}else if(Pt(r)){o=hc(t,r)}else if(ft(r)){o=_c(t,r)}else if(pt(r)){let e=t.consume++;o=(()=>t.parser.consume(e,Uo,r))}else{throw new ErrorWithLocation(r.$cstNode,`Unexpected element type: ${r.$type}`)}return Tc(t,n?e:gc(r),o,r.cardinality)}function uc(e,t){const r=br(t);return()=>e.parser.action(r,t)}function dc(e,t){const r=t.rule.ref;if(Ve(r)){let n=e.subrule++,o=r.fragment,a=t.arguments.length>0?pc(r,t.arguments):()=>({});return i=>e.parser.subrule(n,kc(e,r),o,t,a(i))}else if(qe(r)){let n=e.consume++,o=Rc(e,r.name);return()=>e.parser.consume(n,o,t)}else if(!r){throw new ErrorWithLocation(t.$cstNode,`Undefined rule: ${t.rule.$refText}`)}else{de(r)}}function pc(e,t){const r=t.map(e=>mc(e.value));return t=>{const n={};for(let o=0;o<r.length;o++){let a=e.parameters[o],i=r[o];n[a.name]=i(t)}return n}}function mc(t){if(Ee(t)){let e=mc(t.left),r=mc(t.right);return t=>e(t)||r(t)}else if(Ie(t)){let e=mc(t.left),r=mc(t.right);return t=>e(t)&&r(t)}else if($e(t)){let e=mc(t.value);return t=>!e(t)}else if(Ue(t)){let r=t.parameter.ref.name;return t=>t!==e&&t[r]===!0}else if(Re(t)){let e=Boolean(t.true);return()=>e}de(t)}function fc(e,t){if(t.elements.length===1){return cc(e,t.elements[0])}else{let r=[];for(const n of t.elements){let t={ALT:cc(e,n,!0)},o=gc(n);o&&(t.GATE=mc(o));r.push(t)}let n=e.or++;return t=>e.parser.alternatives(n,r.map(e=>{const r={ALT:()=>e.ALT(t)};const n=e.GATE;n&&(r.GATE=(()=>n(t)));return r}))}}function hc(e,t){if(t.elements.length===1){return cc(e,t.elements[0])}const r=[];for(const n of t.elements){let t={ALT:cc(e,n,!0)},o=gc(n);o&&(t.GATE=mc(o));r.push(t)}const n=e.or++;const o=(e,t)=>{const r=t.getRuleStack().join("-");return`uGroup_${e}_${r}`};const a=t=>e.parser.alternatives(n,r.map((r,a)=>{const i={ALT:()=>!0};const s=e.parser;i.ALT=(()=>{r.ALT(t);if(!s.isRecording()){let e=o(n,s);s.unorderedGroups.get(e)||s.unorderedGroups.set(e,[]);let t=s.unorderedGroups.get(e);typeof(t===null||t===void 0?void 0:t[a])==="undefined"&&(t[a]=!0)}});const l=r.GATE;if(l){i.GATE=(()=>l(t))}else{i.GATE=(()=>{const e=s.unorderedGroups.get(o(n,s));const t=!(e===null||e===void 0?void 0:e[a]);return t})}return i}));const i=Tc(e,gc(t),a,"*");return t=>{i(t);e.parser.isRecording()||e.parser.unorderedGroups.delete(o(n,e.parser))}}function _c(e,t){const r=t.elements.map(t=>cc(e,t));return e=>r.forEach(t=>t(e))}function gc(t){if(ft(t)){return t.guardCondition}return e}function yc(e,t,r=t.terminal){if(!r){if(!t.type.ref){throw new Error("Could not resolve reference to type: "+t.type.$refText)}let r=Cr(t.type.ref),n=r===null||r===void 0?void 0:r.terminal;if(!n){throw new Error("Could not find name assignment for type: "+br(t.type.ref))}return yc(e,t,n)}else if(vt(r)&&Ve(r.rule.ref)){let n=r.rule.ref,o=e.subrule++;return r=>e.parser.subrule(o,kc(e,n),!1,t,r)}else if(vt(r)&&qe(r.rule.ref)){let n=e.consume++,o=Rc(e,r.rule.ref.name);return()=>e.parser.consume(n,o,t)}else if(_t(r)){let n=e.consume++,o=Rc(e,r.value);return()=>e.parser.consume(n,o,t)}else{throw new Error("Could not build cross reference parser")}}function xc(e,t){const r=e.consume++;const n=e.tokens[t.value];if(!n){throw new Error("Could not find token for keyword: "+t.value)}return()=>e.parser.consume(r,n,t)}function Tc(t,r,n,o){const a=r&&mc(r);if(!o){if(a){let e=t.or++;return r=>t.parser.alternatives(e,[{ALT:()=>n(r),GATE:()=>a(r)},{ALT:ki(),GATE:()=>!a(r)}])}else{return n}}if(o==="*"){let r=t.many++;return o=>t.parser.many(r,{DEF:()=>n(o),GATE:a?()=>a(o):e})}else if(o==="+"){let e=t.many++;if(a){let r=t.or++;return o=>t.parser.alternatives(r,[{ALT:()=>t.parser.atLeastOne(e,{DEF:()=>n(o)}),GATE:()=>a(o)},{ALT:ki(),GATE:()=>!a(o)}])}else{return r=>t.parser.atLeastOne(e,{DEF:()=>n(r)})}}else if(o==="?"){let r=t.optional++;return o=>t.parser.optional(r,{DEF:()=>n(o),GATE:a?()=>a(o):e})}else{de(o)}}function kc(e,t){const r=vc(e,t);const n=e.parser.getRule(r);if(!n)throw new Error(`Rule "${r}" not found."`);return n}function vc(e,t){if(Ve(t)){return t.name}else if(e.ruleNames.has(t)){return e.ruleNames.get(t)}else{let r=t,n=r.$container,o=t.$type;while(!Ve(n)){if(ft(n)||ot(n)||Pt(n)){let e=n.elements.indexOf(r);o=e.toString()+":"+o}r=n;n=n.$container}let a=n;o=a.name+":"+o;e.ruleNames.set(t,o);return o}}function Rc(e,t){const r=e.tokens[t];if(!r)throw new Error(`Token "${t}" not found."`);return r}function Ac(e){const t=e.Grammar;const r=e.parser.Lexer;const n=new LangiumCompletionParser(e);sc(t,n,r.definition);n.finalize();return n}function Ic(e){const t=Cc(e);t.finalize();return t}function Cc(e){const t=e.Grammar;const r=e.parser.Lexer;const n=new LangiumParser(e);return sc(t,n,r.definition)}class DefaultTokenBuilder{constructor(){this.diagnostics=[]}buildTokens(e,t){const r=ee(_r(e,!1));const n=this.buildTerminalTokens(r);const o=this.buildKeywordTokens(r,n,t);n.forEach(e=>{const t=e.PATTERN;if(typeof t==="object"&&t&&"test"in t&&cr(t)){o.unshift(e)}else{o.push(e)}});return o}flushLexingReport(e){return{diagnostics:this.popDiagnostics()}}popDiagnostics(){const e=[...this.diagnostics];this.diagnostics=[];return e}buildTerminalTokens(e){return e.filter(qe).filter(e=>!e.fragment).map(e=>this.buildTerminalToken(e)).toArray()}buildTerminalToken(e){const t=wr(e);const r=this.requiresCustomPattern(t)?this.regexPatternFunction(t):t;const n={name:e.name,PATTERN:r};typeof r==="function"&&(n.LINE_BREAKS=!0);e.hidden&&(n.GROUP=cr(t)?Lexer.SKIPPED:"hidden");return n}requiresCustomPattern(e){if(e.flags.includes("u")||e.flags.includes("s")){return!0}else if(e.source.includes("?<=")||e.source.includes("?<!")){return!0}else{return!1}}regexPatternFunction(e){const t=new RegExp(e,e.flags+"y");return(e,r)=>{t.lastIndex=r;const n=t.exec(e);return n}}buildKeywordTokens(e,t,r){return e.filter(Ve).flatMap(e=>Ut(e).filter(_t)).distinct(e=>e.value).toArray().sort((e,t)=>t.value.length-e.value.length).map(e=>this.buildKeywordToken(e,t,Boolean(r===null||r===void 0?void 0:r.caseInsensitive)))}buildKeywordToken(e,t,r){const n=this.buildKeywordPattern(e,r);const o={name:e.value,PATTERN:n,LONGER_ALT:this.findLongerAlt(e,t)};typeof n==="function"&&(o.LINE_BREAKS=!0);return o}buildKeywordPattern(e,t){return t?new RegExp(dr(e.value)):e.value}findLongerAlt(e,t){return t.reduce((t,r)=>{const n=r===null||r===void 0?void 0:r.PATTERN;(n===null||n===void 0?void 0:n.source)&&pr("^"+n.source+"$",e.value)&&t.push(r);return t},[])}}var Ec={};class DefaultValueConverter{convert(e,t){let r=t.grammarSource;ut(r)&&(r=yr(r));if(vt(r)){let n=r.rule.ref;if(!n){throw new Error("This cst node was not parsed by a rule.")}return this.runConverter(n,e,t)}return e}runConverter(e,t,r){var n;switch(e.name.toUpperCase()){case"INT":return Ec.convertInt(t);case"STRING":return Ec.convertString(t);case"ID":return Ec.convertID(t)}switch((n=Lr(e))===null||n===void 0?void 0:n.toLowerCase()){case"number":return Ec.convertNumber(t);case"boolean":return Ec.convertBoolean(t);case"bigint":return Ec.convertBigint(t);case"date":return Ec.convertDate(t);default:return t}}}(function(e){function t(e){let t="";for(let n=1;n<e.length-1;n++){let o=e.charAt(n);if(o==="\\"){let o=e.charAt(++n);t+=r(o)}else{t+=o}}return t}e.convertString=t;function r(e){switch(e){case"b":return"\b";case"f":return"\f";case"n":return"\n";case"r":return"\r";case"t":return"\t";case"v":return"\v";case"0":return"\0";default:return e}}function n(e){if(e.charAt(0)==="^"){return e.substring(1)}else{return e}}e.convertID=n;function o(e){return parseInt(e)}e.convertInt=o;function a(e){return BigInt(e)}e.convertBigint=a;function i(e){return new Date(e)}e.convertDate=i;function s(e){return Number(e)}e.convertNumber=s;function l(e){return e.toLowerCase()==="true"}e.convertBoolean=l})(Ec);let Sc;function Nc(){if(Sc===e){throw new Error(`No runtime abstraction layer installed`)}return Sc}(function(t){function r(t){if(t===e){throw new Error(`No runtime abstraction layer provided`)}Sc=t}t.install=r})(Nc={});var Pc=Nc;function bc(e){return e===!0||e===!1}var Oc;var Lc;(function(e){const t={dispose(){}};e.None=function(){return t}})(Lc||(Oc=Lc={}));class CallbackList{add(e,t=null,r){if(!this._callbacks){this._callbacks=[];this._contexts=[]}this._callbacks.push(e);this._contexts.push(t);Array.isArray(r)&&r.push({dispose:()=>this.remove(e,t)})}remove(e,t=null){if(!this._callbacks){return}let r=!1;for(let n=0,o=this._callbacks.length;n<o;n++){if(this._callbacks[n]===e){if(this._contexts[n]===t){this._callbacks.splice(n,1);this._contexts.splice(n,1);return}else{r=!0}}}if(r){throw new Error("When adding a listener with a context, you should remove it with the same context")}}invoke(...e){if(!this._callbacks){return[]}const t=[],r=this._callbacks.slice(0),n=this._contexts.slice(0);for(let o=0,a=r.length;o<a;o++){try{t.push(r[o].apply(n[o],e))}catch(e){Pc().console.error(e)}}return t}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=e;this._contexts=e}}class Emitter{constructor(e){this._options=e}get event(){this._event||(this._event=((e,t,r)=>{this._callbacks||(this._callbacks=new CallbackList);this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this);this._callbacks.add(e,t);const n={dispose:()=>{if(!this._callbacks){return}this._callbacks.remove(e,t);n.dispose=Emitter._noop;this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this)}};Array.isArray(r)&&r.push(n);return n}));return this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){if(this._callbacks){this._callbacks.dispose();this._callbacks=e}}}Emitter._noop=function(){};var wc;var Dc;(function(e){e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:Oc.None});e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Oc.None});function t(t){return t&&(t===e.None||t===e.Cancelled||bc(t.isCancellationRequested)&&!!t.onCancellationRequested)}e.is=t})(Dc||(wc=Dc={}));const $c=Object.freeze(function(e,t){const r=Pc().timer.setTimeout(e.bind(t),0);return{dispose(){r.dispose()}}});class MutableToken{constructor(){this._isCancelled=!1}cancel(){if(!this._isCancelled){this._isCancelled=!0;if(this._emitter){this._emitter.fire(e);this.dispose()}}}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){if(this._isCancelled){return $c}this._emitter||(this._emitter=new Emitter);return this._emitter.event}dispose(){if(this._emitter){this._emitter.dispose();this._emitter=e}}}class CancellationTokenSource{get token(){this._token||(this._token=new MutableToken);return this._token}cancel(){if(!this._token){this._token=Dc.Cancelled}else{this._token.cancel()}}dispose(){if(!this._token){this._token=Dc.None}else this._token instanceof MutableToken&&this._token.dispose()}}function Mc(){return new Promise(e=>{if(typeof setImmediate==="undefined"){setTimeout(e,0)}else{setImmediate(e)}})}let Fc=0;let Gc=10;function Uc(){Fc=performance.now();return new CancellationTokenSource}var Kc=Symbol("OperationCancelled");function Vc(e){return e===Kc}async function Bc(e){if(e===wc.None){return}const t=performance.now();if(t-Fc>=Gc){Fc=t;await Mc();Fc=performance.now()}if(e.isCancellationRequested){throw Kc}}class Deferred{constructor(){this.promise=new Promise((e,t)=>{this.resolve=(t=>{e(t);return this});this.reject=(e=>{t(e);return this})})}}var jc={};class FullTextDocument_main{constructor(t,r,n,o){this._uri=t;this._languageId=r;this._version=n;this._content=o;this._lineOffsets=e}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(t,r)}return this._content}update(t,r){for(const r of t){if(FullTextDocument_main.isIncremental(r)){let e=Xc(r.range),t=this.offsetAt(e.start),n=this.offsetAt(e.end);this._content=this._content.substring(0,t)+r.text+this._content.substring(n,this._content.length)
let o=Math.max(e.start.line,0),a=Math.max(e.end.line,0),i=this._lineOffsets,s=zc(r.text,!1,t);if(a-o===s.length){for(let e=0,t=s.length;e<t;e++){i[e+o+1]=s[e]}}else{if(s.length<1e4){i.splice(o+1,a-o,...s)}else{this._lineOffsets=i=i.slice(0,o+1).concat(s,i.slice(a+1))}}let l=r.text.length-(n-t);if(l!==0){for(let e=o+1+s.length,t=i.length;e<t;e++){i[e]=i[e]+l}}}else if(FullTextDocument_main.isFull(r)){this._content=r.text;this._lineOffsets=e}else{throw new Error("Unknown change event received")}}this._version=r}getLineOffsets(){this._lineOffsets===e&&(this._lineOffsets=zc(this._content,!0));return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);const t=this.getLineOffsets();let r=0,n=t.length;if(n===0){return{line:0,character:e}}while(r<n){let o=Math.floor((r+n)/2);if(t[o]>e){n=o}else{r=o+1}}const o=r-1;e=this.ensureBeforeEOL(e,t[o]);return{line:o,character:e-t[o]}}offsetAt(e){const t=this.getLineOffsets();if(e.line>=t.length){return this._content.length}else if(e.line<0){return 0}const r=t[e.line];if(e.character<=0){return r}const n=e.line+1<t.length?t[e.line+1]:this._content.length;const o=Math.min(r+e.character,n);return this.ensureBeforeEOL(o,r)}ensureBeforeEOL(e,t){while(e>t&&Hc(this._content.charCodeAt(e-1))){e--}return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(t){return t!==e&&t!==null&&typeof t.text==="string"&&t.range!==e&&(t.rangeLength===e||typeof t.rangeLength==="number")}static isFull(t){return t!==e&&t!==null&&typeof t.text==="string"&&t.range===e&&t.rangeLength===e}}(function(e){function t(e,t,r,n){return new FullTextDocument_main(e,t,r,n)}e.create=t;function r(e,t,r){if(e instanceof FullTextDocument_main){e.update(t,r);return e}else{throw new Error("TextDocument.update: document must be created by TextDocument.create")}}e.update=r;function n(e,t){const r=e.getText();const n=Wc(t.map(Yc),(e,t)=>{const r=e.range.start.line-t.range.start.line;if(r===0){return e.range.start.character-t.range.start.character}return r});let o=0;const a=[];for(const t of n){let n=e.offsetAt(t.range.start);if(n<o){throw new Error("Overlapping edit")}else n>o&&a.push(r.substring(o,n));t.newText.length&&a.push(t.newText);o=e.offsetAt(t.range.end)}a.push(r.substr(o));return a.join("")}e.applyEdits=n})(jc);function Wc(e,t){if(e.length<=1){return e}const r=e.length/2|0;const n=e.slice(0,r);const o=e.slice(r);Wc(n,t);Wc(o,t);let a=0;let i=0;let s=0;while(a<n.length&&i<o.length){let r=t(n[a],o[i]);if(r<=0){e[s++]=n[a++]}else{e[s++]=o[i++]}}while(a<n.length){e[s++]=n[a++]}while(i<o.length){e[s++]=o[i++]}return e}function zc(e,t,r=0){const n=t?[r]:[];for(let t=0;t<e.length;t++){let o=e.charCodeAt(t);if(Hc(o)){o===13&&t+1<e.length&&e.charCodeAt(t+1)===10&&t++;n.push(r+t+1)}}return n}function Hc(e){return e===13||e===10}function Xc(e){const t=e.start;const r=e.end;if(t.line>r.line||t.line===r.line&&t.character>r.character){return{start:r,end:t}}return e}function Yc(e){const t=Xc(e.range);if(t!==e.range){return{newText:e.newText,range:t}}return e}var qc=function(){var e={};var r={exports:e};!function(t,n){if("object"==typeof e&&"object"==typeof r)r.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var o=n();for(var a in o)("object"==typeof e?e:t)[a]=o[a]}}(this,()=>(()=>{var e={470:e=>{function t(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",o=0,a=-1,i=0,s=0;s<=e.length;++s){if(s<e.length)r=e.charCodeAt(s);else{if(47===r)break;r=47}if(47===r){if(a===s-1||1===i);else if(a!==s-1&&2===i){if(n.length<2||2!==o||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",o=0):o=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),a=s,i=0;continue}}else if(2===n.length||1===n.length){n="",o=0,a=s,i=0;continue}t&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),o=s-a-1;a=s,i=0}else 46===r&&-1!==i?++i:i=-1}return n}var n={resolve:function(){for(var e,n="",o=!1,a=arguments.length-1;a>=-1&&!o;a--){var i;a>=0?i=arguments[a]:(void 0===e&&(e=process.cwd()),i=e),t(i),0!==i.length&&(n=i+"/"+n,o=47===i.charCodeAt(0))}return n=r(n,!o),o?n.length>0?"/"+n:"/":n.length>0?n:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),o=47===e.charCodeAt(e.length-1);return 0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&o&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var o=arguments[r];t(o),o.length>0&&(void 0===e?e=o:e+="/"+o)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r)return"";if((e=n.resolve(e))===(r=n.resolve(r)))return"";for(var o=1;o<e.length&&47===e.charCodeAt(o);++o);for(var a=e.length,i=a-o,s=1;s<r.length&&47===r.charCodeAt(s);++s);for(var l=r.length-s,c=i<l?i:l,u=-1,d=0;d<=c;++d){if(d===c){if(l>c){if(47===r.charCodeAt(s+d))return r.slice(s+d+1);if(0===d)return r.slice(s+d)}else i>c&&(47===e.charCodeAt(o+d)?u=d:0===d&&(u=0));break}var p=e.charCodeAt(o+d);if(p!==r.charCodeAt(s+d))break;47===p&&(u=d)}var m="";for(d=o+u+1;d<=a;++d)d!==a&&47!==e.charCodeAt(d)||(0===m.length?m+="..":m+="/..");return m.length>0?m+r.slice(s+u):(s+=u,47===r.charCodeAt(s)&&++s,r.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,o=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(r=e.charCodeAt(i))){if(!a){o=i;break}}else a=!1;return-1===o?n?"/":".":n&&1===o?"//":e.slice(0,o)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw new TypeError('"ext" argument must be a string');t(e);var n,o=0,a=-1,i=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var s=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!i){o=n+1;break}}else-1===l&&(i=!1,l=n+1),s>=0&&(c===r.charCodeAt(s)?-1==--s&&(a=n):(s=-1,a=l))}return o===a?a=l:-1===a&&(a=e.length),e.slice(o,a)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!i){o=n+1;break}}else-1===a&&(i=!1,a=n+1);return-1===a?"":e.slice(o,a)},extname:function(e){t(e);for(var r=-1,n=0,o=-1,a=!0,i=0,s=e.length-1;s>=0;--s){var l=e.charCodeAt(s);if(47!==l)-1===o&&(a=!1,o=s+1),46===l?-1===r?r=s:1!==i&&(i=1):-1!==r&&(i=-1);else if(!a){n=s+1;break}}return-1===r||-1===o||0===i||1===i&&r===o-1&&r===n+1?"":e.slice(r,o)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var r=t.dir||t.root,n=t.base||(t.name||"")+(t.ext||"");return r?r===t.root?r+n:r+"/"+n:n}(0,e)},parse:function(e){t(e);var r={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return r;var n,o=e.charCodeAt(0),a=47===o;a?(r.root="/",n=1):n=0;for(var i=-1,s=0,l=-1,c=!0,u=e.length-1,d=0;u>=n;--u)if(47!==(o=e.charCodeAt(u)))-1===l&&(c=!1,l=u+1),46===o?-1===i?i=u:1!==d&&(d=1):-1!==i&&(d=-1);else if(!c){s=u+1;break}return-1===i||-1===l||0===d||1===d&&i===l-1&&i===s+1?-1!==l&&(r.base=r.name=0===s&&a?e.slice(1,l):e.slice(s,l)):(0===s&&a?(r.name=e.slice(1,i),r.base=e.slice(1,l)):(r.name=e.slice(s,i),r.base=e.slice(s,l)),r.ext=e.slice(i,l)),s>0?r.dir=e.slice(0,s-1):a&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n},674:(e,t)=>{if(Object.defineProperty(t,"__esModule",{value:!0}),t.isWindows=void 0,"object"==typeof process)t.isWindows="win32"===process.platform;else if("object"==typeof navigator){let e=navigator.userAgent;t.isWindows=e.indexOf("Windows")>=0}},796:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.uriToFsPath=t.URI=void 0;const n=r(674),o=/^\w[\w\d+.-]*$/,a=/^\//,i=/^\/\//;function s(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!o.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path)if(e.authority){if(!a.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(i.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}const l="",c="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class u{static isUri(e){return e instanceof u||!!e&&"string"==typeof e.authority&&"string"==typeof e.fragment&&"string"==typeof e.path&&"string"==typeof e.query&&"string"==typeof e.scheme&&"string"==typeof e.fsPath&&"function"==typeof e.with&&"function"==typeof e.toString}constructor(e,t,r,n,o,a=!1){"object"==typeof e?(this.scheme=e.scheme||l,this.authority=e.authority||l,this.path=e.path||l,this.query=e.query||l,this.fragment=e.fragment||l):(this.scheme=function(e,t){return e||t?e:"file"}(e,a),this.authority=t||l,this.path=function(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==c&&(t=c+t):t=c}return t}(this.scheme,r||l),this.query=n||l,this.fragment=o||l,s(this,a))}get fsPath(){return g(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:r,path:n,query:o,fragment:a}=e;return void 0===t?t=this.scheme:null===t&&(t=l),void 0===r?r=this.authority:null===r&&(r=l),void 0===n?n=this.path:null===n&&(n=l),void 0===o?o=this.query:null===o&&(o=l),void 0===a?a=this.fragment:null===a&&(a=l),t===this.scheme&&r===this.authority&&n===this.path&&o===this.query&&a===this.fragment?this:new d(t,r,n,o,a)}static parse(e,t=!1){const r=p.exec(e);return r?new d(r[2]||l,k(r[4]||l),k(r[5]||l),k(r[7]||l),k(r[9]||l),t):new d(l,l,l,l,l)}static file(e){let t=l;if(n.isWindows&&(e=e.replace(/\\/g,c)),e[0]===c&&e[1]===c){let r=e.indexOf(c,2);-1===r?(t=e.substring(2),e=c):(t=e.substring(2,r),e=e.substring(r)||c)}return new d("file",t,e,l,l)}static from(e){const t=new d(e.scheme,e.authority,e.path,e.query,e.fragment);return s(t,!0),t}toString(e=!1){return y(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof u)return e;let t=new d(e);return t._formatted=e.external,t._fsPath=e._sep===m?e.fsPath:null,t}return e}}t.URI=u;const m=n.isWindows?1:void 0;class d extends u{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=g(this,!1)),this._fsPath}toString(e=!1){return e?y(this,!0):(this._formatted||(this._formatted=y(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=m),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const f={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function h(e,t,r){let n,o=-1;for(let a=0;a<e.length;a++){let i=e.charCodeAt(a);if(i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57||45===i||46===i||95===i||126===i||t&&47===i||r&&91===i||r&&93===i||r&&58===i)-1!==o&&(n+=encodeURIComponent(e.substring(o,a)),o=-1),void 0!==n&&(n+=e.charAt(a));else{void 0===n&&(n=e.substr(0,a));let t=f[i];void 0!==t?(-1!==o&&(n+=encodeURIComponent(e.substring(o,a)),o=-1),n+=t):-1===o&&(o=a)}}return-1!==o&&(n+=encodeURIComponent(e.substring(o))),void 0!==n?n:e}function _(e){let t;for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);35===n||63===n?(void 0===t&&(t=e.substr(0,r)),t+=f[n]):void 0!==t&&(t+=e[r])}return void 0!==t?t:e}function g(e,t){let r;return r=e.authority&&e.path.length>1&&"file"===e.scheme?`//${e.authority}${e.path}`:47===e.path.charCodeAt(0)&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&58===e.path.charCodeAt(2)?t?e.path.substr(1):e.path[1].toLowerCase()+e.path.substr(2):e.path,n.isWindows&&(r=r.replace(/\//g,"\\")),r}function y(e,t){const r=t?_:h;let n="",{scheme:o,authority:a,path:i,query:s,fragment:l}=e;if(o&&(n+=o,n+=":"),(a||"file"===o)&&(n+=c,n+=c),a){let e=a.indexOf("@");if(-1!==e){let t=a.substr(0,e);a=a.substr(e+1),e=t.lastIndexOf(":"),-1===e?n+=r(t,!1,!1):(n+=r(t.substr(0,e),!1,!1),n+=":",n+=r(t.substr(e+1),!1,!0)),n+="@"}a=a.toLowerCase(),e=a.lastIndexOf(":"),-1===e?n+=r(a,!1,!0):(n+=r(a.substr(0,e),!1,!0),n+=a.substr(e))}if(i){if(i.length>=3&&47===i.charCodeAt(0)&&58===i.charCodeAt(2)){let e=i.charCodeAt(1);e>=65&&e<=90&&(i=`/${String.fromCharCode(e+32)}:${i.substr(3)}`)}else if(i.length>=2&&58===i.charCodeAt(1)){let e=i.charCodeAt(0);e>=65&&e<=90&&(i=`${String.fromCharCode(e+32)}:${i.substr(2)}`)}n+=r(i,!0,!1)}return s&&(n+="?",n+=r(s,!1,!1)),l&&(n+="#",n+=t?l:h(l,!1,!1)),n}function x(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+x(e.substr(3)):e}}t.uriToFsPath=g;const T=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function k(e){return e.match(T)?e.replace(T,e=>x(e)):e}},679:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;const i=a(r(470)),s=i.posix||i,l="/";var c;!function(e){e.joinPath=function(e,...t){return e.with({path:s.join(e.path,...t)})},e.resolvePath=function(e,...t){let r=e.path,n=!1;r[0]!==l&&(r=l+r,n=!0);let o=s.resolve(r,...t);return n&&o[0]===l&&!e.authority&&(o=o.substring(1)),e.with({path:o})},e.dirname=function(e){if(0===e.path.length||e.path===l)return e;let t=s.dirname(e.path);return 1===t.length&&46===t.charCodeAt(0)&&(t=""),e.with({path:t})},e.basename=function(e){return s.basename(e.path)},e.extname=function(e){return s.extname(e.path)}}(c||(t.Utils=c={}))}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}var n={};return(()=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utils=n.URI=void 0;const e=r(796);Object.defineProperty(n,"URI",{enumerable:!0,get:function(){return e.URI}});const t=r(679);Object.defineProperty(n,"Utils",{enumerable:!0,get:function(){return t.Utils}})})(),n})());return t(r.exports)}.call(window);var Zc={};(function(e){e.basename=qc.Utils.basename;e.dirname=qc.Utils.dirname;e.extname=qc.Utils.extname;e.joinPath=qc.Utils.joinPath;e.resolvePath=qc.Utils.resolvePath;function t(e,t){return(e===null||e===void 0?void 0:e.toString())===(t===null||t===void 0?void 0:t.toString())}e.equals=t;function r(e,t){const r=typeof e==="string"?e:e.path;const n=typeof t==="string"?t:t.path;const o=r.split("/").filter(e=>e.length>0);const a=n.split("/").filter(e=>e.length>0);let i=0;for(;i<o.length;i++){if(o[i]!==a[i]){break}}const s="../".repeat(o.length-i);const l=a.slice(i).join("/");return s+l}e.relative=r;function n(e){return qc.URI.parse(e.toString()).toString()}e.normalize=n})(Zc);var Jc={};(function(e){e[e["Changed"]=0]="Changed";e[e["Parsed"]=1]="Parsed";e[e["IndexedContent"]=2]="IndexedContent";e[e["ComputedScopes"]=3]="ComputedScopes";e[e["Linked"]=4]="Linked";e[e["IndexedReferences"]=5]="IndexedReferences";e[e["Validated"]=6]="Validated"})(Jc);class DefaultLangiumDocumentFactory{constructor(e){this.serviceRegistry=e.ServiceRegistry;this.textDocuments=e.workspace.TextDocuments;this.fileSystemProvider=e.workspace.FileSystemProvider}async fromUri(e,t=wc.None){const r=await this.fileSystemProvider.readFile(e);return this.createAsync(e,r,t)}fromTextDocument(t,r,n){r=r!==null&&r!==void 0?r:e.parse(t.uri);if(wc.is(n)){return this.createAsync(r,t,n)}else{return this.create(r,t,n)}}fromString(e,t,r){if(wc.is(r)){return this.createAsync(t,e,r)}else{return this.create(t,e,r)}}fromModel(e,t){return this.create(t,{$model:e})}create(t,r,n){if(typeof r==="string"){let o=this.parse(t,r,n);return this.createLangiumDocument(o,t,e,r)}else if("$model"in r){let e={value:r.$model,parserErrors:[],lexerErrors:[]};return this.createLangiumDocument(e,t)}else{let e=this.parse(t,r.getText(),n);return this.createLangiumDocument(e,t,r)}}async createAsync(t,r,n){if(typeof r==="string"){let o=await this.parseAsync(t,r,n);return this.createLangiumDocument(o,t,e,r)}else{let e=await this.parseAsync(t,r.getText(),n);return this.createLangiumDocument(e,t,r)}}createLangiumDocument(e,t,r,n){let o;if(r){o={parseResult:e,uri:t,state:1,references:[],textDocument:r}}else{let r=this.createTextDocumentGetter(t,n);o={parseResult:e,uri:t,state:1,references:[],get textDocument(){return r()}}}e.value.$document=o;return o}async update(e,t){var r,n;const o=(r=e.parseResult.value.$cstNode)===null||r===void 0?void 0:r.root.fullText;const a=(n=this.textDocuments)===null||n===void 0?void 0:n.get(e.uri.toString());const i=a?a.getText():await this.fileSystemProvider.readFile(e.uri);if(a){Object.defineProperty(e,"textDocument",{value:a})}else{let t=this.createTextDocumentGetter(e.uri,i);Object.defineProperty(e,"textDocument",{get:t})}if(o!==i){e.parseResult=await this.parseAsync(e.uri,i,t);e.parseResult.value.$document=e}e.state=1;return e}parse(e,t,r){const n=this.serviceRegistry.getServices(e);return n.parser.LangiumParser.parse(t,r)}parseAsync(e,t,r){const n=this.serviceRegistry.getServices(e);return n.parser.AsyncParser.parse(t,r)}createTextDocumentGetter(t,r){const n=this.serviceRegistry;let o=e;return()=>o!==null&&o!==void 0?o:o=jc.create(t.toString(),n.getServices(t).LanguageMetaData.languageId,0,r!==null&&r!==void 0?r:"")}}class DefaultLangiumDocuments{constructor(e){this.documentMap=new Map;this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory;this.serviceRegistry=e.ServiceRegistry}get all(){return ee(this.documentMap.values())}addDocument(e){const t=e.uri.toString();if(this.documentMap.has(t)){throw new Error(`A document with the URI '${t}' is already present.`)}this.documentMap.set(t,e)}getDocument(e){const t=e.toString();return this.documentMap.get(t)}async getOrCreateDocument(e,t){let r=this.getDocument(e);if(r){return r}r=await this.langiumDocumentFactory.fromUri(e,t);this.addDocument(r);return r}createDocument(e,t,r){if(r){return this.langiumDocumentFactory.fromString(t,e,r).then(e=>{this.addDocument(e);return e})}else{let r=this.langiumDocumentFactory.fromString(t,e);this.addDocument(r);return r}}hasDocument(e){return this.documentMap.has(e.toString())}invalidateDocument(t){const r=t.toString();const n=this.documentMap.get(r);if(n){let r=this.serviceRegistry.getServices(t).references.Linker;r.unlink(n);n.state=0;n.precomputedScopes=e;n.diagnostics=e}return n}deleteDocument(e){const t=e.toString();const r=this.documentMap.get(t);if(r){r.state=0;this.documentMap.delete(t)}return r}}const Qc=Symbol("ref_resolving");class DefaultLinker{constructor(e){this.reflection=e.shared.AstReflection;this.langiumDocuments=(()=>e.shared.workspace.LangiumDocuments);this.scopeProvider=e.references.ScopeProvider;this.astNodeLocator=e.workspace.AstNodeLocator}async link(e,t=wc.None){for(const r of Kt(e.parseResult.value)){await Bc(t);Bt(r).forEach(t=>this.doLink(t,e))}}doLink(t,r){var n;const o=t.reference;if(o._ref===e){o._ref=Qc;try{let r=this.getCandidate(t);if(W(r)){o._ref=r}else{o._nodeDescription=r;if(this.langiumDocuments().hasDocument(r.documentUri)){let e=this.loadAstNode(r);o._ref=e!==null&&e!==void 0?e:this.createLinkingError(t,r)}else{o._ref=e}}}catch(e){console.error(`An error occurred while resolving reference to '${o.$refText}':`,e);const r=(n=e.message)!==null&&n!==void 0?n:String(e);o._ref=Object.assign(Object.assign({},t),{message:`An error occurred while resolving reference to '${o.$refText}': ${r}`})}r.references.push(o)}}unlink(e){for(const t of e.references){delete t._ref;delete t._nodeDescription}e.references=[]}getCandidate(e){const t=this.scopeProvider.getScope(e);const r=t.getElement(e.reference.$refText);return r!==null&&r!==void 0?r:this.createLinkingError(e)}buildReference(t,r,n,o){const a=this;const i={$refNode:n,$refText:o,get ref(){var n;if(V(this._ref)){return this._ref}else if(j(this._nodeDescription)){let e=a.loadAstNode(this._nodeDescription);this._ref=e!==null&&e!==void 0?e:a.createLinkingError({reference:i,container:t,property:r},this._nodeDescription)}else if(this._ref===e){this._ref=Qc;let o=Ft(t).$document,s=a.getLinkedNode({reference:i,container:t,property:r});if(s.error&&o&&o.state<3){return this._ref=e}this._ref=(n=s.node)!==null&&n!==void 0?n:s.error;this._nodeDescription=s.descr;o===null||o===void 0?void 0:o.references.push(this)}else if(this._ref===Qc){throw new Error(`Cyclic reference resolution detected: ${a.astNodeLocator.getAstNodePath(t)}/${r} (symbol '${o}')`)}return V(this._ref)?this._ref:e},get $nodeDescription(){return this._nodeDescription},get error(){return W(this._ref)?this._ref:e}};return i}getLinkedNode(e){var t;try{let r=this.getCandidate(e);if(W(r)){return{error:r}}let n=this.loadAstNode(r);if(n){return{node:n,descr:r}}else{return{descr:r,error:this.createLinkingError(e,r)}}}catch(r){console.error(`An error occurred while resolving reference to '${e.reference.$refText}':`,r);const n=(t=r.message)!==null&&t!==void 0?t:String(r);return{error:Object.assign(Object.assign({},e),{message:`An error occurred while resolving reference to '${e.reference.$refText}': ${n}`})}}}loadAstNode(t){if(t.node){return t.node}const r=this.langiumDocuments().getDocument(t.documentUri);if(!r){return e}return this.astNodeLocator.getAstNode(r.parseResult.value,t.path)}createLinkingError(e,t){const r=Ft(e.container).$document;r&&r.state<Jc.ComputedScopes&&console.warn(`Attempted reference resolution before document reached ComputedScopes state (${r.uri}).`);const n=this.reflection.getReferenceType(e);return Object.assign(Object.assign({},e),{message:`Could not resolve reference to ${n} named '${e.reference.$refText}'.`,targetDescription:t})}}function eu(e){return typeof e.name==="string"}class DefaultNameProvider{getName(t){if(eu(t)){return t.name}return e}getNameNode(e){return kr(e.$cstNode,"name")}}class DefaultReferences{constructor(e){this.nameProvider=e.references.NameProvider;this.index=e.shared.workspace.IndexManager;this.nodeLocator=e.workspace.AstNodeLocator}findDeclaration(t){if(t){let e=Ir(t),r=t.astNode;if(e&&r){let n=r[e.feature];if(B(n)){return n.ref}else if(Array.isArray(n)){for(const e of n){if(B(e)&&e.$refNode&&e.$refNode.offset<=t.offset&&e.$refNode.end>=t.end){return e.ref}}}}if(r){let e=this.nameProvider.getNameNode(r);if(e&&(e===t||re(t,e))){return r}}}return e}findDeclarationNode(t){const r=this.findDeclaration(t);if(r===null||r===void 0?void 0:r.$cstNode){let e=this.nameProvider.getNameNode(r);return e!==null&&e!==void 0?e:r.$cstNode}return e}findReferences(e,t){const r=[];if(t.includeDeclaration){let t=this.getReferenceToSelf(e);t&&r.push(t)}let n=this.index.findAllReferences(e,this.nodeLocator.getAstNodePath(e));t.documentUri&&(n=n.filter(e=>Zc.equals(e.sourceUri,t.documentUri)));r.push(...n);return ee(r)}getReferenceToSelf(t){const r=this.nameProvider.getNameNode(t);if(r){let e=Mt(t),n=this.nodeLocator.getAstNodePath(t);return{sourceUri:e.uri,sourcePath:n,targetUri:e.uri,targetPath:n,segment:oe(r),local:!0}}return e}}class MultiMap{constructor(e){this.map=new Map;if(e){for(const[t,r]of e){this.add(t,r)}}}get size(){return q.sum(ee(this.map.values()).map(e=>e.length))}clear(){this.map.clear()}delete(t,r){if(r===e){return this.map.delete(t)}else{let e=this.map.get(t);if(e){let n=e.indexOf(r);if(n>=0){if(e.length===1){this.map.delete(t)}else{e.splice(n,1)}return!0}}return!1}}get(e){var t;return(t=this.map.get(e))!==null&&t!==void 0?t:[]}has(t,r){if(r===e){return this.map.has(t)}else{let e=this.map.get(t);if(e){return e.indexOf(r)>=0}return!1}}add(e,t){if(this.map.has(e)){this.map.get(e).push(t)}else{this.map.set(e,[t])}return this}addAll(e,t){if(this.map.has(e)){this.map.get(e).push(...t)}else{this.map.set(e,Array.from(t))}return this}forEach(e){this.map.forEach((t,r)=>t.forEach(t=>e(t,r,this)))}[Symbol.iterator](){return this.entries().iterator()}entries(){return ee(this.map.entries()).flatMap(([e,t])=>t.map(t=>[e,t]))}keys(){return ee(this.map.keys())}values(){return ee(this.map.values()).flat()}entriesGroupedByKey(){return ee(this.map.entries())}}class BiMap{get size(){return this.map.size}constructor(e){this.map=new Map;this.inverse=new Map;if(e){for(const[t,r]of e){this.set(t,r)}}}clear(){this.map.clear();this.inverse.clear()}set(e,t){this.map.set(e,t);this.inverse.set(t,e);return this}get(e){return this.map.get(e)}getKey(e){return this.inverse.get(e)}delete(t){const r=this.map.get(t);if(r!==e){this.map.delete(t);this.inverse.delete(r);return!0}return!1}}class DefaultScopeComputation{constructor(e){this.nameProvider=e.references.NameProvider;this.descriptions=e.workspace.AstNodeDescriptionProvider}async computeExports(t,r=wc.None){return this.computeExportsForNode(t.parseResult.value,t,e,r)}async computeExportsForNode(e,t,r=Gt,n=wc.None){const o=[];this.exportNode(e,o,t);for(const a of r(e)){await Bc(n);this.exportNode(a,o,t)}return o}exportNode(e,t,r){const n=this.nameProvider.getName(e);n&&t.push(this.descriptions.createDescription(e,n,r))}async computeLocalScopes(e,t=wc.None){const r=e.parseResult.value;const n=new MultiMap;for(const o of Ut(r)){await Bc(t);this.processNode(o,e,n)}return n}processNode(e,t,r){const n=e.$container;if(n){let o=this.nameProvider.getName(e);o&&r.add(n,this.descriptions.createDescription(e,o,t))}}}class StreamScope{constructor(e,t,r){var n;this.elements=e;this.outerScope=t;this.caseInsensitive=(n=r===null||r===void 0?void 0:r.caseInsensitive)!==null&&n!==void 0?n:!1}getAllElements(){if(this.outerScope){return this.elements.concat(this.outerScope.getAllElements())}else{return this.elements}}getElement(t){const r=this.caseInsensitive?this.elements.find(e=>e.name.toLowerCase()===t.toLowerCase()):this.elements.find(e=>e.name===t);if(r){return r}if(this.outerScope){return this.outerScope.getElement(t)}return e}}class MapScope{constructor(e,t,r){var n;this.elements=new Map;this.caseInsensitive=(n=r===null||r===void 0?void 0:r.caseInsensitive)!==null&&n!==void 0?n:!1;for(const t of e){let e=this.caseInsensitive?t.name.toLowerCase():t.name;this.elements.set(e,t)}this.outerScope=t}getElement(t){const r=this.caseInsensitive?t.toLowerCase():t;const n=this.elements.get(r);if(n){return n}if(this.outerScope){return this.outerScope.getElement(t)}return e}getAllElements(){let e=ee(this.elements.values());this.outerScope&&(e=e.concat(this.outerScope.getAllElements()));return e}}class DisposableCache{constructor(){this.toDispose=[];this.isDisposed=!1}onDispose(e){this.toDispose.push(e)}dispose(){this.throwIfDisposed();this.clear();this.isDisposed=!0;this.toDispose.forEach(e=>e.dispose())}throwIfDisposed(){if(this.isDisposed){throw new Error("This cache has already been disposed")}}}class SimpleCache extends DisposableCache{constructor(){super(...arguments);this.cache=new Map}has(e){this.throwIfDisposed();return this.cache.has(e)}set(e,t){this.throwIfDisposed();this.cache.set(e,t)}get(t,r){this.throwIfDisposed();if(this.cache.has(t)){return this.cache.get(t)}else if(r){let e=r();this.cache.set(t,e);return e}else{return e}}delete(e){this.throwIfDisposed();return this.cache.delete(e)}clear(){this.throwIfDisposed();this.cache.clear()}}class ContextCache extends DisposableCache{constructor(e){super();this.cache=new Map;this.converter=e!==null&&e!==void 0?e:e=>e}has(e,t){this.throwIfDisposed();return this.cacheForContext(e).has(t)}set(e,t,r){this.throwIfDisposed();this.cacheForContext(e).set(t,r)}get(t,r,n){this.throwIfDisposed();const o=this.cacheForContext(t);if(o.has(r)){return o.get(r)}else if(n){let e=n();o.set(r,e);return e}else{return e}}delete(e,t){this.throwIfDisposed();return this.cacheForContext(e).delete(t)}clear(e){this.throwIfDisposed();if(e){let t=this.converter(e);this.cache.delete(t)}else{this.cache.clear()}}cacheForContext(e){const t=this.converter(e);let r=this.cache.get(t);if(!r){r=new Map;this.cache.set(t,r)}return r}}class WorkspaceCache extends SimpleCache{constructor(e,t){super();if(t){this.toDispose.push(e.workspace.DocumentBuilder.onBuildPhase(t,()=>{this.clear()}));this.toDispose.push(e.workspace.DocumentBuilder.onUpdate((e,t)=>{t.length>0&&this.clear()}))}else{this.toDispose.push(e.workspace.DocumentBuilder.onUpdate(()=>{this.clear()}))}}}class DefaultScopeProvider{constructor(e){this.reflection=e.shared.AstReflection;this.nameProvider=e.references.NameProvider;this.descriptions=e.workspace.AstNodeDescriptionProvider;this.indexManager=e.shared.workspace.IndexManager;this.globalScopeCache=new WorkspaceCache(e.shared)}getScope(e){const t=[];const r=this.reflection.getReferenceType(e);const n=Mt(e.container).precomputedScopes;if(n){let o=e.container;do{let e=n.get(o);e.length>0&&t.push(ee(e).filter(e=>this.reflection.isSubtype(e.type,r)));o=o.$container}while(o)}let o=this.getGlobalScope(r,e);for(let e=t.length-1;e>=0;e--){o=this.createScope(t[e],o)}return o}createScope(e,t,r){return new StreamScope(ee(e),t,r)}createScopeForNodes(t,r,n){const o=ee(t).map(t=>{const r=this.nameProvider.getName(t);if(r){return this.descriptions.createDescription(t,r)}return e}).nonNullable();return new StreamScope(o,r,n)}getGlobalScope(e,t){return this.globalScopeCache.get(e,()=>new MapScope(this.indexManager.allElements(e)))}}function tu(e){return typeof e.$comment==="string"}function ru(e){return typeof e==="object"&&!!e&&("$ref"in e||"$error"in e)}class DefaultJsonSerializer{constructor(e){this.ignoreProperties=new Set(["$container","$containerProperty","$containerIndex","$document","$cstNode"]);this.langiumDocuments=e.shared.workspace.LangiumDocuments;this.astNodeLocator=e.workspace.AstNodeLocator;this.nameProvider=e.references.NameProvider;this.commentProvider=e.documentation.CommentProvider}serialize(t,r){const n=r!==null&&r!==void 0?r:{};const o=r===null||r===void 0?void 0:r.replacer;const a=(e,t)=>this.replacer(e,t,n);const i=o?(e,t)=>o(e,t,a):a;try{this.currentDocument=Mt(t);return JSON.stringify(t,i,r===null||r===void 0?void 0:r.space)}finally{this.currentDocument=e}}deserialize(e,t){const r=t!==null&&t!==void 0?t:{};const n=JSON.parse(e);this.linkNode(n,n,r);return n}replacer(t,r,{refText:n,sourceText:o,textRegions:a,comments:i,uriConverter:s}){var l,c,u,d;if(this.ignoreProperties.has(t)){return e}else if(B(r)){let t=r.ref,o=n?r.$refText:e;if(t){let e=Mt(t),n="";if(this.currentDocument&&this.currentDocument!==e){if(s){n=s(e.uri,r)}else{n=e.uri.toString()}}let a=this.astNodeLocator.getAstNodePath(t);return{$ref:`${n}#${a}`,$refText:o}}else{return{$error:(c=(l=r.error)===null||l===void 0?void 0:l.message)!==null&&c!==void 0?c:"Could not resolve reference",$refText:o}}}else if(V(r)){let n=e;if(a){n=this.addAstNodeRegionWithAssignmentsTo(Object.assign({},r));(!t||r.$document)&&(n===null||n===void 0?void 0:n.$textRegion)&&(n.$textRegion.documentURI=(u=this.currentDocument)===null||u===void 0?void 0:u.uri.toString())}if(o&&!t){n!==null&&n!==void 0?n:n=Object.assign({},r);n.$sourceText=(d=r.$cstNode)===null||d===void 0?void 0:d.text}if(i){n!==null&&n!==void 0?n:n=Object.assign({},r);let e=this.commentProvider.getComment(r);e&&(n.$comment=e.replace(/\r/g,""))}return n!==null&&n!==void 0?n:r}else{return r}}addAstNodeRegionWithAssignmentsTo(t){const r=e=>({offset:e.offset,end:e.end,length:e.length,range:e.range});if(t.$cstNode){let e=t.$textRegion=r(t.$cstNode),n=e.assignments={}
Object.keys(t).filter(e=>!e.startsWith("$")).forEach(e=>{const o=Tr(t.$cstNode,e).map(r);o.length!==0&&(n[e]=o)});return t}return e}linkNode(e,t,r,n,o,a){for(const[n,o]of Object.entries(e)){if(Array.isArray(o)){for(let a=0;a<o.length;a++){let i=o[a];if(ru(i)){o[a]=this.reviveReference(e,n,t,i,r)}else V(i)&&this.linkNode(i,t,r,e,n,a)}}else if(ru(o)){e[n]=this.reviveReference(e,n,t,o,r)}else V(o)&&this.linkNode(o,t,r,e,n)}const i=e;i.$container=n;i.$containerProperty=o;i.$containerIndex=a}reviveReference(t,r,n,o,a){let i=o.$refText;let s=o.$error;if(o.$ref){let e=this.getRefNode(n,o.$ref,a.uriConverter);if(V(e)){i||(i=this.nameProvider.getName(e));return{$refText:i!==null&&i!==void 0?i:"",ref:e}}else{s=e}}if(s){let e={$refText:i!==null&&i!==void 0?i:""};e.error={container:t,property:r,message:s,reference:e};return e}else{return e}}getRefNode(e,t,r){try{let n=t.indexOf("#");if(n===0){let r=this.astNodeLocator.getAstNode(e,t.substring(1));if(!r){return"Could not resolve path: "+t}return r}if(n<0){let e=r?r(t):qc.URI.parse(t),n=this.langiumDocuments.getDocument(e);if(!n){return"Could not find document for URI: "+t}return n.parseResult.value}let o=r?r(t.substring(0,n)):qc.URI.parse(t.substring(0,n)),a=this.langiumDocuments.getDocument(o);if(!a){return"Could not find document for URI: "+t}if(n===t.length-1){return a.parseResult.value}let i=this.astNodeLocator.getAstNode(a.parseResult.value,t.substring(n+1));if(!i){return"Could not resolve URI: "+t}return i}catch(e){return String(e)}}}class DefaultServiceRegistry{get map(){return this.fileExtensionMap}constructor(e){this.languageIdMap=new Map;this.fileExtensionMap=new Map;this.textDocuments=e===null||e===void 0?void 0:e.workspace.TextDocuments}register(t){const r=t.LanguageMetaData;for(const e of r.fileExtensions){this.fileExtensionMap.has(e)&&console.warn(`The file extension ${e} is used by multiple languages. It is now assigned to '${r.languageId}'.`);this.fileExtensionMap.set(e,t)}this.languageIdMap.set(r.languageId,t);if(this.languageIdMap.size===1){this.singleton=t}else{this.singleton=e}}getServices(t){var r,n;if(this.singleton!==e){return this.singleton}if(this.languageIdMap.size===0){throw new Error("The service registry is empty. Use `register` to register the services of a language.")}const o=(n=(r=this.textDocuments)===null||r===void 0?void 0:r.get(t))===null||n===void 0?void 0:n.languageId;if(o!==e){let e=this.languageIdMap.get(o);if(e){return e}}const a=Zc.extname(t);const i=this.fileExtensionMap.get(a);if(!i){if(o){throw new Error(`The service registry contains no services for the extension '${a}' for language '${o}'.`)}else{throw new Error(`The service registry contains no services for the extension '${a}'.`)}}return i}hasServices(e){try{this.getServices(e);return!0}catch(e){return!1}}get all(){return Array.from(this.languageIdMap.values())}}var nu={};function ou(e){return{code:e}}(function(e){e.all=["fast","slow","built-in"]})(nu);class ValidationRegistry{constructor(e){this.entries=new MultiMap;this.entriesBefore=[];this.entriesAfter=[];this.reflection=e.shared.AstReflection}register(e,t=this,r="fast"){if(r==="built-in"){throw new Error("The 'built-in' category is reserved for lexer, parser, and linker errors.")}for(const[n,o]of Object.entries(e)){let e=o;if(Array.isArray(e)){for(const o of e){let e={check:this.wrapValidationException(o,t),category:r};this.addEntry(n,e)}}else if(typeof e==="function"){let o={check:this.wrapValidationException(e,t),category:r};this.addEntry(n,o)}else{de(e)}}}wrapValidationException(e,t){return async(r,n,o)=>{await this.handleException(()=>e.call(t,r,n,o),"An error occurred during validation",n,r)}}async handleException(e,t,r,n){try{await e()}catch(e){if(Vc(e)){throw e}console.error(`${t}:`,e);if(e instanceof Error&&e.stack){console.error(e.stack)}const o=e instanceof Error?e.message:String(e);r("error",`${t}: ${o}`,{node:n})}}addEntry(e,t){if(e==="AstNode"){this.entries.add("AstNode",t);return}for(const r of this.reflection.getAllSubTypes(e)){this.entries.add(r,t)}}getChecks(e,t){let r=ee(this.entries.get(e)).concat(this.entries.get("AstNode"));t&&(r=r.filter(e=>t.includes(e.category)));return r.map(e=>e.check)}registerBeforeDocument(e,t=this){this.entriesBefore.push(this.wrapPreparationException(e,"An error occurred during set-up of the validation",t))}registerAfterDocument(e,t=this){this.entriesAfter.push(this.wrapPreparationException(e,"An error occurred during tear-down of the validation",t))}wrapPreparationException(e,t,r){return async(n,o,a,i)=>{await this.handleException(()=>e.call(r,n,o,a,i),t,o,n)}}get checksBefore(){return this.entriesBefore}get checksAfter(){return this.entriesAfter}}var au={};class DefaultDocumentValidator{constructor(e){this.validationRegistry=e.validation.ValidationRegistry;this.metadata=e.LanguageMetaData}async validateDocument(e,t={},r=wc.None){const n=e.parseResult;const o=[];await Bc(r);if(!t.categories||t.categories.includes("built-in")){this.processLexingErrors(n,o,t);if(t.stopAfterLexingErrors&&o.some(e=>{var t;return((t=e.data)===null||t===void 0?void 0:t.code)===au.LexingError})){return o}this.processParsingErrors(n,o,t);if(t.stopAfterParsingErrors&&o.some(e=>{var t;return((t=e.data)===null||t===void 0?void 0:t.code)===au.ParsingError})){return o}this.processLinkingErrors(e,o,t);if(t.stopAfterLinkingErrors&&o.some(e=>{var t;return((t=e.data)===null||t===void 0?void 0:t.code)===au.LinkingError})){return o}}try{o.push(...await this.validateAst(n.value,t,r))}catch(e){if(Vc(e)){throw e}console.error("An error occurred during validation:",e)}await Bc(r);return o}processLexingErrors(e,t,r){var n,o,a;const i=[...e.lexerErrors,...(o=(n=e.lexerReport)===null||n===void 0?void 0:n.diagnostics)!==null&&o!==void 0?o:[]];for(const e of i){let r=(a=e.severity)!==null&&a!==void 0?a:"error",n={severity:su(r),range:{start:{line:e.line-1,character:e.column-1},end:{line:e.line-1,character:e.column+e.length-1}},message:e.message,data:lu(r),source:this.getSource()};t.push(n)}}processParsingErrors(t,r,n){for(const n of t.parserErrors){let t=e;if(isNaN(n.token.startOffset)){if("previousToken"in n){let e=n.previousToken;if(!isNaN(e.startOffset)){let r={line:e.endLine-1,character:e.endColumn};t={start:r,end:r}}else{let e={line:0,character:0};t={start:e,end:e}}}}else{t=ne(n.token)}if(t){let e={severity:su("error"),range:t,message:n.message,data:ou(au.ParsingError),source:this.getSource()};r.push(e)}}}processLinkingErrors(e,t,r){for(const r of e.references){let e=r.error;if(e){let r={node:e.container,property:e.property,index:e.index,data:{code:au.LinkingError,containerType:e.container.$type,property:e.property,refText:e.reference.$refText}};t.push(this.toDiagnostic("error",e.message,r))}}}async validateAst(e,t,r=wc.None){const n=[];const o=(e,t,r)=>{n.push(this.toDiagnostic(e,t,r))};await this.validateAstBefore(e,t,o,r);await this.validateAstNodes(e,t,o,r);await this.validateAstAfter(e,t,o,r);return n}async validateAstBefore(e,t,r,n=wc.None){var o;const a=this.validationRegistry.checksBefore;for(const i of a){await Bc(n);await i(e,r,(o=t.categories)!==null&&o!==void 0?o:[],n)}}async validateAstNodes(e,t,r,n=wc.None){await Promise.all(Kt(e).map(async e=>{await Bc(n);const o=this.validationRegistry.getChecks(e.$type,t.categories);for(const t of o){await t(e,r,n)}}))}async validateAstAfter(e,t,r,n=wc.None){var o;const a=this.validationRegistry.checksAfter;for(const i of a){await Bc(n);await i(e,r,(o=t.categories)!==null&&o!==void 0?o:[],n)}}toDiagnostic(e,t,r){return{message:t,range:iu(r),severity:su(e),code:r.code,codeDescription:r.codeDescription,tags:r.tags,relatedInformation:r.relatedInformation,data:r.data,source:this.getSource()}}getSource(){return this.metadata.languageId}}function iu(e){if(e.range){return e.range}let t;if(typeof e.property==="string"){t=kr(e.node.$cstNode,e.property,e.index)}else typeof e.keyword==="string"&&(t=Rr(e.node.$cstNode,e.keyword,e.index));t!==null&&t!==void 0?t:t=e.node.$cstNode;if(!t){return{start:{line:0,character:0},end:{line:0,character:0}}}return t.range}function su(e){switch(e){case"error":return 1;case"warning":return 2;case"info":return 3;case"hint":return 4;default:throw new Error("Invalid diagnostic severity: "+e)}}function lu(e){switch(e){case"error":return ou(au.LexingError);case"warning":return ou(au.LexingWarning);case"info":return ou(au.LexingInfo);case"hint":return ou(au.LexingHint);default:throw new Error("Invalid diagnostic severity: "+e)}}(function(e){e.LexingError="lexing-error";e.LexingWarning="lexing-warning";e.LexingInfo="lexing-info";e.LexingHint="lexing-hint";e.ParsingError="parsing-error";e.LinkingError="linking-error"})(au);class DefaultAstNodeDescriptionProvider{constructor(e){this.astNodeLocator=e.workspace.AstNodeLocator;this.nameProvider=e.references.NameProvider}createDescription(e,t,r){const n=r!==null&&r!==void 0?r:Mt(e);t!==null&&t!==void 0?t:t=this.nameProvider.getName(e);const o=this.astNodeLocator.getAstNodePath(e);if(!t){throw new Error(`Node at path ${o} has no name.`)}let a;const i=()=>{var t;return a!==null&&a!==void 0?a:a=oe((t=this.nameProvider.getNameNode(e))!==null&&t!==void 0?t:e.$cstNode)};return{node:e,name:t,get nameSegment(){return i()},selectionSegment:oe(e.$cstNode),type:e.$type,documentUri:n.uri,path:o}}}class DefaultReferenceDescriptionProvider{constructor(e){this.nodeLocator=e.workspace.AstNodeLocator}async createDescriptions(e,t=wc.None){const r=[];const n=e.parseResult.value;for(const e of Kt(n)){await Bc(t);Bt(e).filter(e=>!W(e)).forEach(e=>{const t=this.createDescription(e);t&&r.push(t)})}return r}createDescription(t){const r=t.reference.$nodeDescription;const n=t.reference.$refNode;if(!r||!n){return e}const o=Mt(t.container).uri;return{sourceUri:o,sourcePath:this.nodeLocator.getAstNodePath(t.container),targetUri:r.documentUri,targetPath:r.path,segment:oe(n),local:Zc.equals(r.documentUri,o)}}}class DefaultAstNodeLocator{constructor(){this.segmentSeparator="/";this.indexSeparator="@"}getAstNodePath(e){if(e.$container){let t=this.getAstNodePath(e.$container),r=this.getPathSegment(e),n=t+this.segmentSeparator+r;return n}return""}getPathSegment({$containerProperty:t,$containerIndex:r}){if(!t){throw new Error("Missing '$containerProperty' in AST node.")}if(r!==e){return t+this.indexSeparator+r}return t}getAstNode(e,t){const r=t.split(this.segmentSeparator);return r.reduce((e,t)=>{if(!e||t.length===0){return e}const r=t.indexOf(this.indexSeparator);if(r>0){let n=t.substring(0,r),o=parseInt(t.substring(r+1)),a=e[n];return a===null||a===void 0?void 0:a[o]}return e[t]},e)}}class DefaultConfigurationProvider{constructor(e){this._ready=new Deferred;this.settings={};this.workspaceConfig=!1;this.onConfigurationSectionUpdateEmitter=new Emitter;this.serviceRegistry=e.ServiceRegistry}get ready(){return this._ready.promise}initialize(e){var t,r;this.workspaceConfig=(r=(t=e.capabilities.workspace)===null||t===void 0?void 0:t.configuration)!==null&&r!==void 0?r:!1}async initialized(e){if(this.workspaceConfig){if(e.register){let t=this.serviceRegistry.all;e.register({section:t.map(e=>this.toSectionName(e.LanguageMetaData.languageId))})}if(e.fetchConfiguration){let t=this.serviceRegistry.all.map(e=>({section:this.toSectionName(e.LanguageMetaData.languageId)})),r=await e.fetchConfiguration(t);t.forEach((e,t)=>{this.updateSectionConfiguration(e.section,r[t])})}}this._ready.resolve()}updateConfiguration(e){if(!e.settings){return}Object.keys(e.settings).forEach(t=>{const r=e.settings[t];this.updateSectionConfiguration(t,r);this.onConfigurationSectionUpdateEmitter.fire({section:t,configuration:r})})}updateSectionConfiguration(e,t){this.settings[e]=t}async getConfiguration(e,t){await this.ready;const r=this.toSectionName(e);if(this.settings[r]){return this.settings[r][t]}}toSectionName(e){return`${e}`}get onConfigurationSectionUpdate(){return this.onConfigurationSectionUpdateEmitter.event}}var cu={};(function(e){function t(e){return{dispose:async()=>await e()}}e.create=t})(cu);class DefaultDocumentBuilder{constructor(e){this.updateBuildOptions={validation:{categories:["built-in","fast"]}};this.updateListeners=[];this.buildPhaseListeners=new MultiMap;this.documentPhaseListeners=new MultiMap;this.buildState=new Map;this.documentBuildWaiters=new Map;this.currentState=0;this.langiumDocuments=e.workspace.LangiumDocuments;this.langiumDocumentFactory=e.workspace.LangiumDocumentFactory;this.textDocuments=e.workspace.TextDocuments;this.indexManager=e.workspace.IndexManager;this.serviceRegistry=e.ServiceRegistry}async build(t,r={},n=wc.None){var o,a;for(const n of t){let t=n.uri.toString();if(n.state===6){if(typeof r.validation==="boolean"&&r.validation){n.state=5;n.diagnostics=e;this.buildState.delete(t)}else if(typeof r.validation==="object"){let e=this.buildState.get(t),i=(o=e===null||e===void 0?void 0:e.result)===null||o===void 0?void 0:o.validationChecks;if(i){let o=(a=r.validation.categories)!==null&&a!==void 0?a:nu.all,s=o.filter(e=>!i.includes(e));if(s.length>0){this.buildState.set(t,{completed:!1,options:{validation:Object.assign(Object.assign({},r.validation),{categories:s})},result:e.result});n.state=5}}}}else{this.buildState.delete(t)}}this.currentState=0;await this.emitUpdate(t.map(e=>e.uri),[]);await this.buildDocuments(t,r,n)}async update(t,r,n=wc.None){this.currentState=0;for(const e of r){this.langiumDocuments.deleteDocument(e);this.buildState.delete(e.toString());this.indexManager.remove(e)}for(const e of t){let t=this.langiumDocuments.invalidateDocument(e);if(!t){let t=this.langiumDocumentFactory.fromModel({$type:"INVALID"},e);t.state=0;this.langiumDocuments.addDocument(t)}this.buildState.delete(e.toString())}const o=ee(t).concat(r).map(e=>e.toString()).toSet();this.langiumDocuments.all.filter(e=>!o.has(e.uri.toString())&&this.shouldRelink(e,o)).forEach(t=>{const r=this.serviceRegistry.getServices(t.uri).references.Linker;r.unlink(t);t.state=Math.min(t.state,3);t.diagnostics=e});await this.emitUpdate(t,r);await Bc(n);const a=this.sortDocuments(this.langiumDocuments.all.filter(e=>{var t;return e.state<4||!((t=this.buildState.get(e.uri.toString()))===null||t===void 0?void 0:t.completed)}).toArray());await this.buildDocuments(a,this.updateBuildOptions,n)}async emitUpdate(e,t){await Promise.all(this.updateListeners.map(r=>r(e,t)))}sortDocuments(e){let t=0;let r=e.length-1;while(t<r){while(t<e.length&&this.hasTextDocument(e[t])){t++}while(r>=0&&!this.hasTextDocument(e[r])){r--}t<r&&([e[t],e[r]]=[e[r],e[t]])}return e}hasTextDocument(e){var t;return Boolean((t=this.textDocuments)===null||t===void 0?void 0:t.get(e.uri))}shouldRelink(t,r){if(t.references.some(t=>t.error!==e)){return!0}return this.indexManager.isAffected(t,r)}onUpdate(e){this.updateListeners.push(e);return cu.create(()=>{const t=this.updateListeners.indexOf(e);t>=0&&this.updateListeners.splice(t,1)})}async buildDocuments(e,t,r){this.prepareBuild(e,t);await this.runCancelable(e,1,r,e=>this.langiumDocumentFactory.update(e,r));await this.runCancelable(e,2,r,e=>this.indexManager.updateContent(e,r));await this.runCancelable(e,3,r,async e=>{const t=this.serviceRegistry.getServices(e.uri).references.ScopeComputation;e.precomputedScopes=await t.computeLocalScopes(e,r)});await this.runCancelable(e,4,r,e=>{const t=this.serviceRegistry.getServices(e.uri).references.Linker;return t.link(e,r)});await this.runCancelable(e,5,r,e=>this.indexManager.updateReferences(e,r));const n=e.filter(e=>this.shouldValidate(e));await this.runCancelable(n,6,r,e=>this.validate(e,r));for(const t of e){let e=this.buildState.get(t.uri.toString());e&&(e.completed=!0)}}prepareBuild(e,t){for(const r of e){let e=r.uri.toString(),n=this.buildState.get(e);(!n||n.completed)&&this.buildState.set(e,{completed:!1,options:t,result:n===null||n===void 0?void 0:n.result})}}async runCancelable(e,t,r,n){const o=e.filter(e=>e.state<t);for(const e of o){await Bc(r);await n(e);e.state=t;await this.notifyDocumentPhase(e,t,r)}const a=e.filter(e=>e.state===t);await this.notifyBuildPhase(a,t,r);this.currentState=t}onBuildPhase(e,t){this.buildPhaseListeners.add(e,t);return cu.create(()=>{this.buildPhaseListeners.delete(e,t)})}onDocumentPhase(e,t){this.documentPhaseListeners.add(e,t);return cu.create(()=>{this.documentPhaseListeners.delete(e,t)})}waitUntil(t,r,n){let o=e;if(r&&"path"in r){o=r}else{n=r}n!==null&&n!==void 0?n:n=wc.None;if(o){let e=this.langiumDocuments.getDocument(o);if(e&&e.state>t){return Promise.resolve(o)}}if(this.currentState>=t){return Promise.resolve(e)}else if(n.isCancellationRequested){return Promise.reject(Kc)}return new Promise((r,a)=>{const i=this.onBuildPhase(t,()=>{i.dispose();s.dispose();if(o){let e=this.langiumDocuments.getDocument(o);r(e===null||e===void 0?void 0:e.uri)}else{r(e)}});const s=n.onCancellationRequested(()=>{i.dispose();s.dispose();a(Kc)})})}async notifyDocumentPhase(e,t,r){const n=this.documentPhaseListeners.get(t);const o=n.slice();for(const t of o){try{await t(e,r)}catch(e){if(!Vc(e)){throw e}}}}async notifyBuildPhase(e,t,r){if(e.length===0){return}const n=this.buildPhaseListeners.get(t);const o=n.slice();for(const t of o){await Bc(r);await t(e,r)}}shouldValidate(e){return Boolean(this.getBuildOptions(e).validation)}async validate(t,r){var n,o;const a=this.serviceRegistry.getServices(t.uri).validation.DocumentValidator;const i=this.getBuildOptions(t).validation;const s=typeof i==="object"?i:e;const l=await a.validateDocument(t,s,r);if(t.diagnostics){t.diagnostics.push(...l)}else{t.diagnostics=l}const c=this.buildState.get(t.uri.toString());if(c){(n=c.result)!==null&&n!==void 0?n:c.result={};let e=(o=s===null||s===void 0?void 0:s.categories)!==null&&o!==void 0?o:nu.all;if(c.result.validationChecks){c.result.validationChecks.push(...e)}else{c.result.validationChecks=[...e]}}}getBuildOptions(e){var t,r;return(r=(t=this.buildState.get(e.uri.toString()))===null||t===void 0?void 0:t.options)!==null&&r!==void 0?r:{}}}class DefaultIndexManager{constructor(e){this.symbolIndex=new Map;this.symbolByTypeIndex=new ContextCache;this.referenceIndex=new Map;this.documents=e.workspace.LangiumDocuments;this.serviceRegistry=e.ServiceRegistry;this.astReflection=e.AstReflection}findAllReferences(e,t){const r=Mt(e).uri;const n=[];this.referenceIndex.forEach(e=>{e.forEach(e=>{Zc.equals(e.targetUri,r)&&e.targetPath===t&&n.push(e)})});return ee(n)}allElements(e,t){let r=ee(this.symbolIndex.keys());t&&(r=r.filter(e=>!t||t.has(e)));return r.map(t=>this.getFileDescriptions(t,e)).flat()}getFileDescriptions(e,t){var r;if(!t){return(r=this.symbolIndex.get(e))!==null&&r!==void 0?r:[]}const n=this.symbolByTypeIndex.get(e,t,()=>{var r;const n=(r=this.symbolIndex.get(e))!==null&&r!==void 0?r:[];return n.filter(e=>this.astReflection.isSubtype(e.type,t))});return n}remove(e){const t=e.toString();this.symbolIndex.delete(t);this.symbolByTypeIndex.clear(t);this.referenceIndex.delete(t)}async updateContent(e,t=wc.None){const r=this.serviceRegistry.getServices(e.uri);const n=await r.references.ScopeComputation.computeExports(e,t);const o=e.uri.toString();this.symbolIndex.set(o,n);this.symbolByTypeIndex.clear(o)}async updateReferences(e,t=wc.None){const r=this.serviceRegistry.getServices(e.uri);const n=await r.workspace.ReferenceDescriptionProvider.createDescriptions(e,t);this.referenceIndex.set(e.uri.toString(),n)}isAffected(e,t){const r=this.referenceIndex.get(e.uri.toString());if(!r){return!1}return r.some(e=>!e.local&&t.has(e.targetUri.toString()))}}class DefaultWorkspaceManager{constructor(e){this.initialBuildOptions={};this._ready=new Deferred;this.serviceRegistry=e.ServiceRegistry;this.langiumDocuments=e.workspace.LangiumDocuments;this.documentBuilder=e.workspace.DocumentBuilder;this.fileSystemProvider=e.workspace.FileSystemProvider;this.mutex=e.workspace.WorkspaceLock}get ready(){return this._ready.promise}get workspaceFolders(){return this.folders}initialize(t){var r;this.folders=(r=t.workspaceFolders)!==null&&r!==void 0?r:e}initialized(e){return this.mutex.write(e=>{var t;return this.initializeWorkspace((t=this.folders)!==null&&t!==void 0?t:[],e)})}async initializeWorkspace(e,t=wc.None){const r=await this.performStartup(e);await Bc(t);await this.documentBuilder.build(r,this.initialBuildOptions,t)}async performStartup(e){const t=this.serviceRegistry.all.flatMap(e=>e.LanguageMetaData.fileExtensions);const r=[];const n=e=>{r.push(e);this.langiumDocuments.hasDocument(e.uri)||this.langiumDocuments.addDocument(e)};await this.loadAdditionalDocuments(e,n);await Promise.all(e.map(e=>[e,this.getRootFolder(e)]).map(async e=>this.traverseFolder(...e,t,n)));this._ready.resolve();return r}loadAdditionalDocuments(e,t){return Promise.resolve()}getRootFolder(t){return e.parse(t.uri)}async traverseFolder(e,t,r,n){const o=await this.fileSystemProvider.readDirectory(t);await Promise.all(o.map(async t=>{if(this.includeEntry(e,t,r)){if(t.isDirectory){await this.traverseFolder(e,t.uri,r,n)}else if(t.isFile){let e=await this.langiumDocuments.getOrCreateDocument(t.uri);n(e)}}}))}includeEntry(e,t,r){const n=Zc.basename(t.uri);if(n.startsWith(".")){return!1}if(t.isDirectory){return n!=="node_modules"&&n!=="out"}else if(t.isFile){let e=Zc.extname(t.uri);return r.includes(e)}return!1}}class DefaultLexerErrorMessageProvider{buildUnexpectedCharactersMessage(e,t,r,n,o){return Ao.buildUnexpectedCharactersMessage(e,t,r,n,o)}buildUnableToPopLexerModeMessage(e){return Ao.buildUnableToPopLexerModeMessage(e)}}var uu={mode:"full"};class DefaultLexer{constructor(e){this.errorMessageProvider=e.parser.LexerErrorMessageProvider;this.tokenBuilder=e.parser.TokenBuilder;const t=this.tokenBuilder.buildTokens(e.Grammar,{caseInsensitive:e.LanguageMetaData.caseInsensitive});this.tokenTypes=this.toTokenTypeDictionary(t);const r=mu(t)?Object.values(t):t;const n=e.LanguageMetaData.mode==="production";this.chevrotainLexer=new Lexer(r,{positionTracking:"full",skipValidations:n,errorMessageProvider:this.errorMessageProvider})}get definition(){return this.tokenTypes}tokenize(e,t=uu){var r,n,o;const a=this.chevrotainLexer.tokenize(e);return{tokens:a.tokens,errors:a.errors,hidden:(r=a.groups.hidden)!==null&&r!==void 0?r:[],report:(o=(n=this.tokenBuilder).flushLexingReport)===null||o===void 0?void 0:o.call(n,e)}}toTokenTypeDictionary(e){if(mu(e))return e;const t=pu(e)?Object.values(e.modes).flat():e;const r={};t.forEach(e=>r[e.name]=e);return r}}function du(e){return Array.isArray(e)&&(e.length===0||"name"in e[0])}function pu(e){return e&&"modes"in e&&"defaultMode"in e}function mu(e){return!du(e)&&!pu(e)}function fu(e,t,r){let n;let o;if(typeof e==="string"){o=t;n=r}else{o=e.range.start;n=t}o||(o=$s.create(0,0));const a=_u(e);const i=Ou(n);const s=xu({lines:a,position:o,options:i});return Iu({index:0,tokens:s,position:o})}function hu(e,t){const r=Ou(t);const n=_u(e);if(n.length===0){return!1}const o=n[0];const a=n[n.length-1];const i=r.start;const s=r.end;return Boolean(i===null||i===void 0?void 0:i.exec(o))&&Boolean(s===null||s===void 0?void 0:s.exec(a))}function _u(e){let t="";if(typeof e==="string"){t=e}else{t=e.text}const r=t.split(or);return r}const gu=/\s*(@([\p{L}][\p{L}\p{N}]*)?)/yu;const yu=/\{(@[\p{L}][\p{L}\p{N}]*)(\s*)([^\r\n}]+)?\}/gu;function xu(e){var t,r,n;const o=[];let a=e.position.line;let i=e.position.character;for(let s=0;s<e.lines.length;s++){let l=s===0,c=s===e.lines.length-1,u=e.lines[s],d=0;if(l&&e.options.start){let r=(t=e.options.start)===null||t===void 0?void 0:t.exec(u);r&&(d=r.index+r[0].length)}else{let t=(r=e.options.line)===null||r===void 0?void 0:r.exec(u);t&&(d=t.index+t[0].length)}if(c){let t=(n=e.options.end)===null||n===void 0?void 0:n.exec(u);t&&(u=u.substring(0,t.index))}u=u.substring(0,Au(u));let p=Ru(u,d);if(p>=u.length){if(o.length>0){let e=$s.create(a,i);o.push({type:"break",content:"",range:Ms.create(e,e)})}}else{gu.lastIndex=d;let e=gu.exec(u);if(e){let t=e[0],r=e[1],n=$s.create(a,i+d),s=$s.create(a,i+d+t.length);o.push({type:"tag",content:r,range:Ms.create(n,s)});d+=t.length;d=Ru(u,d)}if(d<u.length){let e=u.substring(d),t=Array.from(e.matchAll(yu));o.push(...Tu(t,e,a,i+d))}}a++;i=0}if(o.length>0&&o[o.length-1].type==="break"){return o.slice(0,-1)}return o}function Tu(e,t,r,n){const o=[];if(e.length===0){let e=$s.create(r,n),a=$s.create(r,n+t.length);o.push({type:"text",content:t,range:Ms.create(e,a)})}else{let a=0;for(const i of e){let e=i.index,s=t.substring(a,e);s.length>0&&o.push({type:"text",content:t.substring(a,e),range:Ms.create($s.create(r,a+n),$s.create(r,e+n))});let l=s.length+1,c=i[1];o.push({type:"inline-tag",content:c,range:Ms.create($s.create(r,a+l+n),$s.create(r,a+l+c.length+n))});l+=c.length;if(i.length===4){l+=i[2].length;let e=i[3];o.push({type:"text",content:e,range:Ms.create($s.create(r,a+l+n),$s.create(r,a+l+e.length+n))})}else{o.push({type:"text",content:"",range:Ms.create($s.create(r,a+l+n),$s.create(r,a+l+n))})}a=e+i[0].length}let i=t.substring(a);i.length>0&&o.push({type:"text",content:i,range:Ms.create($s.create(r,a+n),$s.create(r,a+n+i.length))})}return o}const ku=/\S/;const vu=/\s*$/;function Ru(e,t){const r=e.substring(t).match(ku);if(r){return t+r.index}else{return e.length}}function Au(t){const r=t.match(vu);if(r&&typeof r.index==="number"){return r.index}return e}function Iu(e){var t,r,n,o;const a=$s.create(e.position.line,e.position.character);if(e.tokens.length===0){return new JSDocCommentImpl([],Ms.create(a,a))}const i=[];while(e.index<e.tokens.length){let t=Cu(e,i[i.length-1]);t&&i.push(t)}const s=(r=(t=i[0])===null||t===void 0?void 0:t.range.start)!==null&&r!==void 0?r:a;const l=(o=(n=i[i.length-1])===null||n===void 0?void 0:n.range.end)!==null&&o!==void 0?o:a;return new JSDocCommentImpl(i,Ms.create(s,l))}function Cu(t,r){const n=t.tokens[t.index];if(n.type==="tag"){return Pu(t,!1)}else if(n.type==="text"||n.type==="inline-tag"){return Su(t)}else{Eu(n,r);t.index++;return e}}function Eu(e,t){if(t){let r=new JSDocLineImpl("",e.range);if("inlines"in t){t.inlines.push(r)}else{t.content.inlines.push(r)}}}function Su(e){let t=e.tokens[e.index];const r=t;let n=t;const o=[];while(t&&t.type!=="break"&&t.type!=="tag"){o.push(Nu(e));n=t;t=e.tokens[e.index]}return new JSDocTextImpl(o,Ms.create(r.range.start,n.range.end))}function Nu(e){const t=e.tokens[e.index];if(t.type==="inline-tag"){return Pu(e,!0)}else{return bu(e)}}function Pu(e,t){const r=e.tokens[e.index++];const n=r.content.substring(1);const o=e.tokens[e.index];if((o===null||o===void 0?void 0:o.type)==="text"){if(t){let o=bu(e);return new JSDocTagImpl(n,new JSDocTextImpl([o],o.range),t,Ms.create(r.range.start,o.range.end))}else{let o=Su(e);return new JSDocTagImpl(n,o,t,Ms.create(r.range.start,o.range.end))}}else{let e=r.range;return new JSDocTagImpl(n,new JSDocTextImpl([],e),t,e)}}function bu(e){const t=e.tokens[e.index++];return new JSDocLineImpl(t.content,t.range)}function Ou(e){if(!e){return Ou({start:"/**",end:"*/",line:"*"})}const{start:t,end:r,line:n}=e;return{start:Lu(t,!0),end:Lu(r,!1),line:Lu(n,!0)}}function Lu(e,t){if(typeof e==="string"||typeof e==="object"){let r=typeof e==="string"?ur(e):e.source;if(t){return new RegExp(`^\\s*${r}`)}else{return new RegExp(`\\s*${r}\\s*\$`)}}else{return e}}class JSDocCommentImpl{constructor(e,t){this.elements=e;this.range=t}getTag(e){return this.getAllTags().find(t=>t.name===e)}getTags(e){return this.getAllTags().filter(t=>t.name===e)}getAllTags(){return this.elements.filter(e=>"name"in e)}toString(){let e="";for(const t of this.elements){if(e.length===0){e=t.toString()}else{let r=t.toString();e+=$u(e)+r}}return e.trim()}toMarkdown(e){let t="";for(const r of this.elements){if(t.length===0){t=r.toMarkdown(e)}else{let n=r.toMarkdown(e);t+=$u(t)+n}}return t.trim()}}class JSDocTagImpl{constructor(e,t,r,n){this.name=e;this.content=t;this.inline=r;this.range=n}toString(){let e=`@${this.name}`;const t=this.content.toString();if(this.content.inlines.length===1){e=`${e} ${t}`}else this.content.inlines.length>1&&(e=`${e}\n${t}`);if(this.inline){return`{${e}}`}else{return e}}toMarkdown(e){var t,r;return(r=(t=e===null||e===void 0?void 0:e.renderTag)===null||t===void 0?void 0:t.call(e,this))!==null&&r!==void 0?r:this.toMarkdownDefault(e)}toMarkdownDefault(t){const r=this.content.toMarkdown(t);if(this.inline){let e=wu(this.name,r,t!==null&&t!==void 0?t:{});if(typeof e==="string"){return e}}let n="";if((t===null||t===void 0?void 0:t.tag)==="italic"||(t===null||t===void 0?void 0:t.tag)===e){n="*"}else if((t===null||t===void 0?void 0:t.tag)==="bold"){n="**"}else(t===null||t===void 0?void 0:t.tag)==="bold-italic"&&(n="***");let o=`${n}@${this.name}${n}`;if(this.content.inlines.length===1){o=`${o} — ${r}`}else this.content.inlines.length>1&&(o=`${o}\n${r}`);if(this.inline){return`{${o}}`}else{return o}}}function wu(t,r,n){var o,a;if(t==="linkplain"||t==="linkcode"||t==="link"){let e=r.indexOf(" "),i=r;if(e>0){let t=Ru(r,e);i=r.substring(t);r=r.substring(0,e)}(t==="linkcode"||t==="link"&&n.link==="code")&&(i=`\`${i}\``);let s=(a=(o=n.renderLink)===null||o===void 0?void 0:o.call(n,r,i))!==null&&a!==void 0?a:Du(r,i);return s}return e}function Du(t,r){try{e.parse(t,!0);return`[${r}](${t})`}catch(e){return t}}class JSDocTextImpl{constructor(e,t){this.inlines=e;this.range=t}toString(){let e="";for(let t=0;t<this.inlines.length;t++){let r=this.inlines[t],n=this.inlines[t+1];e+=r.toString();n&&n.range.start.line>r.range.start.line&&(e+="\n")}return e}toMarkdown(e){let t="";for(let r=0;r<this.inlines.length;r++){let n=this.inlines[r],o=this.inlines[r+1];t+=n.toMarkdown(e);o&&o.range.start.line>n.range.start.line&&(t+="\n")}return t}}class JSDocLineImpl{constructor(e,t){this.text=e;this.range=t}toString(){return this.text}toMarkdown(){return this.text}}function $u(e){if(e.endsWith("\n")){return"\n"}else{return"\n\n"}}class JSDocDocumentationProvider{constructor(e){this.indexManager=e.shared.workspace.IndexManager;this.commentProvider=e.documentation.CommentProvider}getDocumentation(t){const r=this.commentProvider.getComment(t);if(r&&hu(r)){let e=fu(r);return e.toMarkdown({renderLink:(e,r)=>this.documentationLinkRenderer(t,e,r),renderTag:e=>this.documentationTagRenderer(t,e)})}return e}documentationLinkRenderer(t,r,n){var o;const a=(o=this.findNameInPrecomputedScopes(t,r))!==null&&o!==void 0?o:this.findNameInGlobalScope(t,r);if(a&&a.nameSegment){let e=a.nameSegment.range.start.line+1,t=a.nameSegment.range.start.character+1,r=a.documentUri.with({fragment:`L${e},${t}`});return`[${n}](${r.toString()})`}else{return e}}documentationTagRenderer(t,r){return e}findNameInPrecomputedScopes(t,r){const n=Mt(t);const o=n.precomputedScopes;if(!o){return e}let a=t;do{let e=o.get(a),t=e.find(e=>e.name===r);if(t){return t}a=a.$container}while(a);return e}findNameInGlobalScope(e,t){const r=this.indexManager.allElements().find(e=>e.name===t);return r}}class DefaultCommentProvider{constructor(e){this.grammarConfig=(()=>e.parser.GrammarConfig)}getComment(e){var t;if(tu(e)){return e.$comment}return(t=le(e.$cstNode,this.grammarConfig().multilineCommentRules))===null||t===void 0?void 0:t.text}}class DefaultAsyncParser{constructor(e){this.syncParser=e.parser.LangiumParser}parse(e,t){return Promise.resolve(this.syncParser.parse(e))}}class DefaultWorkspaceLock{constructor(){this.previousTokenSource=new CancellationTokenSource;this.writeQueue=[];this.readQueue=[];this.done=!0}write(e){this.cancelWrite();const t=Uc();this.previousTokenSource=t;return this.enqueue(this.writeQueue,e,t.token)}read(e){return this.enqueue(this.readQueue,e)}enqueue(e,t,r=wc.None){const n=new Deferred;const o={action:t,deferred:n,cancellationToken:r};e.push(o);this.performNextOperation();return n.promise}async performNextOperation(){if(!this.done){return}const t=[];if(this.writeQueue.length>0){t.push(this.writeQueue.shift())}else if(this.readQueue.length>0){t.push(...this.readQueue.splice(0,this.readQueue.length))}else{return}this.done=!1;await Promise.all(t.map(async({action:t,deferred:r,cancellationToken:n})=>{try{let o=await Promise.resolve().then(()=>t(n));r.resolve(o)}catch(t){if(Vc(t)){r.resolve(e)}else{r.reject(t)}}}));this.done=!0;this.performNextOperation()}
cancelWrite(){this.previousTokenSource.cancel()}}class DefaultHydrator{constructor(e){this.grammarElementIdMap=new BiMap;this.tokenTypeIdMap=new BiMap;this.grammar=e.Grammar;this.lexer=e.parser.Lexer;this.linker=e.references.Linker}dehydrate(t){return{lexerErrors:t.lexerErrors,lexerReport:t.lexerReport?this.dehydrateLexerReport(t.lexerReport):e,parserErrors:t.parserErrors.map(e=>Object.assign(Object.assign({},e),{message:e.message})),value:this.dehydrateAstNode(t.value,this.createDehyrationContext(t.value))}}dehydrateLexerReport(e){return e}createDehyrationContext(e){const t=new Map;const r=new Map;for(const r of Kt(e)){t.set(r,{})}if(e.$cstNode){for(const t of te(e.$cstNode)){r.set(t,{})}}return{astNodes:t,cstNodes:r}}dehydrateAstNode(t,r){const n=r.astNodes.get(t);n.$type=t.$type;n.$containerIndex=t.$containerIndex;n.$containerProperty=t.$containerProperty;t.$cstNode!==e&&(n.$cstNode=this.dehydrateCstNode(t.$cstNode,r));for(const[o,a]of Object.entries(t)){if(o.startsWith("$")){continue}if(Array.isArray(a)){let e=[];n[o]=e;for(const t of a){if(V(t)){e.push(this.dehydrateAstNode(t,r))}else if(B(t)){e.push(this.dehydrateReference(t,r))}else{e.push(t)}}}else if(V(a)){n[o]=this.dehydrateAstNode(a,r)}else if(B(a)){n[o]=this.dehydrateReference(a,r)}else a!==e&&(n[o]=a)}return n}dehydrateReference(e,t){const r={};r.$refText=e.$refText;e.$refNode&&(r.$refNode=t.cstNodes.get(e.$refNode));return r}dehydrateCstNode(e,t){const r=t.cstNodes.get(e);if(X(e)){r.fullText=e.fullText}else{r.grammarSource=this.getGrammarElementId(e.grammarSource)}r.hidden=e.hidden;r.astNode=t.astNodes.get(e.astNode);if(z(e)){r.content=e.content.map(e=>this.dehydrateCstNode(e,t))}else if(H(e)){r.tokenType=e.tokenType.name;r.offset=e.offset;r.length=e.length;r.startLine=e.range.start.line;r.startColumn=e.range.start.character;r.endLine=e.range.end.line;r.endColumn=e.range.end.character}return r}hydrate(e){const t=e.value;const r=this.createHydrationContext(t);"$cstNode"in t&&this.hydrateCstNode(t.$cstNode,r);return{lexerErrors:e.lexerErrors,lexerReport:e.lexerReport,parserErrors:e.parserErrors,value:this.hydrateAstNode(t,r)}}createHydrationContext(e){const t=new Map;const r=new Map;for(const r of Kt(e)){t.set(r,{})}let n;if(e.$cstNode){for(const t of te(e.$cstNode)){let e;if("fullText"in t){e=new RootCstNodeImpl(t.fullText);n=e}else if("content"in t){e=new CompositeCstNodeImpl}else"tokenType"in t&&(e=this.hydrateCstLeafNode(t));if(e){r.set(t,e);e.root=n}}}return{astNodes:t,cstNodes:r}}hydrateAstNode(t,r){const n=r.astNodes.get(t);n.$type=t.$type;n.$containerIndex=t.$containerIndex;n.$containerProperty=t.$containerProperty;t.$cstNode&&(n.$cstNode=r.cstNodes.get(t.$cstNode));for(const[o,a]of Object.entries(t)){if(o.startsWith("$")){continue}if(Array.isArray(a)){let e=[];n[o]=e;for(const t of a){if(V(t)){e.push(this.setParent(this.hydrateAstNode(t,r),n))}else if(B(t)){e.push(this.hydrateReference(t,n,o,r))}else{e.push(t)}}}else if(V(a)){n[o]=this.setParent(this.hydrateAstNode(a,r),n)}else if(B(a)){n[o]=this.hydrateReference(a,n,o,r)}else a!==e&&(n[o]=a)}return n}setParent(e,t){e.$container=t;return e}hydrateReference(e,t,r,n){return this.linker.buildReference(t,r,n.cstNodes.get(e.$refNode),e.$refText)}hydrateCstNode(e,t,r=0){const n=t.cstNodes.get(e);typeof e.grammarSource==="number"&&(n.grammarSource=this.getGrammarElement(e.grammarSource));n.astNode=t.astNodes.get(e.astNode);if(z(n)){for(const o of e.content){let e=this.hydrateCstNode(o,t,r++);n.content.push(e)}}return n}hydrateCstLeafNode(e){const t=this.getTokenType(e.tokenType);const r=e.offset;const n=e.length;const o=e.startLine;const a=e.startColumn;const i=e.endLine;const s=e.endColumn;const l=e.hidden;const c=new LeafCstNodeImpl(r,n,{start:{line:o,character:a},end:{line:i,character:s}},t,l);return c}getTokenType(e){return this.lexer.definition[e]}getGrammarElementId(t){if(!t){return e}this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap();return this.grammarElementIdMap.get(t)}getGrammarElement(e){this.grammarElementIdMap.size===0&&this.createGrammarElementIdMap();const t=this.grammarElementIdMap.getKey(e);return t}createGrammarElementIdMap(){let e=0;for(const t of Kt(this.grammar)){xe(t)&&this.grammarElementIdMap.set(t,e++)}}}function Mu(e){return{documentation:{CommentProvider:e=>new DefaultCommentProvider(e),DocumentationProvider:e=>new JSDocDocumentationProvider(e)},parser:{AsyncParser:e=>new DefaultAsyncParser(e),GrammarConfig:e=>jr(e),LangiumParser:e=>Ic(e),CompletionParser:e=>Ac(e),ValueConverter:()=>new DefaultValueConverter,TokenBuilder:()=>new DefaultTokenBuilder,Lexer:e=>new DefaultLexer(e),ParserErrorMessageProvider:()=>new LangiumParserErrorMessageProvider,LexerErrorMessageProvider:()=>new DefaultLexerErrorMessageProvider},workspace:{AstNodeLocator:()=>new DefaultAstNodeLocator,AstNodeDescriptionProvider:e=>new DefaultAstNodeDescriptionProvider(e),ReferenceDescriptionProvider:e=>new DefaultReferenceDescriptionProvider(e)},references:{Linker:e=>new DefaultLinker(e),NameProvider:()=>new DefaultNameProvider,ScopeProvider:e=>new DefaultScopeProvider(e),ScopeComputation:e=>new DefaultScopeComputation(e),References:e=>new DefaultReferences(e)},serializer:{Hydrator:e=>new DefaultHydrator(e),JsonSerializer:e=>new DefaultJsonSerializer(e)},validation:{DocumentValidator:e=>new DefaultDocumentValidator(e),ValidationRegistry:e=>new ValidationRegistry(e)},shared:()=>e.shared}}function Fu(e){return{ServiceRegistry:e=>new DefaultServiceRegistry(e),workspace:{LangiumDocuments:e=>new DefaultLangiumDocuments(e),LangiumDocumentFactory:e=>new DefaultLangiumDocumentFactory(e),DocumentBuilder:e=>new DefaultDocumentBuilder(e),IndexManager:e=>new DefaultIndexManager(e),WorkspaceManager:e=>new DefaultWorkspaceManager(e),FileSystemProvider:t=>e.fileSystemProvider(t),WorkspaceLock:()=>new DefaultWorkspaceLock,ConfigurationProvider:e=>new DefaultConfigurationProvider(e)}}}var Gu={};(function(e){e.merge=((e,t)=>Wu(Wu({},e),t))})(Gu);function Uu(e,t,r,n,o,a,i,s,l){const c=[e,t,r,n,o,a,i,s,l].reduce(Wu,{});return Vu(c)}const Ku=Symbol("isProxy");function Vu(e,t){const r=new Proxy({},{deleteProperty:()=>!1,set:()=>{throw new Error("Cannot set property on injected service container")},get:(n,o)=>{if(o===Ku){return!0}else{return ju(n,o,e,t||r)}},getOwnPropertyDescriptor:(n,o)=>(ju(n,o,e,t||r),Object.getOwnPropertyDescriptor(n,o)),has:(t,r)=>r in e,ownKeys:()=>[...Object.getOwnPropertyNames(e)]});return r}const Bu=Symbol();function ju(t,r,n,o){if(r in t){if(t[r]instanceof Error){throw new Error("Construction failure. Please make sure that your dependencies are constructable.",{cause:t[r]})}if(t[r]===Bu){throw new Error('Cycle detected. Please make "'+String(r)+'" lazy. Visit https://langium.org/docs/reference/configuration-services/#resolving-cyclic-dependencies')}return t[r]}else if(r in n){let a=n[r];t[r]=Bu;try{t[r]=typeof a==="function"?a(o):Vu(a,o)}catch(n){t[r]=n instanceof Error?n:e;throw n}return t[r]}else{return e}}function Wu(t,r){if(r){for(const[n,o]of Object.entries(r)){if(o!==e){let e=t[n];if(e!==null&&o!==null&&typeof e==="object"&&typeof o==="object"){t[n]=Wu(e,o)}else{t[n]=o}}}}return t}class EmptyFileSystemProvider{readFile(){throw new Error("No file system is available.")}async readDirectory(){return[]}}var zu={fileSystemProvider:()=>new EmptyFileSystemProvider};const Hu={Grammar:()=>e,LanguageMetaData:()=>({caseInsensitive:!1,fileExtensions:[".langium"],languageId:"langium"})};const Xu={AstReflection:()=>new LangiumGrammarAstReflection};function Yu(){const e=Uu(Fu(zu),Xu);const t=Uu(Mu({shared:e}),Hu);e.ServiceRegistry.register(t);return t}function qu(t){var r;const n=Yu();const o=n.serializer.JsonSerializer.deserialize(t);n.shared.workspace.LangiumDocumentFactory.fromModel(o,e.parse(`memory://${(r=o.name)!==null&&r!==void 0?r:"grammar"}.langium`));return o}var Zu,Ju,Qu,ed,td;var rd=Object.defineProperty;var nd=(e,t)=>rd(e,"name",{value:t,configurable:!0});var od="Statement";var ad="Architecture";function id(e){return Wd.isInstance(e,ad)}nd(id,"isArchitecture");var sd="Axis";var ld="Branch";function cd(e){return Wd.isInstance(e,ld)}nd(cd,"isBranch");var ud="Checkout";var dd="CherryPicking";var pd="ClassDefStatement";var md="Commit";function fd(e){return Wd.isInstance(e,md)}nd(fd,"isCommit");var hd="Curve";var _d="Edge";var gd="Entry";var yd="GitGraph";function xd(e){return Wd.isInstance(e,yd)}nd(xd,"isGitGraph");var Td="Group";var kd="Info";function vd(e){return Wd.isInstance(e,kd)}nd(vd,"isInfo");var Rd="Item";var Ad="Junction";var Id="Merge";function Cd(e){return Wd.isInstance(e,Id)}nd(Cd,"isMerge");var Ed="Option";var Sd="Packet";function Nd(e){return Wd.isInstance(e,Sd)}nd(Nd,"isPacket");var Pd="PacketBlock";function bd(e){return Wd.isInstance(e,Pd)}nd(bd,"isPacketBlock");var Od="Pie";function Ld(e){return Wd.isInstance(e,Od)}nd(Ld,"isPie");var wd="PieSection";function Dd(e){return Wd.isInstance(e,wd)}nd(Dd,"isPieSection");var $d="Radar";var Md="Service";var Fd="Treemap";function Gd(e){return Wd.isInstance(e,Fd)}nd(Gd,"isTreemap");var Ud="TreemapRow";var Kd="Direction";var Vd="Leaf";var Bd="Section";var jd=(Zu=class extends AbstractAstReflection{getAllTypes(){return[ad,sd,ld,ud,dd,pd,md,hd,Kd,_d,gd,yd,Td,kd,Rd,Ad,Vd,Id,Ed,Sd,Pd,Od,wd,$d,Bd,Md,od,Fd,Ud]}computeIsSubtype(e,t){switch(e){case ld:case ud:case dd:case md:case Id:{return this.isSubtype(od,t)}case Kd:{return this.isSubtype(yd,t)}case Vd:case Bd:{return this.isSubtype(Rd,t)}default:{return!1}}}getReferenceType(e){const t=`${e.container.$type}:${e.property}`;switch(t){case"Entry:axis":{return sd}default:{throw new Error(`${t} is not a valid reference id.`)}}}getTypeMetaData(e){switch(e){case ad:{return{name:ad,properties:[{name:"accDescr"},{name:"accTitle"},{name:"edges",defaultValue:[]},{name:"groups",defaultValue:[]},{name:"junctions",defaultValue:[]},{name:"services",defaultValue:[]},{name:"title"}]}}case sd:{return{name:sd,properties:[{name:"label"},{name:"name"}]}}case ld:{return{name:ld,properties:[{name:"name"},{name:"order"}]}}case ud:{return{name:ud,properties:[{name:"branch"}]}}case dd:{return{name:dd,properties:[{name:"id"},{name:"parent"},{name:"tags",defaultValue:[]}]}}case pd:{return{name:pd,properties:[{name:"className"},{name:"styleText"}]}}case md:{return{name:md,properties:[{name:"id"},{name:"message"},{name:"tags",defaultValue:[]},{name:"type"}]}}case hd:{return{name:hd,properties:[{name:"entries",defaultValue:[]},{name:"label"},{name:"name"}]}}case _d:{return{name:_d,properties:[{name:"lhsDir"},{name:"lhsGroup",defaultValue:!1},{name:"lhsId"},{name:"lhsInto",defaultValue:!1},{name:"rhsDir"},{name:"rhsGroup",defaultValue:!1},{name:"rhsId"},{name:"rhsInto",defaultValue:!1},{name:"title"}]}}case gd:{return{name:gd,properties:[{name:"axis"},{name:"value"}]}}case yd:{return{name:yd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"statements",defaultValue:[]},{name:"title"}]}}case Td:{return{name:Td,properties:[{name:"icon"},{name:"id"},{name:"in"},{name:"title"}]}}case kd:{return{name:kd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"}]}}case Rd:{return{name:Rd,properties:[{name:"classSelector"},{name:"name"}]}}case Ad:{return{name:Ad,properties:[{name:"id"},{name:"in"}]}}case Id:{return{name:Id,properties:[{name:"branch"},{name:"id"},{name:"tags",defaultValue:[]},{name:"type"}]}}case Ed:{return{name:Ed,properties:[{name:"name"},{name:"value",defaultValue:!1}]}}case Sd:{return{name:Sd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"blocks",defaultValue:[]},{name:"title"}]}}case Pd:{return{name:Pd,properties:[{name:"bits"},{name:"end"},{name:"label"},{name:"start"}]}}case Od:{return{name:Od,properties:[{name:"accDescr"},{name:"accTitle"},{name:"sections",defaultValue:[]},{name:"showData",defaultValue:!1},{name:"title"}]}}case wd:{return{name:wd,properties:[{name:"label"},{name:"value"}]}}case $d:{return{name:$d,properties:[{name:"accDescr"},{name:"accTitle"},{name:"axes",defaultValue:[]},{name:"curves",defaultValue:[]},{name:"options",defaultValue:[]},{name:"title"}]}}case Md:{return{name:Md,properties:[{name:"icon"},{name:"iconText"},{name:"id"},{name:"in"},{name:"title"}]}}case Fd:{return{name:Fd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"title"},{name:"TreemapRows",defaultValue:[]}]}}case Ud:{return{name:Ud,properties:[{name:"indent"},{name:"item"}]}}case Kd:{return{name:Kd,properties:[{name:"accDescr"},{name:"accTitle"},{name:"dir"},{name:"statements",defaultValue:[]},{name:"title"}]}}case Vd:{return{name:Vd,properties:[{name:"classSelector"},{name:"name"},{name:"value"}]}}case Bd:{return{name:Bd,properties:[{name:"classSelector"},{name:"name"}]}}default:{return{name:e,properties:[]}}}}},r(Zu,"MermaidAstReflection"),(()=>{nd(Zu,"MermaidAstReflection")})(),Zu);var Wd=new jd;var zd;var Hd=nd(()=>zd!==null&&zd!==void 0?zd:zd=qu(`{"\$type":"Grammar","isDeclared":true,"name":"Info","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Info","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"\$type":"Keyword","value":"info"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[],"cardinality":"*"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"showInfo"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[],"cardinality":"*"}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@7"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@8"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"InfoGrammar");var Xd;var Yd=nd(()=>Xd!==null&&Xd!==void 0?Xd:Xd=qu(`{"\$type":"Grammar","isDeclared":true,"name":"Packet","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Packet","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"packet"},{"\$type":"Keyword","value":"packet-beta"}]},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]},{"\$type":"Assignment","feature":"blocks","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"PacketBlock","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"start","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"-"},{"\$type":"Assignment","feature":"end","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}}],"cardinality":"?"}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"+"},{"\$type":"Assignment","feature":"bits","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}}]}]},{"\$type":"Keyword","value":":"},{"\$type":"Assignment","feature":"label","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@8"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@9"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"PacketGrammar");var qd;var Zd=nd(()=>qd!==null&&qd!==void 0?qd:qd=qu(`{"\$type":"Grammar","isDeclared":true,"name":"Pie","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Pie","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[],"cardinality":"*"},{"\$type":"Keyword","value":"pie"},{"\$type":"Assignment","feature":"showData","operator":"?=","terminal":{"\$type":"Keyword","value":"showData"},"cardinality":"?"},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]},{"\$type":"Assignment","feature":"sections","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"PieSection","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"label","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]}},{"\$type":"Keyword","value":":"},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@8"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@9"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"PieGrammar");var Jd;var Qd=nd(()=>Jd!==null&&Jd!==void 0?Jd:Jd=qu(`{"\$type":"Grammar","isDeclared":true,"name":"Architecture","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Architecture","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[],"cardinality":"*"},{"\$type":"Keyword","value":"architecture-beta"},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"Statement","definition":{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"groups","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Assignment","feature":"services","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}},{"\$type":"Assignment","feature":"junctions","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}},{"\$type":"Assignment","feature":"edges","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"LeftPort","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":":"},{"\$type":"Assignment","feature":"lhsDir","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"RightPort","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"rhsDir","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}},{"\$type":"Keyword","value":":"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"Arrow","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]},{"\$type":"Assignment","feature":"lhsInto","operator":"?=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"--"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"-"},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@29"},"arguments":[]}},{"\$type":"Keyword","value":"-"}]}]},{"\$type":"Assignment","feature":"rhsInto","operator":"?=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]},"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Group","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"group"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Assignment","feature":"icon","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@28"},"arguments":[]},"cardinality":"?"},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"in"},{"\$type":"Assignment","feature":"in","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Service","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"service"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"iconText","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@21"},"arguments":[]}},{"\$type":"Assignment","feature":"icon","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@28"},"arguments":[]}}],"cardinality":"?"},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@29"},"arguments":[]},"cardinality":"?"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"in"},{"\$type":"Assignment","feature":"in","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Junction","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"junction"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"in"},{"\$type":"Assignment","feature":"in","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Edge","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"lhsId","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Assignment","feature":"lhsGroup","operator":"?=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]},{"\$type":"Assignment","feature":"rhsId","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Assignment","feature":"rhsGroup","operator":"?=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]},"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"ARROW_DIRECTION","definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"L"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"R"}}]},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"T"}}]},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"B"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ARROW_GROUP","definition":{"\$type":"RegexToken","regex":"/\\\\{group\\\\}/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ARROW_INTO","definition":{"\$type":"RegexToken","regex":"/<|>/"},"fragment":false,"hidden":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@15"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@16"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@18"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@19"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"\$type":"TerminalRule","name":"ARCH_ICON","definition":{"\$type":"RegexToken","regex":"/\\\\([\\\\w-:]+\\\\)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ARCH_TITLE","definition":{"\$type":"RegexToken","regex":"/\\\\[[\\\\w ]+\\\\]/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"ArchitectureGrammar")
var ep;var tp=nd(()=>ep!==null&&ep!==void 0?ep:ep=qu(`{"\$type":"Grammar","isDeclared":true,"name":"GitGraph","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"GitGraph","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[],"cardinality":"*"},{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"gitGraph"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"gitGraph"},{"\$type":"Keyword","value":":"}]},{"\$type":"Keyword","value":"gitGraph:"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"gitGraph"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]},{"\$type":"Keyword","value":":"}]}]},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]},{"\$type":"Assignment","feature":"statements","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Statement","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Direction","definition":{"\$type":"Assignment","feature":"dir","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"LR"},{"\$type":"Keyword","value":"TB"},{"\$type":"Keyword","value":"BT"}]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Commit","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"commit"},{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Keyword","value":"id:"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"msg:","cardinality":"?"},{"\$type":"Assignment","feature":"message","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"tag:"},{"\$type":"Assignment","feature":"tags","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"type:"},{"\$type":"Assignment","feature":"type","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"NORMAL"},{"\$type":"Keyword","value":"REVERSE"},{"\$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Branch","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"branch"},{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@24"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"order:"},{"\$type":"Assignment","feature":"order","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@15"},"arguments":[]}}],"cardinality":"?"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Merge","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"merge"},{"\$type":"Assignment","feature":"branch","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@24"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}]}},{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Keyword","value":"id:"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"tag:"},{"\$type":"Assignment","feature":"tags","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"type:"},{"\$type":"Assignment","feature":"type","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"NORMAL"},{"\$type":"Keyword","value":"REVERSE"},{"\$type":"Keyword","value":"HIGHLIGHT"}]}}]}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Checkout","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"checkout"},{"\$type":"Keyword","value":"switch"}]},{"\$type":"Assignment","feature":"branch","operator":"=","terminal":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@24"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"CherryPicking","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"cherry-pick"},{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Keyword","value":"id:"},{"\$type":"Assignment","feature":"id","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"tag:"},{"\$type":"Assignment","feature":"tags","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"parent:"},{"\$type":"Assignment","feature":"parent","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@14"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@15"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false},{"\$type":"TerminalRule","name":"REFERENCE","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\\\w([-\\\\./\\\\w]*[-\\\\w])?/"},"fragment":false,"hidden":false}],"definesHiddenTokens":false,"hiddenTokens":[],"interfaces":[],"types":[],"usedGrammars":[]}`),"GitGraphGrammar");var rp;var np=nd(()=>rp!==null&&rp!==void 0?rp:rp=qu(`{"\$type":"Grammar","isDeclared":true,"name":"Radar","imports":[],"rules":[{"\$type":"ParserRule","entry":true,"name":"Radar","definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Alternatives","elements":[{"\$type":"Keyword","value":"radar-beta"},{"\$type":"Keyword","value":"radar-beta:"},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"radar-beta"},{"\$type":"Keyword","value":":"}]}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"axis"},{"\$type":"Assignment","feature":"axes","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"Assignment","feature":"axes","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}}],"cardinality":"*"}]},{"\$type":"Group","elements":[{"\$type":"Keyword","value":"curve"},{"\$type":"Assignment","feature":"curves","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"Assignment","feature":"curves","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]}}],"cardinality":"*"}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"options","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"Assignment","feature":"options","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]}}],"cardinality":"*"}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[]}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"Label","definition":{"\$type":"Group","elements":[{"\$type":"Keyword","value":"["},{"\$type":"Assignment","feature":"label","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@18"},"arguments":[]}},{"\$type":"Keyword","value":"]"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Axis","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Curve","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@1"},"arguments":[],"cardinality":"?"},{"\$type":"Keyword","value":"{"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]},{"\$type":"Keyword","value":"}"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"Entries","definition":{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Assignment","feature":"entries","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Assignment","feature":"entries","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]}}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]},{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Assignment","feature":"entries","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"Keyword","value":","},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"},{"\$type":"Assignment","feature":"entries","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@5"},"arguments":[]}}],"cardinality":"*"},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"*"}]}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"DetailedEntry","returnType":{"\$ref":"#/interfaces@0"},"definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"axis","operator":"=","terminal":{"\$type":"CrossReference","type":{"\$ref":"#/rules@2"},"terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]},"deprecatedSyntax":false}},{"\$type":"Keyword","value":":","cardinality":"?"},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"NumberEntry","returnType":{"\$ref":"#/interfaces@0"},"definition":{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Option","definition":{"\$type":"Alternatives","elements":[{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"showLegend"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@11"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"ticks"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"max"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"min"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}}]},{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"Keyword","value":"graticule"}},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]}}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"GRATICULE","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"circle"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"polygon"}}]},"fragment":false,"hidden":false},{"\$type":"ParserRule","fragment":true,"name":"EOL","dataType":"string","definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[],"cardinality":"+"},{"\$type":"EndOfFile"}]},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Group","elements":[{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@12"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@13"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@14"},"arguments":[]}}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"FLOAT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/[0-9]+\\\\.[0-9]+(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"INT","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"RegexToken","regex":"/0|[1-9][0-9]*(?!\\\\.)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER","type":{"\$type":"ReturnType","name":"number"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@15"}},{"\$type":"TerminalRuleCall","rule":{"\$ref":"#/rules@16"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STRING","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/\\"([^\\"\\\\\\\\]|\\\\\\\\.)*\\"|'([^'\\\\\\\\]|\\\\\\\\.)*'/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID","type":{"\$type":"ReturnType","name":"string"},"definition":{"\$type":"RegexToken","regex":"/[\\\\w]([-\\\\w]*\\\\w)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NEWLINE","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WHITESPACE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"YAML","definition":{"\$type":"RegexToken","regex":"/---[\\\\t ]*\\\\r?\\\\n(?:[\\\\S\\\\s]*?\\\\r?\\\\n)?---(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"DIRECTIVE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%{[\\\\S\\\\s]*?}%%(?:\\\\r?\\\\n|(?!\\\\S))/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"SINGLE_LINE_COMMENT","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*%%[^\\\\n\\\\r]*/"},"fragment":false}],"interfaces":[{"\$type":"Interface","name":"Entry","attributes":[{"\$type":"TypeAttribute","name":"axis","isOptional":true,"type":{"\$type":"ReferenceType","referenceType":{"\$type":"SimpleType","typeRef":{"\$ref":"#/rules@2"}}}},{"\$type":"TypeAttribute","name":"value","type":{"\$type":"SimpleType","primitiveType":"number"},"isOptional":false}],"superTypes":[]}],"definesHiddenTokens":false,"hiddenTokens":[],"types":[],"usedGrammars":[]}`),"RadarGrammar");var op;var ap=nd(()=>op!==null&&op!==void 0?op:op=qu(`{"\$type":"Grammar","isDeclared":true,"name":"Treemap","rules":[{"\$type":"ParserRule","fragment":true,"name":"TitleAndAccessibilities","definition":{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"accDescr","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@2"},"arguments":[]}},{"\$type":"Assignment","feature":"accTitle","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@3"},"arguments":[]}},{"\$type":"Assignment","feature":"title","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@4"},"arguments":[]}}],"cardinality":"+"},"definesHiddenTokens":false,"entry":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"BOOLEAN","type":{"\$type":"ReturnType","name":"boolean"},"definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"true"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"false"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_DESCR","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accDescr(?:[\\\\t ]*:([^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)|\\\\s*{([^}]*)})/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ACC_TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*accTitle[\\\\t ]*:(?:[^\\\\n\\\\r]*?(?=%%)|[^\\\\n\\\\r]*)/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"TITLE","definition":{"\$type":"RegexToken","regex":"/[\\\\t ]*title(?:[\\\\t ][^\\\\n\\\\r]*?(?=%%)|[\\\\t ][^\\\\n\\\\r]*|)/"},"fragment":false,"hidden":false},{"\$type":"ParserRule","entry":true,"name":"Treemap","returnType":{"\$ref":"#/interfaces@4"},"definition":{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@6"},"arguments":[]},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@0"},"arguments":[]},{"\$type":"Assignment","feature":"TreemapRows","operator":"+=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@14"},"arguments":[]}}],"cardinality":"*"}]},"definesHiddenTokens":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"TREEMAP_KEYWORD","definition":{"\$type":"TerminalAlternatives","elements":[{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"treemap-beta"}},{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":"treemap"}}]},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"CLASS_DEF","definition":{"\$type":"RegexToken","regex":"/classDef\\\\s+([a-zA-Z_][a-zA-Z0-9_]+)(?:\\\\s+([^;\\\\r\\\\n]*))?(?:;)?/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"STYLE_SEPARATOR","definition":{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":":::"}},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"SEPARATOR","definition":{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":":"}},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"COMMA","definition":{"\$type":"CharacterRange","left":{"\$type":"Keyword","value":","}},"fragment":false,"hidden":false},{"\$type":"TerminalRule","hidden":true,"name":"WS","definition":{"\$type":"RegexToken","regex":"/[ \\\\t]+/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"ML_COMMENT","definition":{"\$type":"RegexToken","regex":"/\\\\%\\\\%[^\\\\n]*/"},"fragment":false},{"\$type":"TerminalRule","hidden":true,"name":"NL","definition":{"\$type":"RegexToken","regex":"/\\\\r?\\\\n/"},"fragment":false},{"\$type":"ParserRule","name":"TreemapRow","definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"indent","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[]},"cardinality":"?"},{"\$type":"Alternatives","elements":[{"\$type":"Assignment","feature":"item","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@16"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@15"},"arguments":[]}]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"ClassDef","dataType":"string","definition":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@7"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Item","returnType":{"\$ref":"#/interfaces@0"},"definition":{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@18"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@17"},"arguments":[]}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Section","returnType":{"\$ref":"#/interfaces@1"},"definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]},{"\$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"ParserRule","name":"Leaf","returnType":{"\$ref":"#/interfaces@2"},"definition":{"\$type":"Group","elements":[{"\$type":"Assignment","feature":"name","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@23"},"arguments":[]}},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[],"cardinality":"?"},{"\$type":"Alternatives","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@9"},"arguments":[]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@10"},"arguments":[]}]},{"\$type":"RuleCall","rule":{"\$ref":"#/rules@19"},"arguments":[],"cardinality":"?"},{"\$type":"Assignment","feature":"value","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@22"},"arguments":[]}},{"\$type":"Group","elements":[{"\$type":"RuleCall","rule":{"\$ref":"#/rules@8"},"arguments":[]},{"\$type":"Assignment","feature":"classSelector","operator":"=","terminal":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@20"},"arguments":[]}}],"cardinality":"?"}]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"INDENTATION","definition":{"\$type":"RegexToken","regex":"/[ \\\\t]{1,}/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"ID2","definition":{"\$type":"RegexToken","regex":"/[a-zA-Z_][a-zA-Z0-9_]*/"},"fragment":false,"hidden":false},{"\$type":"TerminalRule","name":"NUMBER2","definition":{"\$type":"RegexToken","regex":"/[0-9_\\\\.\\\\,]+/"},"fragment":false,"hidden":false},{"\$type":"ParserRule","name":"MyNumber","dataType":"number","definition":{"\$type":"RuleCall","rule":{"\$ref":"#/rules@21"},"arguments":[]},"definesHiddenTokens":false,"entry":false,"fragment":false,"hiddenTokens":[],"parameters":[],"wildcard":false},{"\$type":"TerminalRule","name":"STRING2","definition":{"\$type":"RegexToken","regex":"/\\"[^\\"]*\\"|'[^']*'/"},"fragment":false,"hidden":false}],"interfaces":[{"\$type":"Interface","name":"Item","attributes":[{"\$type":"TypeAttribute","name":"name","type":{"\$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"\$type":"TypeAttribute","name":"classSelector","isOptional":true,"type":{"\$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]},{"\$type":"Interface","name":"Section","superTypes":[{"\$ref":"#/interfaces@0"}],"attributes":[]},{"\$type":"Interface","name":"Leaf","superTypes":[{"\$ref":"#/interfaces@0"}],"attributes":[{"\$type":"TypeAttribute","name":"value","type":{"\$type":"SimpleType","primitiveType":"number"},"isOptional":false}]},{"\$type":"Interface","name":"ClassDefStatement","attributes":[{"\$type":"TypeAttribute","name":"className","type":{"\$type":"SimpleType","primitiveType":"string"},"isOptional":false},{"\$type":"TypeAttribute","name":"styleText","type":{"\$type":"SimpleType","primitiveType":"string"},"isOptional":false}],"superTypes":[]},{"\$type":"Interface","name":"Treemap","attributes":[{"\$type":"TypeAttribute","name":"TreemapRows","type":{"\$type":"ArrayType","elementType":{"\$type":"SimpleType","typeRef":{"\$ref":"#/rules@14"}}},"isOptional":false},{"\$type":"TypeAttribute","name":"title","isOptional":true,"type":{"\$type":"SimpleType","primitiveType":"string"}},{"\$type":"TypeAttribute","name":"accTitle","isOptional":true,"type":{"\$type":"SimpleType","primitiveType":"string"}},{"\$type":"TypeAttribute","name":"accDescr","isOptional":true,"type":{"\$type":"SimpleType","primitiveType":"string"}}],"superTypes":[]}],"definesHiddenTokens":false,"hiddenTokens":[],"imports":[],"types":[],"usedGrammars":[],"\$comment":"/**\\n * Treemap grammar for Langium\\n * Converted from mindmap grammar\\n *\\n * The ML_COMMENT and NL hidden terminals handle whitespace, comments, and newlines\\n * before the treemap keyword, allowing for empty lines and comments before the\\n * treemap declaration.\\n */"}`),"TreemapGrammar")
var ip={languageId:"info",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var sp={languageId:"packet",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var lp={languageId:"pie",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var cp={languageId:"architecture",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var up={languageId:"gitGraph",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var dp={languageId:"radar",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var pp={languageId:"treemap",fileExtensions:[".mmd",".mermaid"],caseInsensitive:!1,mode:"production"};var mp={AstReflection:nd(()=>new jd,"AstReflection")};var fp={Grammar:nd(()=>Hd(),"Grammar"),LanguageMetaData:nd(()=>ip,"LanguageMetaData"),parser:{}};var hp={Grammar:nd(()=>Yd(),"Grammar"),LanguageMetaData:nd(()=>sp,"LanguageMetaData"),parser:{}};var _p={Grammar:nd(()=>Zd(),"Grammar"),LanguageMetaData:nd(()=>lp,"LanguageMetaData"),parser:{}};var gp={Grammar:nd(()=>Qd(),"Grammar"),LanguageMetaData:nd(()=>cp,"LanguageMetaData"),parser:{}};var yp={Grammar:nd(()=>tp(),"Grammar"),LanguageMetaData:nd(()=>up,"LanguageMetaData"),parser:{}};var xp={Grammar:nd(()=>np(),"Grammar"),LanguageMetaData:nd(()=>dp,"LanguageMetaData"),parser:{}};var Tp={Grammar:nd(()=>ap(),"Grammar"),LanguageMetaData:nd(()=>pp,"LanguageMetaData"),parser:{}};var kp=/accDescr(?:[\t ]*:([^\n\r]*)|\s*{([^}]*)})/;var vp=/accTitle[\t ]*:([^\n\r]*)/;var Rp=/title([\t ][^\n\r]*|)/;var Ap={ACC_DESCR:kp,ACC_TITLE:vp,TITLE:Rp};var Ip=(Ju=class extends DefaultValueConverter{runConverter(e,t,r){let n=this.runCommonConverter(e,t,r);if(n===void 0){n=this.runCustomConverter(e,t,r)}if(n===void 0){return super.runConverter(e,t,r)}return n}runCommonConverter(e,t,r){const n=Ap[e.name];if(n===void 0){return void 0}const o=n.exec(t);if(o===null){return void 0}if(o[1]!==void 0){return o[1].trim().replace(/[\t ]{2,}/gm," ")}if(o[2]!==void 0){return o[2].replace(/^\s*/gm,"").replace(/\s+$/gm,"").replace(/[\t ]{2,}/gm," ").replace(/[\n\r]{2,}/gm,"\n")}return void 0}},r(Ju,"AbstractMermaidValueConverter"),(()=>{nd(Ju,"AbstractMermaidValueConverter")})(),Ju);var Cp=(Qu=class extends Ip{runCustomConverter(e,t,r){return void 0}},r(Qu,"CommonValueConverter"),(()=>{nd(Qu,"CommonValueConverter")})(),Qu);var Ep=(ed=class extends DefaultTokenBuilder{constructor(e){super();this.keywords=new Set(e)}buildKeywordTokens(e,t,r){const n=super.buildKeywordTokens(e,t,r);n.forEach(e=>{if(this.keywords.has(e.name)&&e.PATTERN!==void 0){e.PATTERN=new RegExp(e.PATTERN.toString()+"(?:(?=%%)|(?!\\S))")}});return n}},r(ed,"AbstractMermaidTokenBuilder"),(()=>{nd(ed,"AbstractMermaidTokenBuilder")})(),ed);td=class extends Ep{},r(td,"CommonTokenBuilder"),(()=>{nd(td,"CommonTokenBuilder")})(),td;var Sp;var Np=(Sp=class extends Ep{constructor(){super(["gitGraph"])}},r(Sp,"GitGraphTokenBuilder"),(()=>{nd(Sp,"GitGraphTokenBuilder")})(),Sp);var Pp={parser:{TokenBuilder:nd(()=>new Np,"TokenBuilder"),ValueConverter:nd(()=>new Cp,"ValueConverter")}};function bp(e=zu){const t=Uu(Fu(e),mp);const r=Uu(Mu({shared:t}),yp,Pp);t.ServiceRegistry.register(r);return{shared:t,GitGraph:r}}nd(bp,"createGitGraphServices");var Op;var Lp=(Op=class extends Ep{constructor(){super(["info","showInfo"])}},r(Op,"InfoTokenBuilder"),(()=>{nd(Op,"InfoTokenBuilder")})(),Op);var wp={parser:{TokenBuilder:nd(()=>new Lp,"TokenBuilder"),ValueConverter:nd(()=>new Cp,"ValueConverter")}};function Dp(e=zu){const t=Uu(Fu(e),mp);const r=Uu(Mu({shared:t}),fp,wp);t.ServiceRegistry.register(r);return{shared:t,Info:r}}nd(Dp,"createInfoServices");var $p;var Mp=($p=class extends Ep{constructor(){super(["packet"])}},r($p,"PacketTokenBuilder"),(()=>{nd($p,"PacketTokenBuilder")})(),$p);var Fp={parser:{TokenBuilder:nd(()=>new Mp,"TokenBuilder"),ValueConverter:nd(()=>new Cp,"ValueConverter")}};function Gp(e=zu){const t=Uu(Fu(e),mp);const r=Uu(Mu({shared:t}),hp,Fp);t.ServiceRegistry.register(r);return{shared:t,Packet:r}}nd(Gp,"createPacketServices");var Up,Kp;var Vp=(Up=class extends Ep{constructor(){super(["pie","showData"])}},r(Up,"PieTokenBuilder"),(()=>{nd(Up,"PieTokenBuilder")})(),Up);var Bp=(Kp=class extends Ip{runCustomConverter(e,t,r){if(e.name!=="PIE_SECTION_LABEL"){return void 0}return t.replace(/"/g,"").trim()}},r(Kp,"PieValueConverter"),(()=>{nd(Kp,"PieValueConverter")})(),Kp);var jp={parser:{TokenBuilder:nd(()=>new Vp,"TokenBuilder"),ValueConverter:nd(()=>new Bp,"ValueConverter")}};function Wp(e=zu){const t=Uu(Fu(e),mp);const r=Uu(Mu({shared:t}),_p,jp);t.ServiceRegistry.register(r);return{shared:t,Pie:r}}nd(Wp,"createPieServices");var zp,Hp;var Xp=(zp=class extends Ep{constructor(){super(["architecture"])}},r(zp,"ArchitectureTokenBuilder"),(()=>{nd(zp,"ArchitectureTokenBuilder")})(),zp);var Yp=(Hp=class extends Ip{runCustomConverter(e,t,r){if(e.name==="ARCH_ICON"){return t.replace(/[()]/g,"").trim()}else if(e.name==="ARCH_TEXT_ICON"){return t.replace(/["()]/g,"")}else if(e.name==="ARCH_TITLE"){return t.replace(/[[\]]/g,"").trim()}return void 0}},r(Hp,"ArchitectureValueConverter"),(()=>{nd(Hp,"ArchitectureValueConverter")})(),Hp);var qp={parser:{TokenBuilder:nd(()=>new Xp,"TokenBuilder"),ValueConverter:nd(()=>new Yp,"ValueConverter")}};function Zp(e=zu){const t=Uu(Fu(e),mp);const r=Uu(Mu({shared:t}),gp,qp);t.ServiceRegistry.register(r);return{shared:t,Architecture:r}}nd(Zp,"createArchitectureServices");var Jp;var Qp=(Jp=class extends Ep{constructor(){super(["radar-beta"])}},r(Jp,"RadarTokenBuilder"),(()=>{nd(Jp,"RadarTokenBuilder")})(),Jp);var em={parser:{TokenBuilder:nd(()=>new Qp,"TokenBuilder"),ValueConverter:nd(()=>new Cp,"ValueConverter")}};function tm(e=zu){const t=Uu(Fu(e),mp);const r=Uu(Mu({shared:t}),xp,em);t.ServiceRegistry.register(r);return{shared:t,Radar:r}}nd(tm,"createRadarServices");var rm,nm,om;var am=(rm=class extends Ep{constructor(){super(["treemap"])}},r(rm,"TreemapTokenBuilder"),(()=>{nd(rm,"TreemapTokenBuilder")})(),rm);var im=/classDef\s+([A-Z_a-z]\w+)(?:\s+([^\n\r;]*))?;?/;var sm=(nm=class extends Ip{runCustomConverter(e,t,r){if(e.name==="NUMBER2"){return parseFloat(t.replace(/,/g,""))}else if(e.name==="SEPARATOR"){return t.substring(1,t.length-1)}else if(e.name==="STRING2"){return t.substring(1,t.length-1)}else if(e.name==="INDENTATION"){return t.length}else if(e.name==="ClassDef"){if(typeof t!=="string"){return t}const e=im.exec(t);if(e){return{$type:"ClassDefStatement",className:e[1],styleText:e[2]||void 0}}}return void 0}},r(nm,"TreemapValueConverter"),(()=>{nd(nm,"TreemapValueConverter")})(),nm);function lm(e){const t=e.validation.TreemapValidator;const r=e.validation.ValidationRegistry;if(r){let e={Treemap:t.checkSingleRoot.bind(t)};r.register(e,t)}}nd(lm,"registerValidationChecks");var cm=(om=class{checkSingleRoot(e,t){let r;for(const n of e.TreemapRows){if(!n.item){continue}if(r===void 0&&n.indent===void 0){r=0}else if(n.indent===void 0){t("error","Multiple root nodes are not allowed in a treemap.",{node:n,property:"item"})}else if(r!==void 0&&r>=parseInt(n.indent,10)){t("error","Multiple root nodes are not allowed in a treemap.",{node:n,property:"item"})}}}},r(om,"TreemapValidator"),(()=>{nd(om,"TreemapValidator")})(),om);var um={parser:{TokenBuilder:nd(()=>new am,"TokenBuilder"),ValueConverter:nd(()=>new sm,"ValueConverter")},validation:{TreemapValidator:nd(()=>new cm,"TreemapValidator")}};function dm(e=zu){const t=Uu(Fu(e),mp);const r=Uu(Mu({shared:t}),Tp,um);t.ServiceRegistry.register(r);lm(r);return{shared:t,Treemap:r}}nd(dm,"createTreemapServices");var pm;var mm={};var fm={info:nd(async()=>{const{createInfoServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("t.js","s")})})});const t=e().Info.parser.LangiumParser;mm.info=t},"info"),packet:nd(async()=>{const{createPacketServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("u.js","t")})})});const t=e().Packet.parser.LangiumParser;mm.packet=t},"packet"),pie:nd(async()=>{const{createPieServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("v.js","u")})})});const t=e().Pie.parser.LangiumParser;mm.pie=t},"pie"),architecture:nd(async()=>{const{createArchitectureServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("w.js","v")})})});const t=e().Architecture.parser.LangiumParser;mm.architecture=t},"architecture"),gitGraph:nd(async()=>{const{createGitGraphServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("x.js","w")})})});const t=e().GitGraph.parser.LangiumParser;mm.gitGraph=t},"gitGraph"),radar:nd(async()=>{const{createRadarServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("y.js","x")})})});const t=e().Radar.parser.LangiumParser;mm.radar=t},"radar"),treemap:nd(async()=>{const{createTreemapServices:e}=await n("d.js","c").then(function(){return n("c.js","b").then(function(){return n("s.js","r").then(function(){return n("z.js","y")})})});const t=e().Treemap.parser.LangiumParser;mm.treemap=t},"treemap")};async function hm(e,t){const r=fm[e];if(!r){throw new Error(`Unknown diagram type: ${e}`)}mm[e]||await r();const n=mm[e];const o=n.parse(t);if(o.lexerErrors.length>0||o.parserErrors.length>0){throw new _m(o)}return o.value}nd(hm,"parse");var _m=(pm=class extends Error{constructor(e){const t=e.lexerErrors.map(e=>e.message).join("\n");const r=e.parserErrors.map(e=>e.message).join("\n");super(`Parsing failed: ${t} ${r}`);this.result=e}},r(pm,"MermaidParseError"),(()=>{nd(pm,"MermaidParseError")})(),pm);__bbb.jd=hm;__bbb.r=undefined}).call(this)