(function(e){"use strict";var t=__bbb.Mb;var a=__bbb.dd;var n=__bbb.ed;var r=__bbb.fd;var i=__bbb.Ac;var s=__bbb.hc;var o=__bbb.ic;var _=__bbb.tc;var c=__bbb.uc;var l=__bbb.jc;var u=__bbb.kc;var d=__bbb.id;var g=__bbb.jd;var p=__bbb.Nb;var h=__bbb.Id;var m=__bbb.Nd;var v={showLegend:!0,ticks:5,max:null,min:0,graticule:"circle"};var x={axes:[],curves:[],options:v};var b=structuredClone(x);var f=n.radar;var A=t(()=>{const e=a({...f,...r().radar});return e},"getConfig");var k=t(()=>b.axes,"getAxes");var B=t(()=>b.curves,"getCurves");var y=t(()=>b.options,"getOptions");var C=t(e=>{b.axes=e.map(e=>{var t;return{name:e.name,label:(t=e.label)!==null&&t!==void 0?t:e.name}})},"setAxes");var R=t(e=>{b.curves=e.map(e=>{var t;return{name:e.name,label:(t=e.label)!==null&&t!==void 0?t:e.name,entries:O(e.entries)}})},"setCurves");var O=t(e=>{if(e[0].axis==void 0){return e.map(e=>e.value)}const t=k();if(t.length===0){throw new Error("Axes must be populated before curves for reference entries")}return t.map(t=>{const a=e.find(e=>{var a;return((a=e.axis)===null||a===void 0?void 0:a.$refText)===t.name});if(a===void 0){throw new Error("Missing entry for axis "+t.label)}return a.value})},"computeCurveEntries");var J=t(e=>{var t,a,n,r,i,s,o,_,c,l;const u=e.reduce((e,t)=>{e[t.name]=t;return e},{});b.options={showLegend:(a=(t=u.showLegend)===null||t===void 0?void 0:t.value)!==null&&a!==void 0?a:v.showLegend,ticks:(r=(n=u.ticks)===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:v.ticks,max:(s=(i=u.max)===null||i===void 0?void 0:i.value)!==null&&s!==void 0?s:v.max,min:(_=(o=u.min)===null||o===void 0?void 0:o.value)!==null&&_!==void 0?_:v.min,graticule:(l=(c=u.graticule)===null||c===void 0?void 0:c.value)!==null&&l!==void 0?l:v.graticule}},"setOptions");var $=t(()=>{i();b=structuredClone(x)},"clear");var w={getAxes:k,getCurves:B,getOptions:y,setAxes:C,setCurves:R,setOptions:J,getConfig:A,clear:$,setAccTitle:s,getAccTitle:o,setDiagramTitle:_,getDiagramTitle:c,getAccDescription:l,setAccDescription:u};var D=t(e=>{d(e,w);const{axes:t,curves:a,options:n}=e;w.setAxes(t);w.setCurves(a);w.setOptions(n)},"populate");var F={parse:t(async e=>{const t=await g("radar",e);p.debug(t);D(t)},"parse")};var V=t((e,t,a,n)=>{var r;const i=n.db;const s=i.getAxes();const o=i.getCurves();const _=i.getOptions();const c=i.getConfig();const l=i.getDiagramTitle();const u=h(t);const d=G(u,c);const g=(r=_.max)!==null&&r!==void 0?r:Math.max(...o.map(e=>Math.max(...e.entries)));const p=_.min;const m=Math.min(c.width,c.height)/2;M(d,s,m,_.ticks,_.graticule);T(d,s,m,c);H(d,s,o,p,g,_.graticule,c);Z(d,o,_.showLegend,c);d.append("text").attr("class","radarTitle").text(l).attr("x",0).attr("y",-c.height/2-c.marginTop)},"draw");var G=t((e,t)=>{const a=t.width+t.marginLeft+t.marginRight;const n=t.height+t.marginTop+t.marginBottom;const r={x:t.marginLeft+t.width/2,y:t.marginTop+t.height/2};e.attr("viewbox",`0 0 ${a} ${n}`).attr("width",a).attr("height",n);return e.append("g").attr("transform",`translate(${r.x}, ${r.y})`)},"drawFrame");var M=t((e,t,a,n,r)=>{if(r==="circle"){for(let t=0;t<n;t++){let r=a*(t+1)/n;e.append("circle").attr("r",r).attr("class","radarGraticule")}}else if(r==="polygon"){let r=t.length;for(let i=0;i<n;i++){let s=a*(i+1)/n,o=t.map((e,t)=>{const a=2*t*Math.PI/r-Math.PI/2;const n=s*Math.cos(a);const i=s*Math.sin(a);return`${n},${i}`}).join(" ");e.append("polygon").attr("points",o).attr("class","radarGraticule")}}},"drawGraticule");var T=t((e,t,a,n)=>{const r=t.length;for(let i=0;i<r;i++){let s=t[i].label,o=2*i*Math.PI/r-Math.PI/2;e.append("line").attr("x1",0).attr("y1",0).attr("x2",a*n.axisScaleFactor*Math.cos(o)).attr("y2",a*n.axisScaleFactor*Math.sin(o)).attr("class","radarAxisLine");e.append("text").text(s).attr("x",a*n.axisLabelFactor*Math.cos(o)).attr("y",a*n.axisLabelFactor*Math.sin(o)).attr("class","radarAxisLabel")}},"drawAxes");function H(e,t,a,n,r,i,s){const o=t.length;const _=Math.min(s.width,s.height)/2;a.forEach((t,a)=>{if(t.entries.length!==o){return}const c=t.entries.map((e,t)=>{const a=2*Math.PI*t/o-Math.PI/2;const i=L(e,n,r,_);const s=i*Math.cos(a);const c=i*Math.sin(a);return{x:s,y:c}});if(i==="circle"){e.append("path").attr("d",Y(c,s.curveTension)).attr("class",`radarCurve-${a}`)}else i==="polygon"&&e.append("polygon").attr("points",c.map(e=>`${e.x},${e.y}`).join(" ")).attr("class",`radarCurve-${a}`)})}t(H,"drawCurves");function L(e,t,a,n){const r=Math.min(Math.max(e,t),a);return n*(r-t)/(a-t)}t(L,"relativeRadius");function Y(e,t){const a=e.length;let n=`M${e[0].x},${e[0].y}`;for(let r=0;r<a;r++){let i=e[(r-1+a)%a],s=e[r],o=e[(r+1)%a],_=e[(r+2)%a],c={x:s.x+(o.x-i.x)*t,y:s.y+(o.y-i.y)*t},l={x:o.x-(_.x-s.x)*t,y:o.y-(_.y-s.y)*t};n+=` C${c.x},${c.y} ${l.x},${l.y} ${o.x},${o.y}`}return`${n} Z`}t(Y,"closedRoundCurve");function Z(e,t,a,n){if(!a){return}const r=(n.width/2+n.marginRight)*3/4;const i=-(n.height/2+n.marginTop)*3/4;const s=20;t.forEach((t,a)=>{const n=e.append("g").attr("transform",`translate(${r}, ${i+a*s})`);n.append("rect").attr("width",12).attr("height",12).attr("class",`radarLegendBox-${a}`);n.append("text").attr("x",16).attr("y",0).attr("class","radarLegendText").text(t.label)})}t(Z,"drawLegend");var S={draw:V};var K=t((e,t)=>{let a="";for(let n=0;n<e.THEME_COLOR_LIMIT;n++){let r=e[`cScale${n}`];a+=`\n\t\t.radarCurve-${n} {\n\t\t\tcolor: ${r};\n\t\t\tfill: ${r};\n\t\t\tfill-opacity: ${t.curveOpacity};\n\t\t\tstroke: ${r};\n\t\t\tstroke-width: ${t.curveStrokeWidth};\n\t\t}\n\t\t.radarLegendBox-${n} {\n\t\t\tfill: ${r};\n\t\t\tfill-opacity: ${t.curveOpacity};\n\t\t\tstroke: ${r};\n\t\t}\n\t\t`}return a},"genIndexStyles");var E=t(e=>{const t=m();const n=r();const i=a(t,n.themeVariables);const s=a(i.radar,e);return{themeVariables:i,radarOptions:s}},"buildRadarStyleOptions");var I=t(({radar:e}={})=>{const{themeVariables:t,radarOptions:a}=E(e);return`\n\t.radarTitle {\n\t\tfont-size: ${t.fontSize};\n\t\tcolor: ${t.titleColor};\n\t\tdominant-baseline: hanging;\n\t\ttext-anchor: middle;\n\t}\n\t.radarAxisLine {\n\t\tstroke: ${a.axisColor};\n\t\tstroke-width: ${a.axisStrokeWidth};\n\t}\n\t.radarAxisLabel {\n\t\tdominant-baseline: middle;\n\t\ttext-anchor: middle;\n\t\tfont-size: ${a.axisLabelFontSize}px;\n\t\tcolor: ${a.axisColor};\n\t}\n\t.radarGraticule {\n\t\tfill: ${a.graticuleColor};\n\t\tfill-opacity: ${a.graticuleOpacity};\n\t\tstroke: ${a.graticuleColor};\n\t\tstroke-width: ${a.graticuleStrokeWidth};\n\t}\n\t.radarLegendText {\n\t\ttext-anchor: start;\n\t\tfont-size: ${a.legendFontSize}px;\n\t\tdominant-baseline: hanging;\n\t}\n\t${K(t,a)}\n\t`},"styles");var P={parser:F,db:w,renderer:S,styles:I};var j={diagram:P};__bbb.T=j}).call(this)